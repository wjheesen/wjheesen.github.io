---
layout: post
title: Drawing shapes based on user input
date: 2016-10-17
---
<p>
        I recently published an app called <a href="https://play.google.com/store/apps/details?id=com.educational_math_apps.walldraw">Wall Draw</a>
        that allows users to draw shapes by dragging a finger across the screen. The app features two distinct drawing methods:
        one that scales a shape to fit inside a rectangular region, and another that stretches a shape across a line.
        We'll cover both of these methods in detail, but first take a moment to test them out on the canvas below.
    </p>


    <form class="form-inline">
        <div class="form-group">
            <label for="selectDrawMode" class="control-label">
                Draw mode:
            </label>
            <select class="form-control" id="selectDrawMode">
                <option value="0">Fit in rectangle</option>
                <option value="1">Strech across line</option>
            </select>
        </div>
        <div class="form-group">
            <label for="selectShape" class="control-label">
                Shape:
            </label>
            <select class="form-control" id="selectShape">
                <option value="0">Pentagon</option>
                <option value="1">Hexagon</option>
                <option value="2">Diamond</option>
                <option value="3">Star</option>
                <option value="4">Bat</option>
            </select>
        </div>
        <div class="form-group">
            <label for="pickFillColor" class="control-label">
                Fill color:
            </label>
            <input class="form-control" id="pickFillColor" type="color" value="#ffff00" />
        </div>
        <div class="form-group">
            <label for="pickStrokeColor" class="control-label">
                Stroke color:
            </label>
            <input class="form-control" id="pickStrokeColor" type="color" value="#000000" />
        </div>
    </form>

    <canvas id="canvas" width="0" height="300">
        Your browser doesn't appear to support the canvas element.
    </canvas>

    <p>The table below summarizes some of the key differences between the two drawing methods.</p>

    <table class="table table-hover">
        <thead>
            <tr>
                <th>
                    Property
                </th>
                <th>
                    Fit in rectangle
                </th>
                <th>
                    Stretch across line
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th>
                    Aspect ratio
                </th>
                <td>
                    Varies with rectangle
                </td>
                <td>
                    Fixed
                </td>
            </tr>
            <tr>
                <th>
                    Orientation
                </th>
                <td>
                    Flips in x/y axis
                </td>
                <td>
                    Fixed
                </td>
            </tr>
            <tr>
                <th>
                    Rotation angle
                </th>
                <td>
                    Fixed
                </td>
                <td>
                    Varies from 0° to 360°
                </td>
            </tr>
            <tr>
                <th>
                    Size
                </th>
                <td>
                    Matches size of rectangle
                </td>
                <td>
                    Depends on length of line
                </td>
            </tr>
            <tr>
                <th>
                    Transformation
                </th>
                <td>
                    Rect to rect
                </td>
                <td>
                    Stretch rotation
                </td>
            </tr>
        </tbody>
    </table>

    <p>
        Note that each time you move the mouse, the canvas recalculates the rectangle or line to match the start and end points of your gesture,
        then transforms the shape accordingly. Finally, the canvas redraws itself to give the illusion of movement. These steps are conceptually simple,
        but require some structure to implement; in particular, <em>you will need...</em>
    </p>

    <dl class="dl-horizontal">
        <dt>
            A drawing project
        </dt>
        <dd>
            Consists of code specific to platform and rendering library.
        </dd>
        <dt>
            A math package
        </dt>
        <dd>
            Consists of point, vector, rect, and matrix objects.
        </dd>
        <dt>
            A data package
        </dt>
        <dd>
            Consists of path, mesh, and shape objects.
        </dd>
        <dt>
            A drag detector
        </dt>
        <dd>
            Detects drag events and sends callbacks to interface.
        </dd>
        <dt>
            A surface class
        </dt>
        <dd>
            Changes the canvas in response to drag events.
        </dd>
    </dl>

    <p>
        The next five sections help you put the structure in place, and then the last two sections help you implement both of the drawing methods.
    </p>

    <h2 id="drawing-project">1.0 Start a drawing project</h2>

    <p>
        Begin by choosing a platform and rendering library. For example, <a href="https://play.google.com/store/apps/details?id=com.educational_math_apps.walldraw">Wall Draw</a>
        is built on the Android platform, and uses the OpenGL ES 2.0 rendering library. The canvas at the top of this page is
        designed for the Web, and uses HTML5 canvas for rendering. Refer to the table below for some common options and tutorials.
    </p>

    <table class="table table-hover">
        <thead>
            <tr>
                <th>
                    Platform
                </th>
                <th>
                    Rendering library
                </th>
            </tr>
        </thead>
        <tbody>
                    <tr>
                        <td>
                            Android
                        </td>
                        <td>
                            <a href="https://developer.android.com/training/custom-views/custom-drawing.html">
                                Canvas
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Android
                        </td>
                        <td>
                            <a href="https://developer.android.com/guide/topics/graphics/opengl.html">
                                OpenGL ES
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            iOS
                        </td>
                        <td>
                            <a href="https://developer.apple.com/library/content/documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/Introduction/Introduction.html">
                                OpenGL ES
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Web
                        </td>
                        <td>
                            <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API">
                                HTML5 canvas
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Web
                        </td>
                        <td>
                            <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API">
                                WebGL
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Xamarin
                        </td>
                        <td>
                            <a href="https://developer.xamarin.com/guides/cross-platform/game_development/cocossharp/">
                                CocosSharp
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Xamarin
                        </td>
                        <td>
                            <a href="https://developer.xamarin.com/guides/cross-platform/drawing/introduction/">
                                SkiaSharp
                            </a>
                        </td>
                    </tr>
        </tbody>
    </table>

    <div class="bs-callout bs-callout-info">
        <h4>Xamarin supports cross-platform rendering libraries</h4>
        Code that you write with CocosSharp or SkiaSharp can be shared between Android and iOS applications.
        See <a href="https://www.xamarin.com/">xamarin.com</a> for more information.
    </div>

    <h2 id="math-package">2.0 Create a math package</h2>

    <p>
        The following subsections describe the basic structure for point, vector, rectangle, and matrix objects (using Java syntax).
        In most cases you can reuse or extend code from your platform or rendering library instead of writing the code yourself;
        however, if you need to write a portion of the code on your own, you can refer to the sample code I provide for each method.
    </p>

    <div class="bs-callout bs-callout-info">
        <h4>For simple math structures in .NET, prefer value types (structs) over reference types (classes).</h4>
        Structs are cheap to work with because they operate entirely on the stack, requiring no memory overhead.
        Moreover, like primitives, structs are passed by value and cannot be null, so you can safely modify them inside a method without
        changing the values of the original struct or risking a null pointer exception. For more information, see Microsoft's guide on
        <a href="https://msdn.microsoft.com/en-us/library/ms229017(v=vs.110).aspx">choosing between a class and a struct</a>.
    </div>

    <h3 id="point-class">2.1 Create a point class</h3>

    <div class="bs-callout bs-callout-warning">
        <h4>Do not confuse points with vectors</h4>
        A point's (<var>x</var>,<var>y</var>) coordinates represent a position on the coordinate plane, whereas a vector's
        (<var>x</var>,<var>y</var>) coordinates represent a direction and a magnitude. A vector can be scaled and normalized,
        and can be added, subtracted, dotted, and crossed with another vector, but none of these operations apply coherently to points.
        Furthermore, the method for transforming a point differs from the method for transforming a vector.
        Therefore I recommend using two distinct classes to define point and vector objects.
    </div>

    <p>
        Structure your <code class="language-java">Point</code> class as follows:
    </p>



<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#point-fields' data-toggle='collapse'>Fields</a>
            </th>
        </tr>
    </thead>
    <tbody id='point-fields' class='collapse'>

<tr>
    <td>
        <code class='language-java'>public float x</code><br/>This point's horizontal position with respect to the origin.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>public float y</code><br/>This point's vertical position with respect to the origin.
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#point-constructors' data-toggle='collapse'>Constructors</a>
            </th>
        </tr>
    </thead>
    <tbody id='point-constructors' class='collapse'>

<tr>
    <td>
        <a href='#point-constructors-1' data-toggle='collapse'>
            <code class='language-java'>public Point()</code>
        </a>
        <p>Creates a point initialized to (0,0).</p>
        <div id='point-constructors-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this(0,0);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#point-constructors-2' data-toggle='collapse'>
            <code class='language-java'>public Point(float x, float y)</code>
        </a>
        <p>Creates a point with the specified (x,y) coordinates.</p>
        <div id='point-constructors-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.x = x;
this.y = y;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#point-constructors-3' data-toggle='collapse'>
            <code class='language-java'>public Point(Point src)</code>
        </a>
        <p>Creates a point that is a deep copy of src.</p>
        <div id='point-constructors-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.x = src.x;
this.y = src.y;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#point-static-factory-methods' data-toggle='collapse'>Static factory methods</a>
            </th>
        </tr>
    </thead>
    <tbody id='point-static-factory-methods' class='collapse'>

<tr>
    <td>
        <a href='#point-static-factory-methods-1' data-toggle='collapse'>
            <code class='language-java'>public static Point between(Point p1, Point p2)</code>
        </a>
        <p>Computes the midpoint of p1 and p2.</p>
        <div id='point-static-factory-methods-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
float midX = 0.5f * (p1.x + p2.x);
float midY = 0.5f * (p1.y + p2.y);
return new Point(midX, midY);</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#point-properties' data-toggle='collapse'>Properties</a>
            </th>
        </tr>
    </thead>
    <tbody id='point-properties' class='collapse'>

<tr>
    <td>
        <a href='#point-properties-1' data-toggle='collapse'>
            <code class='language-java'>public float distanceToOrigin()</code>
        </a>
        <p>Computes the distance from this point to the origin (0,0).</p>
        <div id='point-properties-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.distanceToPoint(0,0);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#point-properties-2' data-toggle='collapse'>
            <code class='language-java'>public float distanceToPoint(Point other)</code>
        </a>
        <p>Computes the distance from this point to the other point.</p>
        <div id='point-properties-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.distanceToPoint(other.x,other.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#point-properties-3' data-toggle='collapse'>
            <code class='language-java'>public float distanceToPoint(float x, float y)</code>
        </a>
        <p>Computes the distance from this point to the point (x,y).</p>
        <div id='point-properties-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
float dx = this.x - x;
float dy = this.y - y;
float dist2 = (dx * dx) + (dy * dy);
return Math.sqrt(dist2);</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#point-setters' data-toggle='collapse'>Setters</a>
            </th>
        </tr>
    </thead>
    <tbody id='point-setters' class='collapse'>

<tr>
    <td>
        <a href='#point-setters-1' data-toggle='collapse'>
            <code class='language-java'>public void set(Point src)</code>
        </a>
        <p>Sets this point's (x,y) coordinates to those of src.</p>
        <div id='point-setters-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.set(src.x, src.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#point-setters-2' data-toggle='collapse'>
            <code class='language-java'>public void set(float x, float y)</code>
        </a>
        <p>Sets this point's (x,y) coordinates.</p>
        <div id='point-setters-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.x = x;
this.y = y;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#point-transformations' data-toggle='collapse'>Transformations</a>
            </th>
        </tr>
    </thead>
    <tbody id='point-transformations' class='collapse'>

<tr>
    <td>
        <a href='#point-transformations-1' data-toggle='collapse'>
            <code class='language-java'>public void offset(Vec2 vector)</code>
        </a>
        <p>Offsets this point's (x,y) coordinates by the specified vector.</p>
        <div id='point-transformations-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.offset(vector.x, vector.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#point-transformations-2' data-toggle='collapse'>
            <code class='language-java'>public void offset(float dx, float dy)</code>
        </a>
        <p>Offsets this point's (x,y) coordinates by the vector (dx,dy).</p>
        <div id='point-transformations-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.x += dx;
this.y += dy;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>


    <h3 id="vector-class">2.2 Create a vector class</h3>

    <p>
        Structure your <code class="language-java">Vec2</code> class as follows:
    </p>



<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#vec2-fields' data-toggle='collapse'>Fields</a>
            </th>
        </tr>
    </thead>
    <tbody id='vec2-fields' class='collapse'>

<tr>
    <td>
        <code class='language-java'>public float x</code><br/>The x component of this vector.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>public float y</code><br/>The y component of this vector.
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#vec2-constructors' data-toggle='collapse'>Constructors</a>
            </th>
        </tr>
    </thead>
    <tbody id='vec2-constructors' class='collapse'>

<tr>
    <td>
        <a href='#vec2-constructors-1' data-toggle='collapse'>
            <code class='language-java'>public Vec2()</code>
        </a>
        <p>Creates a vector initialized to (0,0).</p>
        <div id='vec2-constructors-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this(0,0);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#vec2-constructors-2' data-toggle='collapse'>
            <code class='language-java'>public Vec2(float x, float y)</code>
        </a>
        <p>Creates a vector with the specified (x,y) components.</p>
        <div id='vec2-constructors-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.x = x;
this.y = y;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#vec2-constructors-3' data-toggle='collapse'>
            <code class='language-java'>public Vec2(Vec2 src)</code>
        </a>
        <p>Creates a vector that is a deep copy of src.</p>
        <div id='vec2-constructors-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.x = src.x;
this.y = src.y;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#vec2-static-factory-methods' data-toggle='collapse'>Static factory methods</a>
            </th>
        </tr>
    </thead>
    <tbody id='vec2-static-factory-methods' class='collapse'>

<tr>
    <td>
        <a href='#vec2-static-factory-methods-1' data-toggle='collapse'>
            <code class='language-java'>public Vec2 fromPoints(start, end)</code>
        </a>
        <p>Computes the vector from the specified start point to the specified end point.</p>
        <div id='vec2-static-factory-methods-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return new Vec2(end.x - start.x, end.y - start.y);</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#vec2-properties' data-toggle='collapse'>Properties</a>
            </th>
        </tr>
    </thead>
    <tbody id='vec2-properties' class='collapse'>

<tr>
    <td>
        <a href='#vec2-properties-1' data-toggle='collapse'>
            <code class='language-java'>public boolean isZero()</code>
        </a>
        <p>Checks if this vector is equal to the additive identity (0,0).</p>
        <div id='vec2-properties-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return (this.x == 0) &amp;&amp; (this.y == 0);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#vec2-properties-2' data-toggle='collapse'>
            <code class='language-java'>public float length()</code>
        </a>
        <p>Computes the length of this vector.</p>
        <div id='vec2-properties-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return Math.sqrt(this.length2());</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#vec2-properties-3' data-toggle='collapse'>
            <code class='language-java'>public float length2()</code>
        </a>
        <p>Computes the length of this vector, squared.</p>
        <div id='vec2-properties-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return (this.x * this.x) + (this.y * this.y);</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#vec2-setters' data-toggle='collapse'>Setters</a>
            </th>
        </tr>
    </thead>
    <tbody id='vec2-setters' class='collapse'>

<tr>
    <td>
        <a href='#vec2-setters-1' data-toggle='collapse'>
            <code class='language-java'>public void set(Vec2 src)</code>
        </a>
        <p>Sets this vector's (x,y) components to those of src.</p>
        <div id='vec2-setters-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.set(src.x,src.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#vec2-setters-2' data-toggle='collapse'>
            <code class='language-java'>public void set(float x, float y)</code>
        </a>
        <p>Sets this vector's (x,y) components.</p>
        <div id='vec2-setters-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.x = x;
this.y = y;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#vec2-transformations' data-toggle='collapse'>Transformations</a>
            </th>
        </tr>
    </thead>
    <tbody id='vec2-transformations' class='collapse'>

<tr>
    <td>
        <a href='#vec2-transformations-1' data-toggle='collapse'>
            <code class='language-java'>public void normalize()</code>
        </a>
        <p>Normalizes this vector to unit length</p>
        <div id='vec2-transformations-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.normalize(1);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#vec2-transformations-2' data-toggle='collapse'>
            <code class='language-java'>public void normalize(float length)</code>
        </a>
        <p>Normalizes this vector to the specified length</p>
        <div id='vec2-transformations-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.scale(length / this.length());</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#vec2-transformations-3' data-toggle='collapse'>
            <code class='language-java'>public void rotate90Left()</code>
        </a>
        <p>Rotates this vector 90 degrees to the left (CCW).</p>
        <div id='vec2-transformations-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
float xCopy = this.x;
this.x = -this.y;
this.y = xCopy;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#vec2-transformations-4' data-toggle='collapse'>
            <code class='language-java'>public void rotate90Right()</code>
        </a>
        <p>Rotates this vector 90 degrees to the right (CW).</p>
        <div id='vec2-transformations-4' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
float xCopy = this.x;
this.x = this.y;
this.y = -xCopy;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#vec2-operations' data-toggle='collapse'>Operations</a>
            </th>
        </tr>
    </thead>
    <tbody id='vec2-operations' class='collapse'>

<tr>
    <td>
        <a href='#vec2-operations-1' data-toggle='collapse'>
            <code class='language-java'>public float cross(Vec2 other)</code>
        </a>
        <p>Finds the cross product of this vector with the other vector.</p>
        <div id='vec2-operations-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return (this.x * other.y) - (this.y * other.x);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#vec2-operations-2' data-toggle='collapse'>
            <code class='language-java'>public float dot(Vec2 other)</code>
        </a>
        <p>Finds the dot product of this vector with the other vector.</p>
        <div id='vec2-operations-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return (this.x * other.x) + (this.y * other.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#vec2-operations-3' data-toggle='collapse'>
            <code class='language-java'>public void add(Vec2 other)</code>
        </a>
        <p>Adds the other vector to this vector.</p>
        <div id='vec2-operations-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.x += other.x;
this.y += other.y;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#vec2-operations-4' data-toggle='collapse'>
            <code class='language-java'>public void subtract(Vec2 other)</code>
        </a>
        <p>Subtracts the other vector from this vector.</p>
        <div id='vec2-operations-4' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.x -= other.x;
this.y -= other.y;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#vec2-operations-5' data-toggle='collapse'>
            <code class='language-java'>public void negate()</code>
        </a>
        <p>Negates this vector.</p>
        <div id='vec2-operations-5' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.x = -this.x;
this.y = -this.y;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#vec2-operations-6' data-toggle='collapse'>
            <code class='language-java'>public void scale(float scalar)</code>
        </a>
        <p>Scales this vector by the specified scalar.</p>
        <div id='vec2-operations-6' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.x *= scalar;
this.y *= scalar;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#vec2-operations-7' data-toggle='collapse'>
            <code class='language-java'>public void divide(float scalar)</code>
        </a>
        <p>Divides this vector by the specified scalar.</p>
        <div id='vec2-operations-7' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.x /= scalar;
this.y /= scalar;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>


    <h3 id="rectangle-class">2.3 Create a rectangle class</h3>

    <p>
        Structure your <code class="language-java">Rect</code> class as follows:
    </p>



<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#rect-fields' data-toggle='collapse'>Fields</a>
            </th>
        </tr>
    </thead>
    <tbody id='rect-fields' class='collapse'>

<tr>
    <td>
        <code class='language-java'>public float left</code><br/>The left boundary of this rectangle.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>public float top</code><br/>The top boundary of this rectangle.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>public float right</code><br/>The right boundary of this rectangle.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>public float bottom</code><br/>The bottom boundary of this rectangle.
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#rect-constructors' data-toggle='collapse'>Constructors</a>
            </th>
        </tr>
    </thead>
    <tbody id='rect-constructors' class='collapse'>

<tr>
    <td>
        <a href='#rect-constructors-1' data-toggle='collapse'>
            <code class='language-java'>public Rect()</code>
        </a>
        <p>Creates an empty rectangle.</p>
        <div id='rect-constructors-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this(0,0,0,0);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-constructors-2' data-toggle='collapse'>
            <code class='language-java'>public Rect(float left, float top, float right, float bottom)</code>
        </a>
        <p>Creates a rectangle with the specified boundaries.</p>
        <div id='rect-constructors-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.left = left;
this.top = top;
this.right = right;
this.bottom = bottom;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-constructors-3' data-toggle='collapse'>
            <code class='language-java'>public Rect(Rect src)</code>
        </a>
        <p>Creates a rectangle that is a deep copy of src.</p>
        <div id='rect-constructors-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this(src.left, src.top, src.right, src.bottom);</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#rect-static-factory-methods' data-toggle='collapse'>Static factory methods</a>
            </th>
        </tr>
    </thead>
    <tbody id='rect-static-factory-methods' class='collapse'>

<tr>
    <td>
        <a href='#rect-static-factory-methods-1' data-toggle='collapse'>
            <code class='language-java'>public static Rect fromDimensions(float left, float bottom, float width, float height)</code>
        </a>
        <p>Creates a rect with the specified dimensions.</p>
        <div id='rect-static-factory-methods-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Calculate the right boundary of the rect
float right = left + width;
//Calculate the top boundary of the rect
float top = bottom + height;
//Create and return the rect
return new Rect(left, top, right, bottom);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-static-factory-methods-2' data-toggle='collapse'>
            <code class='language-java'>public static Rect fromIntersection(Rect r1, Rect r2)</code>
        </a>
        <p>Finds the intersection of rectangles r1 and r2.</p>
        <div id='rect-static-factory-methods-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Copy the first rect
Rect rect = new Rect(r1);
//Intersect it with the second rect
rect.intersectRect(r2)
//Return the intersected rect
return rect;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-static-factory-methods-3' data-toggle='collapse'>
            <code class='language-java'>public static Rect fromLBRT(float left, float bottom, float right, float top)</code>
        </a>
        <p>Creates a rect with the specified boundaries entered in LBRT order.</p>
        <div id='rect-static-factory-methods-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return new Rect(left, top, right, bottom);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-static-factory-methods-4' data-toggle='collapse'>
            <code class='language-java'>public static Rect fromUnion(Point... points)</code>
        </a>
        <p>Finds the smallest rectangle that encloses all the specified points.</p>
        <div id='rect-static-factory-methods-4' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Create an empty rect
Rect rect = new Rect();
//Enclose each of the points
rect.setUnion(points);
//Return the unioned rect
return rect;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-static-factory-methods-5' data-toggle='collapse'>
            <code class='language-java'>public static Rect fromUnion(float[] points, int offset, int count)</code>
        </a>
        <p>Finds the smallest rectangle that encloses a subset of points in the specified array.</p>
        <div id='rect-static-factory-methods-5' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Create an empty rect
Rect rect = new Rect();
//Enclose the specified subset of points
rect.setUnion(points, offset, count);
//Return the unioned rect
return rect;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-static-factory-methods-6' data-toggle='collapse'>
            <code class='language-java'>public static Rect fromUnion(Rect r1, Rect r2)</code>
        </a>
        <p>Finds the union of rectangles r1 and r2.</p>
        <div id='rect-static-factory-methods-6' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Copy the first rect
Rect rect = new Rect(r1);
//Union it with the second rect
rect.unionRect(r2)
//Return the unioned rect
return rect;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#rect-properties' data-toggle='collapse'>Properties</a>
            </th>
        </tr>
    </thead>
    <tbody id='rect-properties' class='collapse'>

<tr>
    <td>
        <a href='#rect-properties-1' data-toggle='collapse'>
            <code class='language-java'>public boolean isEmpty()</code>
        </a>
        <p>Checks if this rectangle is empty. True if left &gt;= right or bottom &gt;= top.</p>
        <div id='rect-properties-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return (this.left &gt;= this.right) || this.bottom &gt;= this.top;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-properties-2' data-toggle='collapse'>
            <code class='language-java'>public boolean isValid()</code>
        </a>
        <p>Checks if the boundaries of this rectangle represent a valid rectangle. True if right &gt;= left and top &gt;= bottom.</p>
        <div id='rect-properties-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.right &gt;= this.left &amp;&amp; this.top &gt;= this.bottom;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-properties-3' data-toggle='collapse'>
            <code class='language-java'>public float width()</code>
        </a>
        <p>Computes the width of this rectangle.</p>
        <div id='rect-properties-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.right - this.left;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-properties-4' data-toggle='collapse'>
            <code class='language-java'>public float height()</code>
        </a>
        <p>Computes the height of this rectangle.</p>
        <div id='rect-properties-4' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.top - this.bottom;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-properties-5' data-toggle='collapse'>
            <code class='language-java'>public float area()</code>
        </a>
        <p>Computes the area of this rectangle.</p>
        <div id='rect-properties-5' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.width() * this.height();</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-properties-6' data-toggle='collapse'>
            <code class='language-java'>public Point center()</code>
        </a>
        <p>Finds the point at the center of this rectangle.</p>
        <div id='rect-properties-6' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return new Point(this.centerX(), this.centerY());</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-properties-7' data-toggle='collapse'>
            <code class='language-java'>public float centerX()</code>
        </a>
        <p>Finds the x-coordinate of the point at the center of this rectangle.</p>
        <div id='rect-properties-7' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return 0.5f * (this.left + this.right);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-properties-8' data-toggle='collapse'>
            <code class='language-java'>public float centerY()</code>
        </a>
        <p>Finds the y-coordinate of the point at the center of this rectangle.</p>
        <div id='rect-properties-8' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return 0.5f * (this.bottom + this.top);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-properties-9' data-toggle='collapse'>
            <code class='language-java'>public Point bottomLeft()</code>
        </a>
        <p>Finds the point at the bottom left corner of this rectangle.</p>
        <div id='rect-properties-9' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return new Point(this.left, this.bottom);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-properties-10' data-toggle='collapse'>
            <code class='language-java'>public Point bottomRight()</code>
        </a>
        <p>Finds the point at the bottom right corner of this rectangle.</p>
        <div id='rect-properties-10' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return new Point(this.right, this.bottom);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-properties-11' data-toggle='collapse'>
            <code class='language-java'>public Point topLeft()</code>
        </a>
        <p>Finds the point at the top left corner of this rectangle.</p>
        <div id='rect-properties-11' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return new Point(this.left, this.top);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-properties-12' data-toggle='collapse'>
            <code class='language-java'>public Point topRight()</code>
        </a>
        <p>Finds the point at the top right corner of this rectangle.</p>
        <div id='rect-properties-12' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return new Point(this.right, this.top);</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#rect-setters' data-toggle='collapse'>Setters</a>
            </th>
        </tr>
    </thead>
    <tbody id='rect-setters' class='collapse'>

<tr>
    <td>
        <a href='#rect-setters-1' data-toggle='collapse'>
            <code class='language-java'>public void set(Rect src)</code>
        </a>
        <p>Sets this rectangle's boundaries to those of src.</p>
        <div id='rect-setters-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.set(src.left, src.top, src.right, src.bottom);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-setters-2' data-toggle='collapse'>
            <code class='language-java'>public void set(float left, float top, float right, float bottom)</code>
        </a>
        <p>Sets this rectangle's boundaries.</p>
        <div id='rect-setters-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.left = left;
this.top = top;
this.right = right;
this.bottom = bottom;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-setters-3' data-toggle='collapse'>
            <code class='language-java'>public void setEmpty()</code>
        </a>
        <p>Sets this rectangle empty.</p>
        <div id='rect-setters-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.left = 0;
this.top = 0;
this.right = 0;
this.bottom = 0;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-setters-4' data-toggle='collapse'>
            <code class='language-java'>public void setUnion(Point... points)</code>
        </a>
        <p>Sets this rectangle to the smallest rectangle that encloses all the points in the specified array</p>
        <div id='rect-setters-4' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Enclose the first point in the array
this.left = this.right = points[0].x;
this.top = this.bottom = points[0].y;
//Enclose the remaining points
for(int i = 1; i &lt; points.length; i++) {
    rect.unionPoint(points[i]);
}</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-setters-5' data-toggle='collapse'>
            <code class='language-java'>public void setUnion(float[] points, int offset, int count)</code>
        </a>
        <p>Sets this rectangle to the smallest rectangle that encloses a subset of points in the specified array</p>
        <div id='rect-setters-5' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Enclose the first point in the subset
this.left = this.right = points[offset++];
this.top = this.bottom = points[offset++];
//Enclose the rest of the points in the subset
this.unionPoints(points, offset, count - 1);</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#rect-containment-checkers' data-toggle='collapse'>Containment Checkers</a>
            </th>
        </tr>
    </thead>
    <tbody id='rect-containment-checkers' class='collapse'>

<tr>
    <td>
        <a href='#rect-containment-checkers-1' data-toggle='collapse'>
            <code class='language-java'>public boolean containsPoint(Point pt)</code>
        </a>
        <p>Checks if this rectangle contains the specified point.</p>
        <div id='rect-containment-checkers-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.containsPoint(pt.x, pt.y)</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-containment-checkers-2' data-toggle='collapse'>
            <code class='language-java'>public boolean containsPoint(float x, float y)</code>
        </a>
        <p>Checks if this rectangle contains the point (x,y).</p>
        <div id='rect-containment-checkers-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
return this.left &lt;= x &amp;&amp; x &lt;= this.right &amp;&amp; this.bottom &lt;= y &amp;&amp; y &lt;= this.top;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-containment-checkers-3' data-toggle='collapse'>
            <code class='language-java'>public boolean containsRect(Rect other)</code>
        </a>
        <p>Checks if this rectangle contains the other rectangle.</p>
        <div id='rect-containment-checkers-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
return this.left &lt;= other.left &amp;&amp; this.right &gt;= other.right &amp;&amp;
            this.bottom &lt;= other.bottom &amp;&amp; this.top =&gt; other.top;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#rect-intersect-operations' data-toggle='collapse'>Intersect Operations</a>
            </th>
        </tr>
    </thead>
    <tbody id='rect-intersect-operations' class='collapse'>

<tr>
    <td>
        <a href='#rect-intersect-operations-1' data-toggle='collapse'>
            <code class='language-java'>public void intersectRect(Rect other)</code>
        </a>
        <p>Sets this rectangle to the intersection of itself and the other rectangle.</p>
        <div id='rect-intersect-operations-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.left = Math.max(this.left, other.left);
this.right = Math.min(this.right, other.right);
this.bottom = Math.max(this.bottom, other.bottom);
this.top = Math.min(this.top, other.top);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-intersect-operations-2' data-toggle='collapse'>
            <code class='language-java'>public boolean intersectsRect(Rect other)</code>
        </a>
        <p>Checks if this rectangle intersects the other rectangle.</p>
        <div id='rect-intersect-operations-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
return this.right &gt;= other.left &amp;&amp; this.left &lt;= other.right &amp;&amp;
            this.top &gt;= other.bottom &amp;&amp; this.bottom &lt;= other.top;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-intersect-operations-3' data-toggle='collapse'>
            <code class='language-java'>public boolean intersectsRect(Rect other, float percent)</code>
        </a>
        <p>Checks if this rectangle intersects the other rectangle by at least the specified percentage.</p>
        <div id='rect-intersect-operations-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Get the intersection of the two rects
Rect intersection = Rect.fromIntersection(this, other);
//Return true if the intersection is valid and the ratio
//of the areas is bigger than the specified percent value.
return intersection.isValid() &amp;&amp; intersection.area() / other.area() &gt;= percent;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#rect-union-operations' data-toggle='collapse'>Union Operations</a>
            </th>
        </tr>
    </thead>
    <tbody id='rect-union-operations' class='collapse'>

<tr>
    <td>
        <a href='#rect-union-operations-1' data-toggle='collapse'>
            <code class='language-java'>public void unionPoint(Point pt)</code>
        </a>
        <p>Expands this rectangle to enclose the specified point.</p>
        <div id='rect-union-operations-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.union(pt.x,pt.y)</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-union-operations-2' data-toggle='collapse'>
            <code class='language-java'>public void unionPoint(float x, float y)</code>
        </a>
        <p>Expands this rectangle to enclose the point (x,y).</p>
        <div id='rect-union-operations-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.left = Math.min(x, this.left);
this.top = Math.max(y, this.top);
this.right = Math.max(x, this.right);
this.bottom = Math.min(y, this.bottom);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-union-operations-3' data-toggle='collapse'>
            <code class='language-java'>public void unionPoints(Point... points)</code>
        </a>
        <p>Expands this rectangle to enclose the specified points.</p>
        <div id='rect-union-operations-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Enclose each of the points in the array
for(Point pt: points) {
    rect.unionPoint(pt);
}</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-union-operations-4' data-toggle='collapse'>
            <code class='language-java'>public void unionPoints(float[] points, int offset, int count)</code>
        </a>
        <p>Expands this rectangle to enclose a subset of points in the specified array.</p>
        <div id='rect-union-operations-4' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//For each of the points in the subset
for (int i = 0; i&lt;count; i++) {
    //Expand this rect to enclose the point
    this.unionPoint(points[offset++], points[offset++]);
}</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-union-operations-5' data-toggle='collapse'>
            <code class='language-java'>public void unionRect(Rect other)</code>
        </a>
        <p>Expands this rectangle to enclose the specified rectangle.</p>
        <div id='rect-union-operations-5' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.left = Math.min(this.left, other.left);
this.right = Math.max(this.right, other.right);
this.bottom = Math.min(this.bottom, other.bottom);
this.top = Math.max(this.top, other.top);</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#rect-transformations' data-toggle='collapse'>Transformations</a>
            </th>
        </tr>
    </thead>
    <tbody id='rect-transformations' class='collapse'>

<tr>
    <td>
        <a href='#rect-transformations-1' data-toggle='collapse'>
            <code class='language-java'>public void inset(Vec2 vector)</code>
        </a>
        <p>Insets the boundaries of this rectangle by the specified vector.</p>
        <div id='rect-transformations-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.inset(vector.x, vector.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-transformations-2' data-toggle='collapse'>
            <code class='language-java'>public void inset(float dx, float dy)</code>
        </a>
        <p>Insets the boundaries of this rectangle by the vector (dx,dy).</p>
        <div id='rect-transformations-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Inset the left and right boundaries by dx
this.left += dx;
this.right -= dx;
//Inset the bottom and top boundaries by dy
this.bottom += dy;
this.top -= dy;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-transformations-3' data-toggle='collapse'>
            <code class='language-java'>public void offset(Vec2 vector)</code>
        </a>
        <p>Offsets the boundaries of this rectangle by the specified vector.</p>
        <div id='rect-transformations-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.offset(vector.x, vector.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-transformations-4' data-toggle='collapse'>
            <code class='language-java'>public void offset(float dx, float dy)</code>
        </a>
        <p>Offsets the boundaries of this rectangle by the vector (dx,dy).</p>
        <div id='rect-transformations-4' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Offset the left and right boundaries by dx
this.left += dx;
this.right += dx;
//Offset the top and bottom boundaries by dy
this.top += dy;
this.bottom += dy;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#rect-transformations-5' data-toggle='collapse'>
            <code class='language-java'>public void sort()</code>
        </a>
        <p>Swaps top/bottom or left/right if they are flipped, meaning left &gt; right and/or top &gt; bottom.</p>
        <div id='rect-transformations-5' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//If the top boundary is not above the bottom boundary
if (this.bottom &gt; this.top) {
    //Swap top and bottom
    float topCopy = this.top;
    this.top = this.bottom;
    this.bottom = topCopy;
}
//If the right boundary is not to the right of the left boundary
if (this.left &gt; this.right) {
    //Swap left and right
    float rightCopy = this.right;
    this.right = this.left;
    this.left = rightCopy;
}</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>


    <h3 id="matrix-class">2.4 Create a matrix class</h3>

    <p>
        Structure your <code class="language-java">Matrix2D</code> class as follows:
    </p>



<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#matrix2D-scaletofit-enum' data-toggle='collapse'>ScaleToFit enum</a>
            </th>
        </tr>
    </thead>
    <tbody id='matrix2D-scaletofit-enum' class='collapse'>

<tr>
    <td>
        <code class='language-java'>CENTER</code><br/>Stretches the src rect to fit inside dst, then translates src.center() to dst.center().
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>END</code><br/>Stretches the src rect to fit inside dst, then translates src.bottomRight() to dst.bottomRight().
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>FILL</code><br/>Scales the src rect to fit inside dst exactly, then translates src to dst.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>START</code><br/>Stretches the src rect to fit inside dst, then translates src.topLeft() to dst.topLeft().
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#matrix2D-fields' data-toggle='collapse'>Fields</a>
            </th>
        </tr>
    </thead>
    <tbody id='matrix2D-fields' class='collapse'>

<tr>
    <td>
        <code class='language-java'>public float m11</code><br/>The first item in the first row of this matrix.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>public float m12</code><br/>The second item in the first row of this matrix.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>public float m13</code><br/>The third item in the first row of this matrix.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>public float m21</code><br/>The first item in the second row of this matrix.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>public float m22</code><br/>The second item in the second row of this matrix.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>public float m23</code><br/>The third item in the second row of this matrix.
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#matrix2D-constructors' data-toggle='collapse'>Constructors</a>
            </th>
        </tr>
    </thead>
    <tbody id='matrix2D-constructors' class='collapse'>

<tr>
    <td>
        <a href='#matrix2D-constructors-1' data-toggle='collapse'>
            <code class='language-java'>public Matrix2D()</code>
        </a>
        <p>Creates a matrix initialized to the multiplicative idenity.</p>
        <div id='matrix2D-constructors-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this(
    1,0,0, //row 1
    0,1,0  //row 2
    );</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-constructors-2' data-toggle='collapse'>
            <code class='language-java'>public Matrix2D(float m11, float m12, float m13, float m21, float m22, float m23)</code>
        </a>
        <p>Creates a matrix with the specified entries (in row-major order).</p>
        <div id='matrix2D-constructors-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.m11 = m11; this.m12 = m12; this.m13 = m13; //row 1
this.m21 = m21; this.m22 = m22; this.m23 = m23; //row 2</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-constructors-3' data-toggle='collapse'>
            <code class='language-java'>public Matrix2D(Matrix2D src)</code>
        </a>
        <p>Creates a matrix that is a deep copy of src.</p>
        <div id='matrix2D-constructors-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this(
    src.m11, src.m12, src.m13, //row 1
    src.m21, src.m22, src.m23 //row 2
    );</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#matrix2D-static-factory-methods' data-toggle='collapse'>Static factory methods</a>
            </th>
        </tr>
    </thead>
    <tbody id='matrix2D-static-factory-methods' class='collapse'>

<tr>
    <td>
        <a href='#matrix2D-static-factory-methods-1' data-toggle='collapse'>
            <code class='language-java'>public static Matrix2D rectToRect(Rect src, Rect dst, ScaleToFit stf)</code>
        </a>
        <p>Creates a rect to rect matrix that maps src into dst using the specified scale to fit option.</p>
        <div id='matrix2D-static-factory-methods-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
Matrix2D matrix = new Matrx2D();
matrix.setRectToRect(src,dst,stf);
return matrix;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-static-factory-methods-2' data-toggle='collapse'>
            <code class='language-java'>public static Matrix2D rotate(float radians)</code>
        </a>
        <p>Creates a matrix to rotate about the origin by the specified angle in radians.</p>
        <div id='matrix2D-static-factory-methods-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
Matrix2D matrix = new Matrx2D();
matrix.postRotate(radians);
return matrix;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-static-factory-methods-3' data-toggle='collapse'>
            <code class='language-java'>public static Matrix2D rotate(Point center, float radians)</code>
        </a>
        <p>Creates a matrix to rotate about the specified center point by the specified angle in radians.</p>
        <div id='matrix2D-static-factory-methods-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
Matrix2D matrix = new Matrx2D();
matrix.postTranslate(-center.x,-center.y);
matrix.postRotate(radians);
matrix.postTranslate(center.x,center.y);
return matrix;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-static-factory-methods-4' data-toggle='collapse'>
            <code class='language-java'>public static Matrix2D scale(float widthRatio, float heightRatio)</code>
        </a>
        <p>Creates a matrix to scale about the origin by the specified width and height ratios.</p>
        <div id='matrix2D-static-factory-methods-4' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
Matrix2D matrix = new Matrx2D();
matrix.postScale(widthRatio, heightRatio);
return matrix;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-static-factory-methods-5' data-toggle='collapse'>
            <code class='language-java'>public static Matrix2D scale(Point center, float widthRatio, float heightRatio)</code>
        </a>
        <p>Creates a matrix to scale about the specified center point by the specified width and height ratios.</p>
        <div id='matrix2D-static-factory-methods-5' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
Matrix2D matrix = new Matrx2D();
matrix.postTranslate(-center.x,-center.y);
matrix.postScale(widthRatio, heightRatio);
matrix.postTranslate(center.x,center.y);
return matrix;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-static-factory-methods-6' data-toggle='collapse'>
            <code class='language-java'>public static Matrix2D stretch(float ratio)</code>
        </a>
        <p>Creates a matrix to stretch about the origin by the specified ratio.</p>
        <div id='matrix2D-static-factory-methods-6' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return Matrix.scale(ratio,ratio);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-static-factory-methods-7' data-toggle='collapse'>
            <code class='language-java'>public static Matrix2D stretch(Point center, float ratio)</code>
        </a>
        <p>Creates a matrix to stretch about the specified center point  by the specified ratio.</p>
        <div id='matrix2D-static-factory-methods-7' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return Matrix.scale(center,ratio,ratio);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-static-factory-methods-8' data-toggle='collapse'>
            <code class='language-java'>public static Matrix2D stretchRotate(Point center, Point start, Point end)</code>
        </a>
        <p>Creates a stretch rotation about the specified center point that maps the start point onto the end point.</p>
        <div id='matrix2D-static-factory-methods-8' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
Matrix2D matrix = new Matrx2D();
matrix.setStretchRotate(center,start,end);
return matrix;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-static-factory-methods-9' data-toggle='collapse'>
            <code class='language-java'>public static Matrix2D translate(Vec2 vector)</code>
        </a>
        <p>Creates a matrix to translate by the specified vector.</p>
        <div id='matrix2D-static-factory-methods-9' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.translate(vector.x, vector.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-static-factory-methods-10' data-toggle='collapse'>
            <code class='language-java'>public static Matrix2D translate(float dx, float dy)</code>
        </a>
        <p>Creates a matrix to translate by the vector (dx,dy).</p>
        <div id='matrix2D-static-factory-methods-10' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
Matrix2D matrix = new Matrx2D();
matrix.postTranslate(dx,dy);
return matrix;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#matrix2D-properties' data-toggle='collapse'>Properties</a>
            </th>
        </tr>
    </thead>
    <tbody id='matrix2D-properties' class='collapse'>

<tr>
    <td>
        <a href='#matrix2D-properties-1' data-toggle='collapse'>
            <code class='language-java'>public float determinant()</code>
        </a>
        <p>Computes the determinant of this matrix.</p>
        <div id='matrix2D-properties-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return (this.m11 * this.m22) - (this.m12 * this.m21);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-properties-2' data-toggle='collapse'>
            <code class='language-java'>public Matrix2D inverse()</code>
        </a>
        <p>Computes the inverse of this matrix.</p>
        <div id='matrix2D-properties-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
Matrix2D matrix = new Matrix2D(this);
matrix.invert();
return matrix;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#matrix2D-setters' data-toggle='collapse'>Setters</a>
            </th>
        </tr>
    </thead>
    <tbody id='matrix2D-setters' class='collapse'>

<tr>
    <td>
        <a href='#matrix2D-setters-1' data-toggle='collapse'>
            <code class='language-java'>public void set(Matrix2D src)</code>
        </a>
        <p>Sets the entries of this matrix to those of src.</p>
        <div id='matrix2D-setters-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.set(
    src.m11, src.m12, src.m13, //row 1
    src.m21, src.m22, src.m23 //row 2
    );</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-setters-2' data-toggle='collapse'>
            <code class='language-java'>public void set(float m11, float m12, float m13, float m21, float m22, float m23)</code>
        </a>
        <p>Sets the entries of this matrix (in row-major order).</p>
        <div id='matrix2D-setters-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.m11 = m11; this.m12 = m12; this.m13 = m13; //row 1
this.m21 = m21; this.m22 = m22; this.m23 = m23; //row 2</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-setters-3' data-toggle='collapse'>
            <code class='language-java'>public void setConcat(Matrix2D left, Matrix2D right)</code>
        </a>
        <p>Sets this matrix to the product of the specified left and right matrices.</p>
        <div id='matrix2D-setters-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.set(
            //Calculate the first row, fixing the first left hand row
            //and moving across each of the right hand columns
            left.m11 * right.m11 + left.m12 * right.m21,
            left.m11 * right.m12 + left.m12 * right.m22,
            left.m11 * right.m13 + left.m12 * right.m23 + left.m13,
            //Calculate the second row, fixing the second left hand row
            //and moving across each of the right hand columns
            left.m21 * right.m11 + left.m22 * right.m21,
            left.m21 * right.m12 + left.m22 * right.m22,
            left.m21 * right.m13 + left.m22 * right.m23 + left.m23
        );</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-setters-4' data-toggle='collapse'>
            <code class='language-java'>public void setIdentity()</code>
        </a>
        <p>Sets this matrix to the identity matrix.</p>
        <div id='matrix2D-setters-4' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.set(
    1,0,0, //row 1
    0,1,0  //row 2
    );</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-setters-5' data-toggle='collapse'>
            <code class='language-java'>public void setRectToRect(Rect src, Rect dst, ScaleToFit stf)</code>
        </a>
        <p>Sets this matrix to map src into dst using the specified scale to fit option.</p>
        <div id='matrix2D-setters-5' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Determine which points to match based on the scale to fit option.
Point srcPoint, dstPoint;

switch (stf) {
    case ScaleToFit.FitCenter:
        //Match center point
        srcPoint = src.center();
        dstPoint = dst.center();
            break;
    case ScaleToFit.FitEnd:
        //Match bottom right corner
        srcPoint = src.bottomRight();
        dstPoint = dst.bottomRight();
            break;
    default: //(FitStart and Fill)
        //Match top left corner
        srcPoint = src.topLeft();
        dstPoint = dst.topLeft();
            break;
}

//Determine the width and height ratio between the two rectangles.
float widthRatio = dst.width() / src.width();
float heightRatio = dst.height() / src.height();

//Set the matrix to translate the src point to the origin
this.setTranslate(-srcPoint.x, -srcPoint.y);

//Next, set this matrix to scale the src rect so it is big (or small) enough
//to fit inside the dst rect with at least one side matching in width or height.

//If we're not maintaining aspect ratio
if (stf === ScaleToFit.Fill) {
    //We can scale with different width and height ratios, allowing for
    //a perfect map from the source rectangle to the destination rectangle
    //using the ratios calculated above.
    this.postScale(widthRatio, heightRatio);
} else {
    //Otherwise we scale by the min of the width and height ratios,
    //ensuring that the src rect fits entirely enside the dst rect.
    this.postStretch(Math.min(widthRatio, heightRatio));
}

//Translate back to the dst point and we are done.
this.postTranslate(dstPoint.x, dstPoint.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-setters-6' data-toggle='collapse'>
            <code class='language-java'>public void setRotate(float radians)</code>
        </a>
        <p>Sets this matrix to rotate CCW by the specified angle in radians.</p>
        <div id='matrix2D-setters-6' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Compute the sin and cos of the angle
float sin = (float) Math.sin(radians);
float cos = (float) Math.cos(radians);
//Set this matrix to rotate by the computed sin and cos values
this.setRotate(sin, cos);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-setters-7' data-toggle='collapse'>
            <code class='language-java'>public void setRotate(float sin, float cos)</code>
        </a>
        <p>Sets this matrix to rotate by the specified sin and cos values.</p>
        <div id='matrix2D-setters-7' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.set(
    cos, -sin, 0, //row 1
    sin, cos,  0  //row 2
    );</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-setters-8' data-toggle='collapse'>
            <code class='language-java'>public void setScale(float widthRatio, float heightRatio)</code>
        </a>
        <p>Sets this matrix to scale by the specified width and height ratios.</p>
        <div id='matrix2D-setters-8' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.set(
    widthRatio, 0,           0, //row 1
    0,          heightratio, 0  //row 2
    );</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-setters-9' data-toggle='collapse'>
            <code class='language-java'>public void setStretch(float ratio)</code>
        </a>
        <p>Sets this matrix to stretch by the specified ratio.</p>
        <div id='matrix2D-setters-9' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Set this matrix to scale vertically and horizontally by the same ratio
this.setScale(ratio, ratio);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-setters-10' data-toggle='collapse'>
            <code class='language-java'>public void setStretchRotate(Point center, Point start, Point end)</code>
        </a>
        <p>Sets this matrix to stretch rotate about the specified center point from the start point to the end point.</p>
        <div id='matrix2D-setters-10' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Compute the vector from center to start and center to end
Vec2 startVector = Vec2.fromPoints(center, start);
Vec2 endVector = Vec2.fromPoints(center, end);

//Compute the length of each vector
float startLength = startVector.length();
float endLength = endVector.length();

//Calculate the stretch ratio
float ratio = endLength / startLength;

//Normalize each of the vectors
startVector.divide(startLength);
endVector.divide(endLength);

//Calculate the sin and cos of the angle between the vectors
float sin = startVector.cross(endVector);
float cos = startVector.dot(endVector);

//Set the matrix to stretch rotate by the values we calculated
this.setTranslate(-center.x,-center.y);
this.postStretch(ratio);
this.postRotate(sin,cos);
this.postTranslate(center.x,center.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-setters-11' data-toggle='collapse'>
            <code class='language-java'>public void setTranslate(float dx, float dy)</code>
        </a>
        <p>Sets this matrix to translate by the vector (dx,dy).</p>
        <div id='matrix2D-setters-11' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.set(
    1, 0, dx, //row 1
    0, 1, dy //row 2
);</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#matrix2D-transformations' data-toggle='collapse'>Transformations</a>
            </th>
        </tr>
    </thead>
    <tbody id='matrix2D-transformations' class='collapse'>

<tr>
    <td>
        <a href='#matrix2D-transformations-1' data-toggle='collapse'>
            <code class='language-java'>public void invert()</code>
        </a>
        <p>Inverts this matrix.</p>
        <div id='matrix2D-transformations-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Compute the inverse determinant of this matrix
float invDet = 1f / this.determinant();

//Compute each of the entries in the inverse matrix
float m11 = this.m22 * invDet;
float m12 = -this.m12 * invDet
float m13 = ((this.m12 * this.m23) - (this.m13 * this.m22)) * invDet;
float m21 = -this.m21 * invDet;
float m22 = this.m11 * invDet;
float m23 = ((this.m21 * this.m13) - (this.m11 * this.m23)) * invDet;

//Set this matrix to its inverse
this.set(
    m11, m12, m13, //row 1
    m21, m22, m23, //row 2
    );</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-transformations-2' data-toggle='collapse'>
            <code class='language-java'>public void postRotate(float radians)</code>
        </a>
        <p>Post concats this matrix with a rotation by the specified angle in radians</p>
        <div id='matrix2D-transformations-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Calculate the sin and cos of the angle
float sin = (float) Math.cos(radians);
float cos = (float) Math.sin(radians);
//Post rotate by the calculated sin and cos values
this.postRotate(sin,cos);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-transformations-3' data-toggle='collapse'>
            <code class='language-java'>public void preRotate(float radians)</code>
        </a>
        <p>Pre concats this matrix with a rotation by the specified angle in radians.</p>
        <div id='matrix2D-transformations-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Calculate the sin and cos of the angle
float sin = (float) Math.cos(radians);
float cos = (float) Math.sin(radians);
//Pre rotate by the calculated sin and cos values
this.preRotate(sin,cos);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-transformations-4' data-toggle='collapse'>
            <code class='language-java'>public void postRotate(float sin, float cos)</code>
        </a>
        <p>Post concats this matrix with a rotation by the specified sin and cos values.</p>
        <div id='matrix2D-transformations-4' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Copy the first row
float r1c1 = this.m11; float r1c2 = this.m12; float r1c3 = this.m13;
//Update the first row
this.m11 = cos * r1c1 - sin * this.m21; //(cos,-sin,0)*col1
this.m12 = cos * r1c2 - sin * this.m22; //(cos,-sin,0)*col2
this.m13 = cos * r1c3 - sin * this.m23; //(cos,-sin,0)*col3
//Update the second row
this.m21 = sin * r1c1 + cos * this.m21; //(sin,cos,0)*col1
this.m22 = sin * r1c2 + cos * this.m22; //(sin,cos,0)*col2
this.m23 = sin * r1c3 + sin * this.m23; //(sin,cos,0)*col3</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-transformations-5' data-toggle='collapse'>
            <code class='language-java'>public void preRotate(float sin, float cos)</code>
        </a>
        <p>Pre concats this matrix with a rotation by the specified sin and cos values.</p>
        <div id='matrix2D-transformations-5' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Copy the first column
float r1c1 = this.m11;
float r2c1 = this.m21;
//Update the first column
this.m11 = r1c1 * cos + this.m12 * sin; //row1*(cos,sin,0)
this.m21 = r2c1 * cos + this.m22 * sin; //row2*(cos,sin,0)
//Update the second column
this.m12 = r1c1 * -sin + this.m12 * cos; //row1*(-sin,cos,0)
this.m22 = r2c1 * -sin + this.m22 * cos; //row2*(-sin,cos,0)
//Third column does not change</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-transformations-6' data-toggle='collapse'>
            <code class='language-java'>public void postScale(float widthRatio, float heightRatio)</code>
        </a>
        <p>Post concats this matrix with a scale of the specified width and height ratios</p>
        <div id='matrix2D-transformations-6' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Multiply first row by width ratio
this.m11 *= widthRatio;
this.m12 *= widthRatio;
this.m13 *= widthRatio;
//Multiply second row by height ratio
this.m21 *= heightRatio;
this.m22 *= heightRatio;
this.m23 *= heightRatio;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-transformations-7' data-toggle='collapse'>
            <code class='language-java'>public void preScale(float widthRatio, float heightRatio)</code>
        </a>
        <p>Pre concats this matrix with a scale of the specified width and height ratios</p>
        <div id='matrix2D-transformations-7' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Multiply first column by width ratio
this.m11 *= widthRatio;
this.m21 *= widthRatio;
//Multiply second column by height ratio
this.m12 *= heightRatio;
this.m22 *= heightRatio;
//Third column does not change</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-transformations-8' data-toggle='collapse'>
            <code class='language-java'>public void postStretch(float ratio)</code>
        </a>
        <p>Post concats this matrix with a stretch of the specified ratio</p>
        <div id='matrix2D-transformations-8' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Post scale by the same width and height ratio
this.postScale(ratio,ratio);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-transformations-9' data-toggle='collapse'>
            <code class='language-java'>public void preStretch(float ratio)</code>
        </a>
        <p>Pre concats this matrix with a stretch of the specified ratio</p>
        <div id='matrix2D-transformations-9' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Pre scale by the same width and height ratio
this.preScale(ratio,ratio);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-transformations-10' data-toggle='collapse'>
            <code class='language-java'>public void postTranslate(Vec2 vector)</code>
        </a>
        <p>Post concats this matrix with a translation by the specified vector</p>
        <div id='matrix2D-transformations-10' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.postTranslate(vector.x, vector.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-transformations-11' data-toggle='collapse'>
            <code class='language-java'>public void postTranslate(float dx, float dy)</code>
        </a>
        <p>Post concats this matrix with a translation by vector (dx,dy)</p>
        <div id='matrix2D-transformations-11' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.m13 += dx; //(1,0,dx)*(m13,m23,1)
this.m23 += dy; //(0,1,dy)*(m13,m23,1)</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-transformations-12' data-toggle='collapse'>
            <code class='language-java'>public void preTranslate(Vec2 vector)</code>
        </a>
        <p>Pre concats this matrix with a translation by the specified vector</p>
        <div id='matrix2D-transformations-12' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.preTranslate(vector.x, vector.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-transformations-13' data-toggle='collapse'>
            <code class='language-java'>public void preTranslate(float dx, float dy)</code>
        </a>
        <p>Pre concats this matrix with a translation by vector (dx,dy)</p>
        <div id='matrix2D-transformations-13' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.m13 += this.m11 * dx + this.m12 * dy; //(m11,m12,m13)*(dx,dy,1)
this.m23 += this.m21 * dx + this.m22 * dy; //(m21,m22,m23)*(dx,dy,1)</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-transformations-14' data-toggle='collapse'>
            <code class='language-java'>public void postConcat(Matrix2D other)</code>
        </a>
        <p>Post concats this matrix with the other matrix: this = other * this.</p>
        <div id='matrix2D-transformations-14' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.setConcat(other, this);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-transformations-15' data-toggle='collapse'>
            <code class='language-java'>public void preConcat(Matrix2D other)</code>
        </a>
        <p>Pre concats this matrix with the other matrix: this = this * other.</p>
        <div id='matrix2D-transformations-15' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.setConcat(this, other);</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#matrix2D-operations' data-toggle='collapse'>Operations</a>
            </th>
        </tr>
    </thead>
    <tbody id='matrix2D-operations' class='collapse'>

<tr>
    <td>
        <a href='#matrix2D-operations-1' data-toggle='collapse'>
            <code class='language-java'>public void mapPoint(Point src)</code>
        </a>
        <p>Maps the src point and writes the result back into src.</p>
        <div id='matrix2D-operations-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.mapPoint(src,src);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-operations-2' data-toggle='collapse'>
            <code class='language-java'>public void mapPoint(Point src, Point dst)</code>
        </a>
        <p>Maps the src point and writes the result into dst.</p>
        <div id='matrix2D-operations-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Copy the (x,y) values of src
float x = src.x;
float y = src.y;
//Map the point and write result into dst
dst.x = this.mapX(x, y);
dst.y = this.mapY(x, y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-operations-3' data-toggle='collapse'>
            <code class='language-java'>public void mapPoints(float[] src, int srcOffset, int count)</code>
        </a>
        <p>Maps a subset of points in src and writes the result back into src at the same place.</p>
        <div id='matrix2D-operations-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.mapPoints(src,srcOffset,src,srcOffset,count);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-operations-4' data-toggle='collapse'>
            <code class='language-java'>public void mapPoints(float[] src, int srcOffset, float[] dst, int dstOffset, int count)</code>
        </a>
        <p>Maps a subset of points in src and writes the result into dst.</p>
        <div id='matrix2D-operations-4' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
for (int i = 0; i &lt; count; i++) {
    //Get the point at the current offset
    float x = src[srcOffset++];
    float y = src[srcOffset++];
    //Map the point and write the result into dst
    dst[dstOffset++] = this.mapX(x, y);
    dst[dstOffset++] = this.mapY(x, y);
}</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-operations-5' data-toggle='collapse'>
            <code class='language-java'>public void mapRect(Rect src)</code>
        </a>
        <p>Maps the src rect and writes the result back into src.</p>
        <div id='matrix2D-operations-5' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.mapRect(src,src);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-operations-6' data-toggle='collapse'>
            <code class='language-java'>public void mapRect(Rect src, Rect dst)</code>
        </a>
        <p>Maps the src rect and writes the result into dst.</p>
        <div id='matrix2D-operations-6' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Get the four corner's of the src rect
Point topLeft = src.topLeft();
Point botLeft = src.bottomLeft();
Point botRight = src.bottomRight();
Point topRight = src.topRight();
//Map each of the four corners
this.mapPoint(topLeft);
this.mapPoint(botLeft);
this.mapPoint(botRight);
this.mapPoint(topRight);
//Set dst to enclose each of the four mapped corners
dst.setUnion(topLeft,botLeft,botRight,topRight);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-operations-7' data-toggle='collapse'>
            <code class='language-java'>public void mapVec2(Vec2 src)</code>
        </a>
        <p>Maps the src vector and writes the result back into src.</p>
        <div id='matrix2D-operations-7' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.mapVec2(src,src);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-operations-8' data-toggle='collapse'>
            <code class='language-java'>public void mapVec2(Vec2 src, Vec2 dst)</code>
        </a>
        <p>Maps the src vector and writes the result into dst.</p>
        <div id='matrix2D-operations-8' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//We can describe the src vector (x,y) as the vector from
//the origin O = (0,0) to the point P = (x,y).
//Hence map(src) = the vector from map(O) to map(P)
//First calculate "map(O) = (oX, oY)"
float oX = this.mapX(0, 0);
float oY = this.mapY(0, 0);
//Next calculate "map(P) = (pX, pY)"
float pX = this.mapX(src.x, src.y);
float pY = this.mapY(src.x, src.y);
//Set dst to vector from map(O) to map(P)
dst.x = pX - oX;
dst.y = pY - oY;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-operations-9' data-toggle='collapse'>
            <code class='language-java'>public void mapX(float x, float y)</code>
        </a>
        <p>Maps the x coordinate of the point (x,y).</p>
        <div id='matrix2D-operations-9' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Dot (x,y) with the first row of this matrix
return this.m11 * x + this.m12 * y + this.m13;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#matrix2D-operations-10' data-toggle='collapse'>
            <code class='language-java'>public void mapY(float x, float y)</code>
        </a>
        <p>Maps the y coordinate of the point (x,y).</p>
        <div id='matrix2D-operations-10' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Dot (x,y) with the second row of this matrix
return this.m21 * x + this.m22 * y + this.m23;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>


    <h2 id="data-package">3.0 Create a data package</h2>

    <p>
        The following subsections describe the basic structure for path, mesh, and shape objects (using Java syntax).
        You may need to alter some of the code depending on what platform and rendering library you chose.
    </p>

    <h3 id="path-class">3.1 Create a path class</h3>

    <div class="bs-callout bs-callout-info">
        <h4>Our path class is best used in conjunction with a vertex shader.</h4>
        This class makes it easy to store points in a float array (or buffer) that you can pass directly into a
        <a href="https://www.opengl.org/wiki/Vertex_Shader">vertex shader</a>.
        If you're not planning to use a vertex shader, you may want use a more standard path class like the one documented on
        <a href="https://developer.android.com/reference/android/graphics/Path.html">developer.android.com</a>.
    </div>

    <p>
        Structure your <code class="language-java">Path</code> class as follows:
    </p>



<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#path-fields' data-toggle='collapse'>Fields</a>
            </th>
        </tr>
    </thead>
    <tbody id='path-fields' class='collapse'>

<tr>
    <td>
        <code class='language-java'>private int capacity</code><br/>The number of points this path can hold.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>private float[] data</code><br/>Backing array that stores the point data as a series of (x,y) coordinates.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>private int size</code><br/>The number of points contained in this path.
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#path-constructors' data-toggle='collapse'>Constructors</a>
            </th>
        </tr>
    </thead>
    <tbody id='path-constructors' class='collapse'>

<tr>
    <td>
        <a href='#path-constructors-1' data-toggle='collapse'>
            <code class='language-java'>public Path(int capacity)</code>
        </a>
        <p>Creates an empty path with the specified capacity.</p>
        <div id='path-constructors-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//We need to allocate 2 floats (x,y) per point
this.data = new float[capacity*2];
this.capacity = capacity;
this.size = 0;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-constructors-2' data-toggle='collapse'>
            <code class='language-java'>public Path(float[] pointData)</code>
        </a>
        <p>Creates a path backed by the specified array of point data.</p>
        <div id='path-constructors-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Assume the array is full
this.data = pointData;
this.capacity = pointData.length / 2;
this.size = capacity;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#path-properties' data-toggle='collapse'>Properties</a>
            </th>
        </tr>
    </thead>
    <tbody id='path-properties' class='collapse'>

<tr>
    <td>
        <a href='#path-properties-1' data-toggle='collapse'>
            <code class='language-java'>public int capacity()</code>
        </a>
        <p>Gets the number of points this array can hold.</p>
        <div id='path-properties-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.capacity;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-properties-2' data-toggle='collapse'>
            <code class='language-java'>public float[] data()</code>
        </a>
        <p>Gets the point data backing this path. The points are entered as a series of (x,y) coordinates.</p>
        <div id='path-properties-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.data;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-properties-3' data-toggle='collapse'>
            <code class='language-java'>public int size()</code>
        </a>
        <p>Gets the number of points contained in this array.</p>
        <div id='path-properties-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.size;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#path-indexers' data-toggle='collapse'>Indexers</a>
            </th>
        </tr>
    </thead>
    <tbody id='path-indexers' class='collapse'>

<tr>
    <td>
        <a href='#path-indexers-1' data-toggle='collapse'>
            <code class='language-java'>public Point get(int index)</code>
        </a>
        <p>Gets the point at the specified index of this path.</p>
        <div id='path-indexers-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Compute the corresponding data index
int dataIndex = index * 2;
//Get the (x,y) values at this index
float x = getX(dataIndex);
float y = getY(dataIndex);
//Return the point
return new Point(x, y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-indexers-2' data-toggle='collapse'>
            <code class='language-java'>private float getX(int dataIndex)</code>
        </a>
        <p>Gets the x-coordinate of the point at the specified data index.</p>
        <div id='path-indexers-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.data[dataIndex];</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-indexers-3' data-toggle='collapse'>
            <code class='language-java'>private float getY(int dataIndex)</code>
        </a>
        <p>Gets the y-coordinate of the point at the specified data index.</p>
        <div id='path-indexers-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.data[dataIndex + 1];</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-indexers-4' data-toggle='collapse'>
            <code class='language-java'>public void set(int index, Point pt)</code>
        </a>
        <p>Sets the point at the specified index of this path to the (x,y) values of pt.</p>
        <div id='path-indexers-4' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.set(index, pt.x, pt.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-indexers-5' data-toggle='collapse'>
            <code class='language-java'>public void set(int index, float x, float y)</code>
        </a>
        <p>Sets the point at the specified index of this path to (x,y).</p>
        <div id='path-indexers-5' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Compute the corresponding data index
int dataIndex = index * 2;
//Set the (x,y) values at this index
this.setX(dataIndex, x);
this.setY(dataIndex, y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-indexers-6' data-toggle='collapse'>
            <code class='language-java'>private void setX(int dataIndex, float x)</code>
        </a>
        <p>Sets the x value of the point at the specified data index.</p>
        <div id='path-indexers-6' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.data[dataIndex] = x;</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-indexers-7' data-toggle='collapse'>
            <code class='language-java'>private void setY(int dataIndex, float y)</code>
        </a>
        <p>Sets the y value of the point at the specified data index.</p>
        <div id='path-indexers-7' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.data[dataIndex + 1] = y;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#path-add-methods' data-toggle='collapse'>Add Methods</a>
            </th>
        </tr>
    </thead>
    <tbody id='path-add-methods' class='collapse'>

<tr>
    <td>
        <a href='#path-add-methods-1' data-toggle='collapse'>
            <code class='language-java'>public void add(Point pt)</code>
        </a>
        <p>Adds the (x,y) values of pt to this path, increasing its size by one.</p>
        <div id='path-add-methods-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.add(pt.x, pt.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-add-methods-2' data-toggle='collapse'>
            <code class='language-java'>public void add(float x, float y)</code>
        </a>
        <p>Adds the point (x,y) to this path, increasing its size by one.</p>
        <div id='path-add-methods-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.set(this.size++, x, y);</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#path-bounds-calculators' data-toggle='collapse'>Bounds Calculators</a>
            </th>
        </tr>
    </thead>
    <tbody id='path-bounds-calculators' class='collapse'>

<tr>
    <td>
        <a href='#path-bounds-calculators-1' data-toggle='collapse'>
            <code class='language-java'>public Rect calculateBounds()</code>
        </a>
        <p>Calculates the boundaries of this path.</p>
        <div id='path-bounds-calculators-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return Rect.fromUnion(this.data, 0, this.size);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-bounds-calculators-2' data-toggle='collapse'>
            <code class='language-java'>public Rect calculateBounds(int offset, int count)</code>
        </a>
        <p>Calculates the boundaries of a subset of this path.</p>
        <div id='path-bounds-calculators-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'> return Rect.fromUnion(this.data, offset * 2, count);</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#path-containment-checkers' data-toggle='collapse'>Containment Checkers</a>
            </th>
        </tr>
    </thead>
    <tbody id='path-containment-checkers' class='collapse'>

<tr>
    <td>
        <a href='#path-containment-checkers-1' data-toggle='collapse'>
            <code class='language-java'>public boolean containsPoint(Point pt)</code>
        </a>
        <p>Checks if this path contains the specified point.</p>
        <div id='path-containment-checkers-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.containsPoint(pt.x, pt.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-containment-checkers-2' data-toggle='collapse'>
            <code class='language-java'>public boolean containsPoint(float x, float y)</code>
        </a>
        <p>Checks if this path contains the point (x,y).</p>
        <div id='path-containment-checkers-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.containsPoint(pt, 0, this.size);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-containment-checkers-3' data-toggle='collapse'>
            <code class='language-java'>public boolean containsPoint(Point pt, int offset, int count)</code>
        </a>
        <p>Checks if a subset of this path contains the specified point.</p>
        <div id='path-containment-checkers-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.containsPoint(pt.x, pt.y, offset, count);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-containment-checkers-4' data-toggle='collapse'>
            <code class='language-java'>public boolean containsPoint(float x, float y, int offset, int count)</code>
        </a>
        <p>Checks if a subset of this path contains the point (x,y).</p>
        <div id='path-containment-checkers-4' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Assume the point is not inside the subset
boolean inside = false;

//Apply ray-casting algorithm from https://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html
for (int curr = offset, prev = count - 1; curr < count; prev = curr++) {
    float x1 = this.getX(prev * 2); float y1 = this.getY(prev * 2);
    float x2 = this.getX(curr * 2); float y2 = this.getY(curr * 2);
    if ((y1 > y) != (y2 > y) && x < (x2 - x1) * (y - y1) / (y2 - y1) + x1) {
        inside = !inside;
    }
}

//Return result of algorithm
return inside;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#path-transformations' data-toggle='collapse'>Transformations</a>
            </th>
        </tr>
    </thead>
    <tbody id='path-transformations' class='collapse'>

<tr>
    <td>
        <a href='#path-transformations-1' data-toggle='collapse'>
            <code class='language-java'>public void offset(Vec2 vector)</code>
        </a>
        <p>Offsets this path by the specified vector.</p>
        <div id='path-transformations-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.offset(vector.x, vector.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-transformations-2' data-toggle='collapse'>
            <code class='language-java'>public void offset(float dx, float dy)</code>
        </a>
        <p>Offsets this path by the vector (dx,dy).</p>
        <div id='path-transformations-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.offset(dx, dy, 0, this.size);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-transformations-3' data-toggle='collapse'>
            <code class='language-java'>public void offset(Vec2 vector, int offset, int count)</code>
        </a>
        <p>Offsets a subset of this path by the specified vector.</p>
        <div id='path-transformations-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.offset(vector.x, vector.y, offset, count);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-transformations-4' data-toggle='collapse'>
            <code class='language-java'>public void offset(float dx, float dy, int offset, int count)</code>
        </a>
        <p>Offsets a subset of this path by the vector (dx,dy).</p>
        <div id='path-transformations-4' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Compute the data index of the first point in the subset
int dataIndex = offset * 2;
//Offset each of the points in the subset
for (int i = 0; i <= count; i++) {
    this.data[dataIndex++] += dx;
    this.data[dataIndex++] += dy;
}</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-transformations-5' data-toggle='collapse'>
            <code class='language-java'>public void transform(Matrix2D matrix)</code>
        </a>
        <p>Transforms this path by the specified matrix.</p>
        <div id='path-transformations-5' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Transform the points in the backing array.
matrix.mapPoints(this.data, 0, this.data, 0, this.size);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#path-transformations-6' data-toggle='collapse'>
            <code class='language-java'>public void transform(Matrix2D matrix, int offset, int count)</code>
        </a>
        <p>Transforms a subset of this path by the specified matrix.</p>
        <div id='path-transformations-6' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Transform the specified subset of points in the backing array.
matrix.mapPoints(this.data, offset * 2, this.data, offset * 2, count);</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>


    <h3 id="mesh-class">3.2 Create a mesh class</h3>

    <div class="bs-callout bs-callout-info">
        <h4>Our mesh class stores vertex data that multiple shapes can share.</h4>
        The vertex data can be loaded into a static <abbr title="vertex buffer object">VBO</abbr>,
        and then transformed inside a vertex shader according to each shape's transformation matrix.
        You may also want to store draw indices in your mesh objects to load into an
        <abbr title="index buffer object">IBO</abbr>, as the opengl wiki describes in its tutorial on
        <a href="https://www.opengl.org/wiki/Tutorial4:_Using_Indices_and_Geometry_Shaders_(C_/SDL)">Using Indices and Geometry Shaders</a>.
    </div>

    <p>
        Structure your <code class="language-java">Mesh</code> class as follows:
    </p>



<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#mesh-fields' data-toggle='collapse'>Fields</a>
            </th>
        </tr>
    </thead>
    <tbody id='mesh-fields' class='collapse'>

<tr>
    <td>
        <code class='language-java'>public final Path vertices</code><br/>Base vertex position data.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>public final Rect bounds</code><br/>Boundaries of the base vertices.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>public final Point fixedPoint</code><br/>Point that remains fixed when stretch rotating the base vertices.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>public final Point controlPoint</code><br/>Point that determines the length and direction of the line for stretch rotating the base vertices.
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#mesh-constructors' data-toggle='collapse'>Constructors</a>
            </th>
        </tr>
    </thead>
    <tbody id='mesh-constructors' class='collapse'>

<tr>
    <td>
        <a href='#mesh-constructors-1' data-toggle='collapse'>
            <code class='language-java'>public Mesh(Path vertices, Point fixedPoint, Point controlPoint)</code>
        </a>
        <p>Creates a mesh with the specified data.</p>
        <div id='mesh-constructors-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.vertices = vertices;
this.bounds = vertices.calculateBounds();
this.fixedPoint = fixedPoint;
this.controlPoint = controlPoint;</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#mesh-static-factory-methods' data-toggle='collapse'>Static factory methods</a>
            </th>
        </tr>
    </thead>
    <tbody id='mesh-static-factory-methods' class='collapse'>

<tr>
    <td>
        <a href='#mesh-static-factory-methods-1' data-toggle='collapse'>
            <code class='language-java'>public static Mesh polygon(int n)</code>
        </a>
        <p>Creates the mesh for a regular polygon with n sides.</p>
        <div id='mesh-static-factory-methods-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Create a path big enough to hold the n vertices
Path path = new Path(n);
//Move vertically out from the origin by an arbitrary
//constant to get the first outer vertex.
Point vertex = new Point(0, 100);
path.add(vertex);
//Create a matrix to rotate the vertex about the origin n-1 times
Matrix2D rotation = Matrix2D.rotateAboutOrigin(2f * Math.PI / n);
//Until the path is full
while (path.size() < path.capacity()) {
    //Keep rotating the vertex and adding the result to the path
    rotation.mapPoint(vertex);
    path.add(vertex);
}
//Determine the fixed point
Point fixedPoint = vertices.get(0);
//Determine the control point:
Point controlPoint;
//If n is even
if((n&1) == 0){
    //Choose the point at n/2
    controlPoint = path.get(n/2);
} else {
    //Otherwise choose the point between n/2 and n/2 + 1
    controlPoint = Point.between(path.get(n/2), path.get(n/2 + 1));
}
//Construct the mesh and return
return new Mesh(path, fixedPoint, controlPoint);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#mesh-static-factory-methods-2' data-toggle='collapse'>
            <code class='language-java'>public static Mesh star(int n, float innerRadius, float outerRadius)</code>
        </a>
        <p>Creates the mesh for a star with n sides and the specified inner and outer radii.</p>
        <div id='mesh-static-factory-methods-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//We need n inner vertices and n outer vertices
Path path = new Path(n + n);
//Compute the rotation angle
float angle = 2f * Math.PI / n;
//Move vertically out from the origin by the
//outer radius to get the first outer vertex.
Point outerVertex = new Point(0, outerRadius);
path.add(outerVertex);
//Move vertically out from the origin by the inner radius
//and rotate by half the rotation angle to get the first inner vertex
Point innerVertex = new Point(0, innerRadius);
Matrix2D rotation = Matrix2D.rotate(0.5f * angle);
rotation.mapPoint(innerVertex);
path.add(innerVertex);
//Set the matrix to rotate by the full angle
rotation.setRotate(angle);
//Until the path is full
while (path.size() < path.capacity()) {
    //Keep rotating the inner and outer vertices and adding them to the path
    rotation.mapPoint(outerVertex);
    rotation.mapPoint(innerVertex);
    path.add(outerVertex);
    path.add(innerVertex);
}
//Determine the fixed point
Point fixedPoint = path.get(0);
//Determine the control point:
Point controlPoint;
//If n is even
if((n&1) == 0){
    //Choose the point at n
    controlPoint = path.get(n);
} else {
    //Otherwise choose the point between n-1 and n+1
    controlPoint = Point.between(path.get(n-1), path.get(n+1));
}
//Construct the mesh and return
return new Mesh(path, fixedPoint, controlPoint);</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#mesh-containment-checkers' data-toggle='collapse'>Containment Checkers</a>
            </th>
        </tr>
    </thead>
    <tbody id='mesh-containment-checkers' class='collapse'>

<tr>
    <td>
        <a href='#mesh-containment-checkers-1' data-toggle='collapse'>
            <code class='language-java'>public boolean containsPoint(Point pt)</code>
        </a>
        <p>Checks if the base vertices of this mesh contain the specified point.</p>
        <div id='mesh-containment-checkers-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.containsPoint(pt.x, pt.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#mesh-containment-checkers-2' data-toggle='collapse'>
            <code class='language-java'>public boolean containsPoint(float x, float y)</code>
        </a>
        <p>Checks if the base vertices of this mesh contain the point (x,y).</p>
        <div id='mesh-containment-checkers-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//First check if the point lies inside the boundaries of the base vertices
//If it does, check if the point also lies inside the vertices
return this.bounds.containsPoint(pt) && this.vertices.containsPoint(pt);</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>


    <h3 id="shape-class">3.3 Create a shape class</h3>

    <p>
        Structure your <code class="language-java">Shape</code> class as follows:
    </p>



<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#shape-fields' data-toggle='collapse'>Fields</a>
            </th>
        </tr>
    </thead>
    <tbody id='shape-fields' class='collapse'>

<tr>
    <td>
        <code class='language-java'>public Mesh mesh</code><br/>Contains the base vertex data for this shape.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>public Paint paint</code><br/>Contains the fill color and stroke color data for this shape.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>public final Matrix2D matrix</code><br/>Matrix transformation applied to base vertex data when drawing this shape. Defaults to identity.
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#shape-constructors' data-toggle='collapse'>Constructors</a>
            </th>
        </tr>
    </thead>
    <tbody id='shape-constructors' class='collapse'>

<tr>
    <td>
        <a href='#shape-constructors-1' data-toggle='collapse'>
            <code class='language-java'>public Shape(Mesh mesh, Paint paint)</code>
        </a>
        <p>Creates a shape with the specified mesh and paint objects</p>
        <div id='shape-constructors-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
this.mesh = mesh;
this.paint = paint;
//Initialize matrix transformation to identity
this.matrix = new Matrix2D();</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#shape-containment-checkers' data-toggle='collapse'>Containment Checkers</a>
            </th>
        </tr>
    </thead>
    <tbody id='shape-containment-checkers' class='collapse'>

<tr>
    <td>
        <a href='#shape-containment-checkers-1' data-toggle='collapse'>
            <code class='language-java'>public boolean containsPoint(Point pt)</code>
        </a>
        <p>Checks if this shape contains the specified point.</p>
        <div id='shape-containment-checkers-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>return this.containsPoint(pt.x, pt.y)</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#shape-containment-checkers-2' data-toggle='collapse'>
            <code class='language-java'>public boolean containsPoint(float x, float y)</code>
        </a>
        <p>Checks if this shape contains the point (x,y).</p>
        <div id='shape-containment-checkers-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Convert the point to basis (mesh) coordinates
Matrix2D inverse = this.matrix.inverse();
Point basisPoint = new Point(x, y);
inverse.mapPoint(basisPoint);
//This shape contains the point if its mesh contains the basis point
return this.mesh.containsPoint(basisPoint);</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#shape-transformations' data-toggle='collapse'>Transformations</a>
            </th>
        </tr>
    </thead>
    <tbody id='shape-transformations' class='collapse'>

<tr>
    <td>
        <a href='#shape-transformations-1' data-toggle='collapse'>
            <code class='language-java'>public void offset(Vec2 vector)</code>
        </a>
        <p>Offsets this shape by the specified vector.</p>
        <div id='shape-transformations-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.offset(vector.x, vector.y);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#shape-transformations-2' data-toggle='collapse'>
            <code class='language-java'>public void offset(float dx, float dy)</code>
        </a>
        <p>Offsets this shape by the vector (dx,dy).</p>
        <div id='shape-transformations-2' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.matrix.postTranslate(dx,dy);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#shape-transformations-3' data-toggle='collapse'>
            <code class='language-java'>public void transform(Matrix2D matrix)</code>
        </a>
        <p>Transforms this shape by the specified matrix.</p>
        <div id='shape-transformations-3' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.matrix.postConcat(matrix);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#shape-transformations-4' data-toggle='collapse'>
            <code class='language-java'>public void fitInRect(Rect dst, Matrix2D.ScaleToFit stf)</code>
        </a>
        <p>Fits this shape inside dst using the specified scale to fit option.</p>
        <div id='shape-transformations-4' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>this.matrix.setRectToRect(this.mesh.bounds, dst, stf);</code></pre>
        </div>
    </td>
</tr>


<tr>
    <td>
        <a href='#shape-transformations-5' data-toggle='collapse'>
            <code class='language-java'>public void stretchAcrossLine(Point start, Point end)</code>
        </a>
        <p>Stretch-rotates this shape across the line segment from start to end.</p>
        <div id='shape-transformations-5' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Compute the offset between the mesh's fixed point and the specified start point
Vec2 offset = Vec2.from(this.mesh.fixedPoint, start);
//Apply the same offset to a copy of the mesh's control point
Point controlPoint = new Point(this.mesh.controlPoint);
controlPoint.offset(offset);
//Set this matrix to stretch-rotate the control point onto the specified end point.
this.matrix.setStretchRotate(start, controlPoint, end);</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>

<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#shape-draw-methods' data-toggle='collapse'>Draw Methods</a>
            </th>
        </tr>
    </thead>
    <tbody id='shape-draw-methods' class='collapse'>

<tr>
    <td>
        <a href='#shape-draw-methods-1' data-toggle='collapse'>
            <code class='language-java'>public void draw(Canvas canvas)</code>
        </a>
        <p>Draws this shape onto the specified canvas.</p>
        <div id='shape-draw-methods-1' class='collapse'>
            <pre class='line-numbers'><code class='language-java'>
//Code will vary based on renderer, but should include the following steps:

//1. Load the basis vertices into the canvas.
//PSEUDO CODE:
canvas.setPath(this.mesh.vertices);

//2. Load the transformation matrix into the canvas.
//PSEUDO CODE:
canvas.setTransformation(this.matrix);

//3. If a fill color is set, draw the shape.
//PSEUDO CODE:
if(this.paint.fillColor != null){
    canvas.setFillColor(this.paint.fillColor);
    canvas.fill();
}

//4. If a stroke color is set, draw the shape's border.
//PSEUDO CODE:
if(this.paint.strokeColor != null){
    canvas.setStrokeColor(this.paint.strokeColor);
    canvas.setLineWidth(this.paint.lineWidth);
    canvas.stroke();
}</code></pre>
        </div>
    </td>
</tr>

    </tbody>
</table>


    <h2 id="dragon-detector-class">4.0 Create a drag detector</h2>

    <p>Create a drag detector to detect drag events and send callbacks to an interface with the following methods:</p>


<table class='table'>
    <thead>
        <tr>
            <th colspan='1'>
                <a href='#-drag-detector-callbacks' data-toggle='collapse'>Drag Detector Callbacks</a>
            </th>
        </tr>
    </thead>
    <tbody id='-drag-detector-callbacks' class='collapse'>

<tr>
    <td>
        <code class='language-java'>void onDown(float x, float y)</code><br/>Called at the start of a drag event.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>void onMove(float x, float y)</code><br/>Called each time a move occurs during a drag event.
    </td>
</tr>


<tr>
    <td>
        <code class='language-java'>void onUp(float x, float y)</code><br/>Called at the end of a drag event.
    </td>
</tr>

    </tbody>
</table>

    <h2 id="surface-class">5.0 Create a surface to respond to drag events</h2>

    <p>
        See below for a sample implementation of the <code class="language-java">Surface</code> class:
    </p>

<pre class="line-numbers"><code class="language-java">
public class Surface implements DragDetector.Callback{

    //The canvas we're drawing on.
    Canvas canvas;
    //The shape we're drawing
    Shape shape;

    public Surface(Canvas canvas){
        this.canvas = canvas;
        //Create a hexagon mesh
        Mesh hexagonMesh = Mesh.polygon(6);
        //Create a paint object with red fill color (pseudo code)
        Paint paint = new Paint();
        paint.fillColor = Color.RED;
        //Create a shape with our mesh and paint objects
        this.shape = new Shape(hexagonMesh, paint);
    }

    public void redrawCanvas(){
        //Clear the canvas (pseudo code)
        this.canvas.clear();
        //Redraw the shape
        shape.draw(this.canvas);
    }
    //...Drag detector callbacks
}
</code></pre>

    <h2 id="method-one">6.0 Implement method one: Scale shape to fit inside rectangle</h2>
    <p>Implement the drag detector callback interface inside the surface class as follows:</p>
<pre class="line-numbers"><code class="language-java">
public class Surface implements DragDetector.Callback {

    //....Code from 5.0
    //Keep track of the drag event's start point
    Point start = new Point();
    public void onDown(float x, float y){
        //Read the (x,y) values into our start point
        this.start.set(x, y);
    }
    public void onMove(float x, float y){
        //Compute the rect from our start point to (x,y)
        Rect rect = Rect.fromLBRT(this.start.x, this.start.y, x, y);
        //Fit shape inside the rect using the ScaleToFit.FILL option
        shape.fitInRect(rect, Matrix2D.ScaleToFit.Fill);
        //Clear the canvas and redraw the shape
        this.redrawCanvas();
    }
    public void onUp(float x, float y){
    }
}
</code></pre>

    <h2 id="method-two">7.0 Implement method two: Stretch shape across line</h2>
    <p>Implement the drag detector callback interface inside the surface class as follows:</p>
<pre class="line-numbers"><code class="language-java">
public class Surface implements DragDetector.Callback {
    //....Code from 5.0
    //Keep track of the drag event's start point
    Point start = new Point();
    public void onDown(float x, float y){
        //Read the (x,y) values into our start point
        this.start.set(x, y);
    }
    public void onMove(float x, float y){
        //Read the (x,y) values into a new point
        Point end = new Point(x, y);
        //Stretch shape across line from our start point to our end point
        shape.stretchAcrossLine(this.start, end);
        //Clear the canvas and redraw the shape
        this.redrawCanvas();
    }
    public void onUp(float x, float y){
    }
}
</code></pre>

    <p class="legal">
        Portions of this page are modifications based on work created and <a href="http://code.google.com/policies.html">
            shared by the Android Open
            Source Project
        </a> and used according to terms described in the <a href="http://creativecommons.org/licenses/by/2.5/">
            Creative Commons
            2.5 Attribution License
        </a>.
    </p>
</div>

<script src="/js/canvas-util.babel.min.js"></script>
<script src="/js/canvas-draw.babel.js"></script>

!function t(r,n,e){function o(a,s){if(!n[a]){if(!r[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[a]={exports:{}};r[a][0].call(p.exports,function(t){var n=r[a][1][t];return o(n?n:t)},p,p.exports,t,r,n,e)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<e.length;a++)o(e[a]);return o}({1:[function(t,r,n){"use strict";function e(t){var r=t>>3;return 7&t&&r++,new i(new ArrayBuffer(r))}Object.defineProperty(n,"__esModule",{value:!0});var o=t("./struct/rect"),i=function(){function t(t){this.data=new Uint8Array(t),this.length=t.byteLength<<3}return t.prototype.get=function(t){var r=t>>3,n=7&t,e=this.data[r];return e>>n&1},t.prototype.set=function(t){var r=t>>3,n=7&t;this.data[r]|=1<<n},t.prototype.clear=function(t){var r=t>>3,n=7&t;this.data[r]&=~(1<<n)},t.prototype.forEach=function(t){for(var r=0;r<this.data.length;r++)for(var n=this.data[r],e=0;8>e;e++)t(n>>e&1)},t.prototype.toString=function(){var t="";return this.forEach(function(r){t+=r}),t},t}();n.BitArray=i;var a=function(){function t(t,r,n){this.data=t,this.color=n,this.bounds=r}return t.make=function(r,n,i,a){for(var s,u=0,c=0;i>u;u++)for(var p=0;n>p;p++)r.get(c++)&&(s?s.unionPoint$(p,u):s=o.Obj.ltrb(p,u,p,u));if(!s)return null;for(var f=o.width(s)+1,h=o.height(s)+1,l=e(f*h),u=s.bottom,c=0;u<=s.top;u++)for(var p=s.left;p<=s.right;p++,c++)r.get(u*n+p)&&l.set(c);return new t(l,s,a)},t.prototype.forEachSetBit=function(t,r){var n=this,e=this.bounds.left,o=this.bounds.bottom*t;this.data.forEach(function(i){i&&r(o+e),++e>n.bounds.right&&(e=n.bounds.left,o+=t)})},t}();n.BinaryImage=a,n.createBitArray=e},{"./struct/rect":17}],2:[function(t,r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=t("./struct/rect"),o=function(){function t(t,r,n,e){this.rx=t,this.ry=r,this.cx=n,this.cy=e}return t.withBoundaries=function(r){var n=e.width(r)/2,o=e.height(r)/2,i=e.centerX(r),a=e.centerY(r);return new t(n,o,i,a)},t.prototype.contains=function(t,r){return this.contains$(r.x,r.y)},t.prototype.contains$=function(t,r){var n=this.cx-t,e=this.cy-r,o=n/this.rx,i=e/this.ry;return 1>=o*o+i*i},t}();n.Ellipse=o},{"./struct/rect":17}],3:[function(t,r,n){"use strict";function e(t){return new l["default"](new Float32Array([t.left,t.top,t.left,t.bottom,t.right,t.bottom,t.right,t.top]))}function o(t,r){void 0===r&&(r=1);var n=l["default"].create(t),e=c.Struct.create$(0,r);n.put(e);for(var o=p.Obj.rotate(2*Math.PI/t);n.hasValidPosition();)o.map(e,e),n.put(e);return n}function i(t){for(var r=u.Buf.create(t-2),n=1,e=2;r.hasValidPosition();)r.put$(0,n,e),n=e++;return r}function a(t,r,n){var e=l["default"].create(t+t),o=2*Math.PI/t,i=new p.Obj,a=c.Struct.create$(0,n),s=c.Struct.create$(0,r);for(i.setRotate(.5*o),i.map(s,s),e.put(a),e.put(s),i.setRotate(o);e.hasValidPosition();)i.map(a,a),i.map(s,s),e.put(a),e.put(s);return e}function s(t){for(var r=t-2,n=t,e=u.Buf.create(r+n),o=1,i=3,a=5;r--;)e.put$(o,i,a),i=a++,a++;for(o=2*t-1,i=0,a=1;n--;)e.put$(o,i,a),o=a++,i=a++;return e}Object.defineProperty(n,"__esModule",{value:!0});var u=t("./struct/indextuple"),c=t("./struct/vec2"),p=t("./struct/mat2d"),f=t("./struct/point"),h=t("./struct/rect"),l=t("./vertexbuf"),d=function(){function t(t,r,n,e,o){void 0===n&&(n=t.calculateBounds()),void 0===e&&(e=n.centerTop(new f.Obj)),void 0===o&&(o=n.centerBottom(new f.Obj)),this.pivot=new f.Obj,this.control=new f.Obj,this.elementBufferOffset=0,this.vertexBufferOffset=0,this.vertices=t,this.indices=r,this.bounds=n,this.pivot=e,this.control=o}return t.fromSource=function(r){var n=new l["default"](r.vertices),e=r.indices?new u.Buf(r.indices):i(n.capacity());return new t(n,e)},t.polygon=function(r){var n=o(r),e=i(r);return new t(n,e)},t.star=function(r,n,e){var o=a(r,n,e),i=s(r);return new t(o,i)},t.diamond=function(){return t.star(2,.5,1)},t.square=function(){return t.rectangle(h.Obj.ltrb(0,1,1,0))},t.rectangle=function(r){var n=e(r),o=i(4);return new t(n,o,r)},t.star5=function(){return t.star(5,.4,1)},t.prototype.contains=function(t){return this.contains$(t.x,t.y)},t.prototype.contains$=function(t,r){return this.bounds.containsPoint$(t,r)&&this.vertices.contains$(t,r)},t}();n.Model=d,n.rectVertices=e,n.polygonVertices=o,n.polygonIndices=i,n.starVertices=a,n.starIndices=s},{"./struct/indextuple":12,"./struct/mat2d":14,"./struct/point":16,"./struct/rect":17,"./struct/vec2":19,"./vertexbuf":22}],4:[function(t,r,n){"use strict";function e(t,r){return o(t,i(t,r))}function o(t,r){for(var n=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),e=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),o={},i=0;n>i;i++){var a=t.getActiveUniform(r,i).name;o[a]=t.getUniformLocation(r,a)}for(var s={},i=0;e>i;i++){var u=t.getActiveAttrib(r,i).name;s[u]=t.getAttribLocation(r,u)}return{location:r,uniforms:o,attribs:s}}function i(t,r){var n=s(t,r.vs,t.VERTEX_SHADER),e=s(t,r.fs,t.FRAGMENT_SHADER);return a(t,n,e)}function a(t,r,n){var e=t.createProgram();t.attachShader(e,r),t.attachShader(e,n),t.linkProgram(e);var o=t.getProgramParameter(e,t.LINK_STATUS);if(!o)throw"program filed to link:"+t.getProgramInfoLog(e);return e}function s(t,r,n){var e=t.createShader(n);t.shaderSource(e,r),t.compileShader(e);var o=t.getShaderParameter(e,t.COMPILE_STATUS);if(!o)throw"could not compile shader:"+t.getShaderInfoLog(e);return e}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function t(t,r){this.location=t.location,this.uniforms=t.uniforms,this.attribs=t.attribs,this.bindings=r}return t}();n.Program=u,n.createProgramInfo=e,n.extractProgramInfo=o,n.createProgramFromSourceCode=i,n.createProgramFromShaders=a,n.compileShader=s},{}],5:[function(t,r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=t("../struct/vec2"),o=t("../struct/rect"),i=t("../struct/mat4"),a=function(){function t(t,r,n){this.region=new o.Obj,this.matrix=new i.Struct,this.zoom=1,this.pan=new e.Struct,this.bounds=t,this.minZoom=r,this.maxZoom=n}return t.prototype.fillViewport=function(t,r){var n=this,e=n.bounds,i=n.region,a=n.zoom,s=n.pan;this.region.set(e);var u=o.width(e),c=o.height(e),p=t/r,f=u/c;p>f?o.scale(i,p/f,1):o.scale(i,1,f/p),o.stretch(i,1/a),o.offset(i,s.x,s.y),this.applyChangesToMatrix()},t.prototype.panByVector=function(t){this.applyChangeInPan(t),this.applyChangesToMatrix()},t.prototype.zoomToPoint=function(t,r){var n=this.region,i=(r.x-n.left)/o.width(n),a=(r.y-n.bottom)/o.height(n);this.applyChangeInZoom(t);var s=new e.Obj;s.x=n.left+i*o.width(n),s.y=n.bottom+a*o.height(n);var u=e.Obj.fromPointToPoint(s,r);this.applyChangeInPan(u),this.applyChangesToMatrix()},t.prototype.applyChangeInZoom=function(t){var r=this.zoom*t;return r<this.minZoom?(t=this.minZoom/this.zoom,this.zoom=this.minZoom):r>this.maxZoom?(t=this.maxZoom/this.zoom,this.zoom=this.maxZoom):this.zoom=r,o.stretch(this.region,1/t),t},t.prototype.applyChangeInPan=function(t){var r=e.Obj.create(this.pan);r.add(t);var n=o.Obj.create(this.bounds);n.mulScalar((this.zoom-this.minZoom)/this.zoom),n.offset(-o.centerX(n),-o.centerY(n)),r.x<n.left?t.x=n.left-this.pan.x:r.x>n.right&&(t.x=n.right-this.pan.x),r.y<n.bottom?t.y=n.bottom-this.pan.y:r.y>n.top&&(t.y=n.top-this.pan.y),this.region.offset(t.x,t.y),this.pan.add(t)},t.prototype.applyChangesToMatrix=function(){this.matrix.ortho(this.region,.1,10)},t}();n.Projection=a},{"../struct/mat4":15,"../struct/rect":17,"../struct/vec2":19}],6:[function(t,r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t,r,n,e){this.needToRender=!1,this.gl=t,this.projection=r,this.programs=n,this.drawables=e}return t.prototype.onSurfaceChanged=function(t,r){this.gl.viewport(0,0,t,r),this.projection.fillViewport(t,r),this.needToRender=!0},t.prototype.useProgram=function(t){this.currentProgram!==t&&(t.bind(this.gl),this.currentProgram=t)},t}();n.Renderer=e},{}],7:[function(t,r,n){"use strict";function e(t,r,n,e){function o(t,n){return{src:t,status:n,pointers:[r.screenToWorld(t)]}}function i(t,r){return{src:t,status:r,pointers:a(t)}}function a(t){for(var n=[],e=t.touches,o=0;o<e.length;o++)n[o]=r.screenToWorld(e[o]);return n}var s=!1;t.addEventListener("mousedown",function(t){t.target===r.canvas&&(s=!0,t.preventDefault(),t.stopPropagation(),n(o(t,0)))},!1),t.addEventListener("mousemove",function(t){s&&(t.preventDefault(),t.stopPropagation(),n(o(t,1)))},!1),t.addEventListener("mouseout",function(t){s&&(t.preventDefault(),t.stopPropagation(),n(o(t,3)))},!1),t.addEventListener("mouseup",function(t){s&&(t.preventDefault(),t.stopPropagation(),s=!1,n(o(t,2)))},!1),t.addEventListener("touchstart",function(t){t.target===r.canvas&&(s=!0,t.preventDefault(),t.stopPropagation(),e(i(t,0)))},!1),t.addEventListener("touchmove",function(t){s&&(t.preventDefault(),t.stopPropagation(),e(i(t,1)))},!1),t.addEventListener("touchleave",function(t){s&&(t.preventDefault(),t.stopPropagation(),e(i(t,3)))},!1),t.addEventListener("touchend",function(t){s&&(t.preventDefault(),t.stopPropagation(),s=!1,e(i(t,2)))},!1)}Object.defineProperty(n,"__esModule",{value:!0});var o=t("../struct/rect"),i=t("../struct/point"),a=function(){function t(t,r){this.canvas=t,this.renderer=r,this.renderer.onSurfaceCreated()}return t.prototype.requestRender=function(){this.renderer.needToRender=!0},t.prototype.resize=function(t,r){return this.canvas.width!==t||this.canvas.height!==r?(this.canvas.width=t,this.canvas.height=r,this.bb=this.canvas.getBoundingClientRect(),this.renderer.onSurfaceChanged(t,r),!0):!1},t.prototype.screenToCanvas=function(t,r){return void 0===r&&(r=new i.Obj),r.x=t.clientX-this.bb.left,r.y=t.clientY-this.bb.top,r},t.prototype.screenToNdc=function(t,r){return void 0===r&&(r=new i.Obj),this.screenToCanvas(t,r),this.canvasToNdc(r,r),r},t.prototype.screenToWorld=function(t,r){return void 0===r&&(r=new i.Obj),this.screenToCanvas(t,r),this.canvasToNdc(r,r),this.ndcToWorld(r,r),r},t.prototype.canvasToNdc=function(t,r){void 0===r&&(r=new i.Obj);var n=this.bb.width,e=this.bb.height;return r.x=t.x/n,r.y=(e-t.y)/e,r},t.prototype.ndcToWorld=function(t,r){void 0===r&&(r=new i.Obj);var n=this.renderer.projection.region;return r.x=n.left+t.x*o.width(n),r.y=n.bottom+t.y*o.height(n),r},t}();n.Surface=a,n.addSurfaceListener=e},{"../struct/point":16,"../struct/rect":17}],8:[function(t,r,n){"use strict";function e(t,r,n){void 0===n&&(n=t.STATIC_DRAW);var e=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,r,n),e}function o(t,r,n){void 0===n&&(n=t.STATIC_DRAW);var e=t.createBuffer();return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),t.bufferData(t.ELEMENT_ARRAY_BUFFER,r,n),e}Object.defineProperty(n,"__esModule",{value:!0}),n.createArrayBuffer=e,n.createElementBuffer=o},{}],9:[function(t,r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=t("./struct/point"),o=t("./struct/vec2"),i=t("./struct/mat2d"),a=function(){function t(t,r){this.inverse=new i.Struct,this.model=t,r?(this.matrix=r,this.inverse.set(r),this.inverse.invert()):(this.matrix=i.Struct.identity(),this.inverse=i.Struct.identity())}return t.prototype.contains=function(t){return this.contains$(t.x,t.y)},t.prototype.contains$=function(t,r){var n=new e.Obj;return this.inverse.map$(t,r,n),this.model.contains(n)},t.prototype.offset=function(t){this.offset$(t.x,t.y)},t.prototype.offset$=function(t,r){this.matrix.postTranslate$(t,r),this.inverse.postTranslate$(-t,-r)},t.prototype.transform=function(t){this.matrix.postConcat(t),this.inverse.set(this.matrix),this.inverse.invert()},t.prototype.fitInRect=function(t,r){this.matrix.rectToRect(this.model.bounds,t,r),this.inverse.set(this.matrix),this.inverse.invert()},t.prototype.stretchAcrossLine=function(t,r){var n=t,e=o.Obj.fromPointToPoint(this.model.pivot,n),i=o.Obj.create(this.model.control);i.add(e);var a=r;this.matrix.setStretchRotateToPoint(i,a,n),this.matrix.preTranslate(e),this.inverse.set(this.matrix),this.inverse.invert()},t}();n.Shape=a},{"./struct/mat2d":14,"./struct/point":16,"./struct/vec2":19}],10:[function(t,r,n){"use strict";function e(t,r){var n=r<<2,e=t[n++]<<24,o=t[n++]<<16,i=t[n++]<<8,a=t[n++]<<0;return(e|o|i|a)>>>0}function o(t,r,n){var e=r<<2;t[e++]=n>>24&255,t[e++]=n>>16&255,t[e++]=n>>8&255,t[e++]=n>>0&255}function i(t,r){t.r=r.r,t.g=r.g,t.b=r.b,t.a=r.a}function a(t,r,n,e,o){t.r=r,t.g=n,t.b=e,t.a=o}function s(t,r){t.r+=r.r,t.g+=r.g,t.b+=r.b,t.a+=r.a}function u(t,r,n,e,o){t.r+=r,t.g+=n,t.b+=e,t.a+=o}function c(t,r){t.r-=r.r,t.g-=r.g,t.b-=r.b,t.a-=r.a}function p(t,r,n,e,o){t.r-=r,t.g-=n,t.b-=e,t.a-=o}function f(t,r){t.r*=r,t.g*=r,t.b*=r,t.a*=r}function h(t,r){t.r/=r,t.g/=r,t.b/=r,t.a/=r}function l(t,r){return t.r===r.r&&t.g===r.g&&t.b===r.b&&t.a===r.a}function d(t,r){return t.r===r&&t.g===r&&t.b===r&&t.a===r}function y(t,r,n){return Math.abs(t.r-r.r)<=n&&Math.abs(t.g-r.g)<=n&&Math.abs(t.b-r.b)<=n&&Math.abs(t.a-r.a)<=n}function b(t,r,n){return Math.abs(t.r-r)<=n&&Math.abs(t.g-r)<=n&&Math.abs(t.b-r)<=n&&Math.abs(t.a-r)<=n}function g(t){return"{ r: "+t.r+", g: "+t.g+", b: "+t.b+", a: "+t.a+" }"}function v(t){return 255===t.a}function m(t){return 0===t.a}function P(t){t.r=E.randomInt(0,255),t.g=E.randomInt(0,255),t.b=E.randomInt(0,255)}function $(t,r){t.r=255*r.r,t.g=255*r.g,t.b=255*r.b,t.a=255*r.a}function x(t,r){var n=E.ArgbRegex.exec(r);t.a=parseInt(n[1],16),t.r=parseInt(n[2],16),t.g=parseInt(n[3],16),t.b=parseInt(n[4],16)}function S(t){var r=E.pad(t.r.toString(16)),n=E.pad(t.g.toString(16)),e=E.pad(t.b.toString(16)),o=E.pad(t.a.toString(16));return"#"+o+r+n+e}function _(t,r){t.r=r>>24&255,t.g=r>>16&255,t.b=r>>8&255,t.a=r>>0&255}function w(t){var r=t.r<<24,n=t.g<<16,e=t.b<<8,o=t.a<<0;return(r|n|e|o)>>>0}function T(t,r){var n=r.a+1,e=256-r.a;t.r=n*r.r+e*t.r>>8,t.g=n*r.g+e*t.g>>8,t.b=n*r.b+e*t.b>>8}var O=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(r,n){function e(){this.constructor=r}t(r,n),r.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();Object.defineProperty(n,"__esModule",{value:!0});var E=t("./util"),R=t("../structify/struct"),j=t("../structify/buf");n.getRgba=e,n.setRgba=o,n.set=i,n.set$=a,n.add=s,n.add$=u,n.subtract=c,n.subtract$=p,n.mulScalar=f,n.divScalar=h,n.equals=l,n.equalsScalar=d,n.epsilonEquals=y,n.epsilonEqualsScalar=b,n.toString=g,n.isOpaque=v,n.isTransparent=m,n.setRandom=P,n.setFromColorF=$,n.setFromArgbString=x,n.toArgbString=S,n.setFromRgbaInt=_,n.toRgbaInt=w,n.blend=T;var M=function(){function t(){}return t.create=function(r){var n=new t;return n.set(r),n},t.create$=function(r,n,e,o){var i=new t;return i.set$(r,n,e,o),i},t.random=function(){var r=new t;return r.setRandom(),r},t.fromColorF=function(r){var n=new t;return n.setFromColorF(r),n},t.fromArgbString=function(r){var n=new t;return n.setFromArgbString(r),n},t.fromRgbaInt=function(r){var n=new t;return n.setFromRgbaInt(r),n},t.prototype.set=function(t){return i(this,t)},t.prototype.set$=function(t,r,n,e){return a(this,t,r,n,e)},t.prototype.add=function(t){return s(this,t)},t.prototype.add$=function(t,r,n,e){return u(this,t,r,n,e)},t.prototype.subtract=function(t){return c(this,t)},t.prototype.subtract$=function(t,r,n,e){return p(this,t,r,n,e)},t.prototype.mulScalar=function(t){return f(this,t)},t.prototype.divScalar=function(t){return h(this,t)},t.prototype.equals=function(t){return l(this,t)},t.prototype.equalsScalar=function(t){return d(this,t)},t.prototype.epsilonEquals=function(t,r){return y(this,t,r)},t.prototype.epsilonEqualsScalar=function(t,r){return b(this,t,r)},t.prototype.toString=function(){return g(this)},t.prototype.isOpaque=function(){return v(this)},t.prototype.isTransparent=function(){return m(this)},t.prototype.setRandom=function(){return P(this)},t.prototype.setFromColorF=function(t){return $(this,t)},t.prototype.setFromArgbString=function(t){return x(this,t)},t.prototype.toArgbString=function(){return S(this)},t.prototype.setFromRgbaInt=function(t){return _(this,t)},t.prototype.toRgbaInt=function(){return w(this)},t.prototype.blend=function(t){return T(this,t)},t}();n.Obj=M;var A=function(t){function r(){return t.call(this,new Uint8Array(4))||this}return O(r,t),r.create=function(t){var n=new r;return n.set(t),n},r.create$=function(t,n,e,o){var i=new r;return i.set$(t,n,e,o),i},r.random=function(){var t=new r;return t.setRandom(),t},r.fromColorF=function(t){var n=new r;return n.setFromColorF(t),n},r.fromArgbString=function(t){var n=new r;return n.setFromArgbString(t),n},r.fromRgbaInt=function(t){var n=new r;return n.setFromRgbaInt(t),n},Object.defineProperty(r.prototype,"r",{get:function(){return this.data[0]},set:function(t){this.data[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"g",{get:function(){return this.data[1]},set:function(t){this.data[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"b",{get:function(){return this.data[2]},set:function(t){this.data[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"a",{get:function(){return this.data[3]},set:function(t){this.data[3]=t},enumerable:!0,configurable:!0}),r.prototype.set=function(t){return i(this,t)},r.prototype.set$=function(t,r,n,e){return a(this,t,r,n,e)},r.prototype.add=function(t){return s(this,t)},r.prototype.add$=function(t,r,n,e){return u(this,t,r,n,e)},r.prototype.subtract=function(t){return c(this,t)},r.prototype.subtract$=function(t,r,n,e){return p(this,t,r,n,e)},r.prototype.mulScalar=function(t){return f(this,t)},r.prototype.divScalar=function(t){return h(this,t)},r.prototype.equals=function(t){return l(this,t)},r.prototype.equalsScalar=function(t){return d(this,t)},r.prototype.epsilonEquals=function(t,r){return y(this,t,r)},r.prototype.epsilonEqualsScalar=function(t,r){return b(this,t,r)},r.prototype.toString=function(){return g(this)},r.prototype.isOpaque=function(){return v(this)},r.prototype.isTransparent=function(){return m(this)},r.prototype.setRandom=function(){return P(this)},r.prototype.setFromColorF=function(t){return $(this,t)},r.prototype.setFromArgbString=function(t){return x(this,t)},r.prototype.toArgbString=function(){return S(this)},r.prototype.setFromRgbaInt=function(t){return _(this,t)},r.prototype.toRgbaInt=function(){return w(this)},r.prototype.blend=function(t){return T(this,t)},r}(R["default"]);n.Struct=A;var q=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return O(r,t),r.create=function(t){return new r(new Uint8Array(4*t))},Object.defineProperty(r.prototype,"r",{get:function(){return this.data[this.dataPosition+0]},set:function(t){this.data[this.dataPosition+0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"g",{get:function(){return this.data[this.dataPosition+1]},set:function(t){this.data[this.dataPosition+1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"b",{get:function(){return this.data[this.dataPosition+2]},set:function(t){this.data[this.dataPosition+2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"a",{get:function(){return this.data[this.dataPosition+3]},set:function(t){this.data[this.dataPosition+3]=t},enumerable:!0,configurable:!0}),r.prototype.structLength=function(){return 4},r.prototype.set$=function(t,r,n,e,o){var i=t*this.structLength();this.data[i++]=r,this.data[i++]=n,this.data[i++]=e,this.data[i++]=o},r.prototype.put$=function(t,r,n,e){this.data[this.dataPosition++]=t,this.data[this.dataPosition++]=r,this.data[this.dataPosition++]=n,this.data[this.dataPosition++]=e},r.prototype.$set=function(t){return i(this,t)},r.prototype.$set$=function(t,r,n,e){return a(this,t,r,n,e)},r.prototype.$add=function(t){return s(this,t)},r.prototype.$add$=function(t,r,n,e){return u(this,t,r,n,e)},r.prototype.$subtract=function(t){return c(this,t)},r.prototype.$subtract$=function(t,r,n,e){return p(this,t,r,n,e)},r.prototype.$mulScalar=function(t){return f(this,t)},r.prototype.$divScalar=function(t){return h(this,t)},r.prototype.$equals=function(t){return l(this,t)},r.prototype.$equalsScalar=function(t){return d(this,t)},r.prototype.$epsilonEquals=function(t,r){return y(this,t,r)},r.prototype.$epsilonEqualsScalar=function(t,r){return b(this,t,r)},r.prototype.$toString=function(){return g(this)},r.prototype.$isOpaque=function(){return v(this)},r.prototype.$isTransparent=function(){return m(this)},r.prototype.$setRandom=function(){return P(this)},r.prototype.$setFromColorF=function(t){return $(this,t)},r.prototype.$setFromArgbString=function(t){return x(this,t)},r.prototype.$toArgbString=function(){return S(this)},r.prototype.$setFromRgbaInt=function(t){return _(this,t)},r.prototype.$toRgbaInt=function(){return w(this)},r.prototype.$blend=function(t){return T(this,t)},r}(j["default"]);n.Buf=q},{"../structify/buf":20,"../structify/struct":21,"./util":18}],11:[function(t,r,n){"use strict";function e(t,r){t.r=r.r,t.g=r.g,t.b=r.b,t.a=r.a}function o(t,r,n,e,o){t.r=r,t.g=n,t.b=e,t.a=o}function i(t,r){t.r+=r.r,t.g+=r.g,t.b+=r.b,t.a+=r.a}function a(t,r,n,e,o){t.r+=r,t.g+=n,t.b+=e,t.a+=o}function s(t,r){t.r-=r.r,t.g-=r.g,t.b-=r.b,t.a-=r.a}function u(t,r,n,e,o){t.r-=r,t.g-=n,t.b-=e,t.a-=o}function c(t,r){t.r*=r,t.g*=r,t.b*=r,t.a*=r}function p(t,r){t.r/=r,t.g/=r,t.b/=r,t.a/=r}function f(t,r){return t.r===r.r&&t.g===r.g&&t.b===r.b&&t.a===r.a}function h(t,r){return t.r===r&&t.g===r&&t.b===r&&t.a===r}function l(t,r,n){return Math.abs(t.r-r.r)<=n&&Math.abs(t.g-r.g)<=n&&Math.abs(t.b-r.b)<=n&&Math.abs(t.a-r.a)<=n}function d(t,r,n){return Math.abs(t.r-r)<=n&&Math.abs(t.g-r)<=n&&Math.abs(t.b-r)<=n&&Math.abs(t.a-r)<=n}function y(t){return"{ r: "+t.r+", g: "+t.g+", b: "+t.b+", a: "+t.a+" }"}function b(t,r){return 1===r.a}function g(t,r){return 0===r.a}function v(t){t.r=Math.random(),t.g=Math.random(),t.b=Math.random()}function m(t,r){t.r=r.r/255,t.g=r.g/255,t.b=r.b/255,t.a=r.a/255}function P(t,r){var n=T.ArgbRegex.exec(r);t.a=parseInt(n[1],16)/255,t.r=parseInt(n[2],16)/255,t.g=parseInt(n[3],16)/255,t.b=parseInt(n[4],16)/255}function $(t){var r=T.pad((255*t.r).toString(16)),n=T.pad((255*t.g).toString(16)),e=T.pad((255*t.b).toString(16)),o=T.pad((255*t.a).toString(16));return"#"+o+r+n+e}function x(t,r){t.r=(r>>24&255)/255,t.g=(r>>16&255)/255,t.b=(r>>8&255)/255,t.a=(r>>0&255)/255}function S(t){var r=255*t.r<<24,n=255*t.g<<16,e=255*t.b<<8,o=255*t.a<<0;return(r|n|e|o)>>>0}function _(t){var r=t.a;t.r*=r,t.g*=r,t.b*=r}var w=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(r,n){function e(){this.constructor=r}t(r,n),r.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();Object.defineProperty(n,"__esModule",{value:!0});var T=t("./util"),O=t("../structify/struct"),E=t("../structify/buf");n.set=e,n.set$=o,n.add=i,n.add$=a,n.subtract=s,n.subtract$=u,n.mulScalar=c,n.divScalar=p,n.equals=f,n.equalsScalar=h,n.epsilonEquals=l,n.epsilonEqualsScalar=d,n.toString=y,n.isOpaque=b,n.isTransparent=g,n.random=v,n.setFromColor=m,n.setFromArgbString=P,n.toArgbString=$,n.setFromRgbaInt=x,n.toRgbaInt=S,n.premultiplyAlpha=_;var R=function(){function t(){}return t.create=function(r){var n=new t;return n.set(r),n},t.create$=function(r,n,e,o){var i=new t;return i.set$(r,n,e,o),i},t.fromColor=function(r){var n=new t;return n.setFromColor(r),n},t.fromArgbString=function(r){var n=new t;return n.setFromArgbString(r),n},t.fromRgbaInt=function(r){var n=new t;return n.setFromRgbaInt(r),n},t.prototype.set=function(t){return e(this,t)},t.prototype.set$=function(t,r,n,e){return o(this,t,r,n,e)},t.prototype.add=function(t){return i(this,t)},t.prototype.add$=function(t,r,n,e){return a(this,t,r,n,e)},t.prototype.subtract=function(t){return s(this,t)},t.prototype.subtract$=function(t,r,n,e){return u(this,t,r,n,e)},t.prototype.mulScalar=function(t){return c(this,t)},t.prototype.divScalar=function(t){return p(this,t)},t.prototype.equals=function(t){return f(this,t)},t.prototype.equalsScalar=function(t){return h(this,t)},t.prototype.epsilonEquals=function(t,r){return l(this,t,r)},t.prototype.epsilonEqualsScalar=function(t,r){return d(this,t,r)},t.prototype.toString=function(){return y(this)},t.prototype.isOpaque=function(t){return b(this,t)},t.prototype.isTransparent=function(t){return g(this,t)},t.prototype.random=function(){return v(this)},t.prototype.setFromColor=function(t){return m(this,t)},t.prototype.setFromArgbString=function(t){return P(this,t)},t.prototype.toArgbString=function(){return $(this)},t.prototype.setFromRgbaInt=function(t){return x(this,t)},t.prototype.toRgbaInt=function(){return S(this)},t.prototype.premultiplyAlpha=function(){return _(this)},t}();n.Obj=R;var j=function(t){function r(){return t.call(this,new Float32Array(4))||this}return w(r,t),r.create=function(t){var n=new r;return n.set(t),n},r.create$=function(t,n,e,o){var i=new r;return i.set$(t,n,e,o),i},r.fromColor=function(t){var n=new r;return n.setFromColor(t),n},r.fromArgbString=function(t){var n=new r;return n.setFromArgbString(t),n},r.fromRgbaInt=function(t){var n=new r;return n.setFromRgbaInt(t),n},Object.defineProperty(r.prototype,"r",{get:function(){return this.data[0]},set:function(t){this.data[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"g",{get:function(){return this.data[1]},set:function(t){this.data[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"b",{get:function(){return this.data[2]},set:function(t){this.data[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"a",{get:function(){return this.data[3]},set:function(t){this.data[3]=t},enumerable:!0,configurable:!0}),r.prototype.set=function(t){return e(this,t)},r.prototype.set$=function(t,r,n,e){return o(this,t,r,n,e)},r.prototype.add=function(t){return i(this,t)},r.prototype.add$=function(t,r,n,e){return a(this,t,r,n,e)},r.prototype.subtract=function(t){return s(this,t)},r.prototype.subtract$=function(t,r,n,e){return u(this,t,r,n,e)},r.prototype.mulScalar=function(t){return c(this,t)},r.prototype.divScalar=function(t){return p(this,t)},r.prototype.equals=function(t){return f(this,t)},r.prototype.equalsScalar=function(t){return h(this,t)},r.prototype.epsilonEquals=function(t,r){return l(this,t,r)},r.prototype.epsilonEqualsScalar=function(t,r){return d(this,t,r)},r.prototype.toString=function(){return y(this)},r.prototype.isOpaque=function(t){return b(this,t)},r.prototype.isTransparent=function(t){return g(this,t)},r.prototype.random=function(){return v(this)},r.prototype.setFromColor=function(t){return m(this,t)},r.prototype.setFromArgbString=function(t){return P(this,t)},r.prototype.toArgbString=function(){return $(this)},r.prototype.setFromRgbaInt=function(t){return x(this,t)},r.prototype.toRgbaInt=function(){return S(this)},r.prototype.premultiplyAlpha=function(){return _(this)},r}(O["default"]);n.Struct=j;var M=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return w(r,t),r.create=function(t){return new r(new Float32Array(4*t))},Object.defineProperty(r.prototype,"r",{get:function(){return this.data[this.dataPosition+0]},set:function(t){this.data[this.dataPosition+0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"g",{get:function(){return this.data[this.dataPosition+1]},set:function(t){this.data[this.dataPosition+1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"b",{get:function(){return this.data[this.dataPosition+2]},set:function(t){this.data[this.dataPosition+2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"a",{get:function(){return this.data[this.dataPosition+3]},set:function(t){this.data[this.dataPosition+3]=t},enumerable:!0,configurable:!0}),r.prototype.structLength=function(){return 4},r.prototype.set$=function(t,r,n,e,o){var i=t*this.structLength();this.data[i++]=r,this.data[i++]=n,this.data[i++]=e,this.data[i++]=o},r.prototype.put$=function(t,r,n,e){this.data[this.dataPosition++]=t,this.data[this.dataPosition++]=r,this.data[this.dataPosition++]=n,this.data[this.dataPosition++]=e},r.prototype.$set=function(t){return e(this,t)},r.prototype.$set$=function(t,r,n,e){return o(this,t,r,n,e)},r.prototype.$add=function(t){return i(this,t)},r.prototype.$add$=function(t,r,n,e){return a(this,t,r,n,e)},r.prototype.$subtract=function(t){return s(this,t)},r.prototype.$subtract$=function(t,r,n,e){return u(this,t,r,n,e)},r.prototype.$mulScalar=function(t){return c(this,t)},r.prototype.$divScalar=function(t){return p(this,t)},r.prototype.$equals=function(t){return f(this,t)},r.prototype.$equalsScalar=function(t){return h(this,t)},r.prototype.$epsilonEquals=function(t,r){return l(this,t,r)},r.prototype.$epsilonEqualsScalar=function(t,r){return d(this,t,r)},r.prototype.$toString=function(){return y(this)},r.prototype.$isOpaque=function(t){return b(this,t)},r.prototype.$isTransparent=function(t){return g(this,t)},r.prototype.$random=function(){return v(this)},r.prototype.$setFromColor=function(t){return m(this,t)},r.prototype.$setFromArgbString=function(t){return P(this,t)},r.prototype.$toArgbString=function(){return $(this)},r.prototype.$setFromRgbaInt=function(t){return x(this,t)},r.prototype.$toRgbaInt=function(){return S(this)},r.prototype.$premultiplyAlpha=function(){return _(this)},r}(E["default"]);n.Buf=M},{"../structify/buf":20,"../structify/struct":21,"./util":18}],12:[function(t,r,n){"use strict";function e(t,r){t.first=r.first,t.second=r.second,t.third=r.third}function o(t,r,n,e){t.first=r,t.second=n,t.third=e}function i(t,r){t.first+=r.first,t.second+=r.second,t.third+=r.third}function a(t,r,n,e){t.first+=r,t.second+=n,t.third+=e}function s(t,r){t.first-=r.first,t.second-=r.second,t.third-=r.third}function u(t,r,n,e){t.first-=r,t.second-=n,t.third-=e}function c(t,r){t.first*=r,t.second*=r,t.third*=r}function p(t,r){t.first/=r,t.second/=r,t.third/=r}function f(t,r){return t.first===r.first&&t.second===r.second&&t.third===r.third}function h(t,r){return t.first===r&&t.second===r&&t.third===r}function l(t,r,n){return Math.abs(t.first-r.first)<=n&&Math.abs(t.second-r.second)<=n&&Math.abs(t.third-r.third)<=n}function d(t,r,n){return Math.abs(t.first-r)<=n&&Math.abs(t.second-r)<=n&&Math.abs(t.third-r)<=n}function y(t){return"{ first: "+t.first+", second: "+t.second+", third: "+t.third+" }"}var b=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(r,n){function e(){this.constructor=r}t(r,n),r.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();Object.defineProperty(n,"__esModule",{value:!0});var g=t("../structify/struct"),v=t("../structify/buf");n.set=e,n.set$=o,n.add=i,n.add$=a,n.subtract=s,n.subtract$=u,n.mulScalar=c,n.divScalar=p,n.equals=f,n.equalsScalar=h,n.epsilonEquals=l,n.epsilonEqualsScalar=d,n.toString=y;var m=function(){function t(){}return t.create=function(r){var n=new t;return n.set(r),n},t.create$=function(r,n,e){var o=new t;return o.set$(r,n,e),o},t.prototype.set=function(t){return e(this,t)},t.prototype.set$=function(t,r,n){return o(this,t,r,n)},t.prototype.add=function(t){return i(this,t)},t.prototype.add$=function(t,r,n){return a(this,t,r,n)},t.prototype.subtract=function(t){return s(this,t)},t.prototype.subtract$=function(t,r,n){return u(this,t,r,n)},t.prototype.mulScalar=function(t){return c(this,t)},t.prototype.divScalar=function(t){return p(this,t)},t.prototype.equals=function(t){return f(this,t)},t.prototype.equalsScalar=function(t){return h(this,t)},t.prototype.epsilonEquals=function(t,r){return l(this,t,r)},t.prototype.epsilonEqualsScalar=function(t,r){return d(this,t,r)},t.prototype.toString=function(){return y(this)},t}();n.Obj=m;var P=function(t){function r(){return t.call(this,new Uint16Array(3))||this}return b(r,t),r.create=function(t){var n=new r;

return n.set(t),n},r.create$=function(t,n,e){var o=new r;return o.set$(t,n,e),o},Object.defineProperty(r.prototype,"first",{get:function(){return this.data[0]},set:function(t){this.data[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"second",{get:function(){return this.data[1]},set:function(t){this.data[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"third",{get:function(){return this.data[2]},set:function(t){this.data[2]=t},enumerable:!0,configurable:!0}),r.prototype.set=function(t){return e(this,t)},r.prototype.set$=function(t,r,n){return o(this,t,r,n)},r.prototype.add=function(t){return i(this,t)},r.prototype.add$=function(t,r,n){return a(this,t,r,n)},r.prototype.subtract=function(t){return s(this,t)},r.prototype.subtract$=function(t,r,n){return u(this,t,r,n)},r.prototype.mulScalar=function(t){return c(this,t)},r.prototype.divScalar=function(t){return p(this,t)},r.prototype.equals=function(t){return f(this,t)},r.prototype.equalsScalar=function(t){return h(this,t)},r.prototype.epsilonEquals=function(t,r){return l(this,t,r)},r.prototype.epsilonEqualsScalar=function(t,r){return d(this,t,r)},r.prototype.toString=function(){return y(this)},r}(g["default"]);n.Struct=P;var $=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return b(r,t),r.create=function(t){return new r(new Uint16Array(3*t))},Object.defineProperty(r.prototype,"first",{get:function(){return this.data[this.dataPosition+0]},set:function(t){this.data[this.dataPosition+0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"second",{get:function(){return this.data[this.dataPosition+1]},set:function(t){this.data[this.dataPosition+1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"third",{get:function(){return this.data[this.dataPosition+2]},set:function(t){this.data[this.dataPosition+2]=t},enumerable:!0,configurable:!0}),r.prototype.structLength=function(){return 3},r.prototype.set$=function(t,r,n,e){var o=t*this.structLength();this.data[o++]=r,this.data[o++]=n,this.data[o++]=e},r.prototype.put$=function(t,r,n){this.data[this.dataPosition++]=t,this.data[this.dataPosition++]=r,this.data[this.dataPosition++]=n},r.prototype.$set=function(t){return e(this,t)},r.prototype.$set$=function(t,r,n){return o(this,t,r,n)},r.prototype.$add=function(t){return i(this,t)},r.prototype.$add$=function(t,r,n){return a(this,t,r,n)},r.prototype.$subtract=function(t){return s(this,t)},r.prototype.$subtract$=function(t,r,n){return u(this,t,r,n)},r.prototype.$mulScalar=function(t){return c(this,t)},r.prototype.$divScalar=function(t){return p(this,t)},r.prototype.$equals=function(t){return f(this,t)},r.prototype.$equalsScalar=function(t){return h(this,t)},r.prototype.$epsilonEquals=function(t,r){return l(this,t,r)},r.prototype.$epsilonEqualsScalar=function(t,r){return d(this,t,r)},r.prototype.$toString=function(){return y(this)},r}(v["default"]);n.Buf=$},{"../structify/buf":20,"../structify/struct":21}],13:[function(t,r,n){"use strict";function e(t,r){t.x1=r.x1,t.y1=r.y1,t.x2=r.x2,t.y2=r.y2}function o(t,r,n,e,o){t.x1=r,t.y1=n,t.x2=e,t.y2=o}function i(t,r){t.x1+=r.x1,t.y1+=r.y1,t.x2+=r.x2,t.y2+=r.y2}function a(t,r,n,e,o){t.x1+=r,t.y1+=n,t.x2+=e,t.y2+=o}function s(t,r){t.x1-=r.x1,t.y1-=r.y1,t.x2-=r.x2,t.y2-=r.y2}function u(t,r,n,e,o){t.x1-=r,t.y1-=n,t.x2-=e,t.y2-=o}function c(t,r){t.x1*=r,t.y1*=r,t.x2*=r,t.y2*=r}function p(t,r){t.x1/=r,t.y1/=r,t.x2/=r,t.y2/=r}function f(t,r){return t.x1===r.x1&&t.y1===r.y1&&t.x2===r.x2&&t.y2===r.y2}function h(t,r){return t.x1===r&&t.y1===r&&t.x2===r&&t.y2===r}function l(t,r,n){return Math.abs(t.x1-r.x1)<=n&&Math.abs(t.y1-r.y1)<=n&&Math.abs(t.x2-r.x2)<=n&&Math.abs(t.y2-r.y2)<=n}function d(t,r,n){return Math.abs(t.x1-r)<=n&&Math.abs(t.y1-r)<=n&&Math.abs(t.x2-r)<=n&&Math.abs(t.y2-r)<=n}function y(t){return"{ x1: "+t.x1+", y1: "+t.y1+", x2: "+t.x2+", y2: "+t.y2+" }"}function b(t,r,n){t.x1=r.x,t.y1=r.y,t.x2=n.x,t.y2=n.y}function g(t,r,n){return v(t,r.x,r.y,n)}function v(t,r,n,e){var o=t.x1,i=t.y1,a=t.x2-o,s=t.y2-i,u=-1,c=r-o,p=n-i,f=a*c+s*p,h=a*a+s*s;if(0!=h&&(u=f/h),0>u||u>1)return!1;var l=o+u*a,d=i+u*s,y=r-l,b=n-d,g=y*y+b*b;return e*e>g}var m=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(r,n){function e(){this.constructor=r}t(r,n),r.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();Object.defineProperty(n,"__esModule",{value:!0});var P=t("../structify/struct"),$=t("../structify/buf");n.set=e,n.set$=o,n.add=i,n.add$=a,n.subtract=s,n.subtract$=u,n.mulScalar=c,n.divScalar=p,n.equals=f,n.equalsScalar=h,n.epsilonEquals=l,n.epsilonEqualsScalar=d,n.toString=y,n.setThrough=b,n.contains=g,n.contains$=v;var x=function(){function t(){}return t.create=function(r){var n=new t;return n.set(r),n},t.create$=function(r,n,e,o){var i=new t;return i.set$(r,n,e,o),i},t.through=function(r,n){var e=new t;return e.setThrough(r,n),e},t.prototype.set=function(t){return e(this,t)},t.prototype.set$=function(t,r,n,e){return o(this,t,r,n,e)},t.prototype.add=function(t){return i(this,t)},t.prototype.add$=function(t,r,n,e){return a(this,t,r,n,e)},t.prototype.subtract=function(t){return s(this,t)},t.prototype.subtract$=function(t,r,n,e){return u(this,t,r,n,e)},t.prototype.mulScalar=function(t){return c(this,t)},t.prototype.divScalar=function(t){return p(this,t)},t.prototype.equals=function(t){return f(this,t)},t.prototype.equalsScalar=function(t){return h(this,t)},t.prototype.epsilonEquals=function(t,r){return l(this,t,r)},t.prototype.epsilonEqualsScalar=function(t,r){return d(this,t,r)},t.prototype.toString=function(){return y(this)},t.prototype.setThrough=function(t,r){return b(this,t,r)},t.prototype.contains=function(t,r){return g(this,t,r)},t.prototype.contains$=function(t,r,n){return v(this,t,r,n)},t}();n.Obj=x;var S=function(t){function r(){return t.call(this,new Float32Array(4))||this}return m(r,t),r.create=function(t){var n=new r;return n.set(t),n},r.create$=function(t,n,e,o){var i=new r;return i.set$(t,n,e,o),i},r.through=function(t,n){var e=new r;return e.setThrough(t,n),e},Object.defineProperty(r.prototype,"x1",{get:function(){return this.data[0]},set:function(t){this.data[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y1",{get:function(){return this.data[1]},set:function(t){this.data[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"x2",{get:function(){return this.data[2]},set:function(t){this.data[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y2",{get:function(){return this.data[3]},set:function(t){this.data[3]=t},enumerable:!0,configurable:!0}),r.prototype.set=function(t){return e(this,t)},r.prototype.set$=function(t,r,n,e){return o(this,t,r,n,e)},r.prototype.add=function(t){return i(this,t)},r.prototype.add$=function(t,r,n,e){return a(this,t,r,n,e)},r.prototype.subtract=function(t){return s(this,t)},r.prototype.subtract$=function(t,r,n,e){return u(this,t,r,n,e)},r.prototype.mulScalar=function(t){return c(this,t)},r.prototype.divScalar=function(t){return p(this,t)},r.prototype.equals=function(t){return f(this,t)},r.prototype.equalsScalar=function(t){return h(this,t)},r.prototype.epsilonEquals=function(t,r){return l(this,t,r)},r.prototype.epsilonEqualsScalar=function(t,r){return d(this,t,r)},r.prototype.toString=function(){return y(this)},r.prototype.setThrough=function(t,r){return b(this,t,r)},r.prototype.contains=function(t,r){return g(this,t,r)},r.prototype.contains$=function(t,r,n){return v(this,t,r,n)},r}(P["default"]);n.Struct=S;var _=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return m(r,t),r.create=function(t){return new r(new Float32Array(4*t))},Object.defineProperty(r.prototype,"x1",{get:function(){return this.data[this.dataPosition+0]},set:function(t){this.data[this.dataPosition+0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y1",{get:function(){return this.data[this.dataPosition+1]},set:function(t){this.data[this.dataPosition+1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"x2",{get:function(){return this.data[this.dataPosition+2]},set:function(t){this.data[this.dataPosition+2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y2",{get:function(){return this.data[this.dataPosition+3]},set:function(t){this.data[this.dataPosition+3]=t},enumerable:!0,configurable:!0}),r.prototype.structLength=function(){return 4},r.prototype.set$=function(t,r,n,e,o){var i=t*this.structLength();this.data[i++]=r,this.data[i++]=n,this.data[i++]=e,this.data[i++]=o},r.prototype.put$=function(t,r,n,e){this.data[this.dataPosition++]=t,this.data[this.dataPosition++]=r,this.data[this.dataPosition++]=n,this.data[this.dataPosition++]=e},r.prototype.$set=function(t){return e(this,t)},r.prototype.$set$=function(t,r,n,e){return o(this,t,r,n,e)},r.prototype.$add=function(t){return i(this,t)},r.prototype.$add$=function(t,r,n,e){return a(this,t,r,n,e)},r.prototype.$subtract=function(t){return s(this,t)},r.prototype.$subtract$=function(t,r,n,e){return u(this,t,r,n,e)},r.prototype.$mulScalar=function(t){return c(this,t)},r.prototype.$divScalar=function(t){return p(this,t)},r.prototype.$equals=function(t){return f(this,t)},r.prototype.$equalsScalar=function(t){return h(this,t)},r.prototype.$epsilonEquals=function(t,r){return l(this,t,r)},r.prototype.$epsilonEqualsScalar=function(t,r){return d(this,t,r)},r.prototype.$toString=function(){return y(this)},r.prototype.$setThrough=function(t,r){return b(this,t,r)},r.prototype.$contains=function(t,r){return g(this,t,r)},r.prototype.$contains$=function(t,r,n){return v(this,t,r,n)},r}($["default"]);n.Buf=_},{"../structify/buf":20,"../structify/struct":21}],14:[function(t,r,n){"use strict";function e(t,r){t.c1r1=r.c1r1,t.c1r2=r.c1r2,t.c1r3=r.c1r3,t.c2r1=r.c2r1,t.c2r2=r.c2r2,t.c2r3=r.c2r3,t.c3r1=r.c3r1,t.c3r2=r.c3r2,t.c3r3=r.c3r3}function o(t,r,n,e,o,i,a,s,u,c){t.c1r1=r,t.c1r2=n,t.c1r3=e,t.c2r1=o,t.c2r2=i,t.c2r3=a,t.c3r1=s,t.c3r2=u,t.c3r3=c}function i(t,r){t.c1r1+=r.c1r1,t.c1r2+=r.c1r2,t.c1r3+=r.c1r3,t.c2r1+=r.c2r1,t.c2r2+=r.c2r2,t.c2r3+=r.c2r3,t.c3r1+=r.c3r1,t.c3r2+=r.c3r2,t.c3r3+=r.c3r3}function a(t,r,n,e,o,i,a,s,u,c){t.c1r1+=r,t.c1r2+=n,t.c1r3+=e,t.c2r1+=o,t.c2r2+=i,t.c2r3+=a,t.c3r1+=s,t.c3r2+=u,t.c3r3+=c}function s(t,r){t.c1r1-=r.c1r1,t.c1r2-=r.c1r2,t.c1r3-=r.c1r3,t.c2r1-=r.c2r1,t.c2r2-=r.c2r2,t.c2r3-=r.c2r3,t.c3r1-=r.c3r1,t.c3r2-=r.c3r2,t.c3r3-=r.c3r3}function u(t,r,n,e,o,i,a,s,u,c){t.c1r1-=r,t.c1r2-=n,t.c1r3-=e,t.c2r1-=o,t.c2r2-=i,t.c2r3-=a,t.c3r1-=s,t.c3r2-=u,t.c3r3-=c}function c(t,r){t.c1r1*=r,t.c1r2*=r,t.c1r3*=r,t.c2r1*=r,t.c2r2*=r,t.c2r3*=r,t.c3r1*=r,t.c3r2*=r,t.c3r3*=r}function p(t,r){t.c1r1/=r,t.c1r2/=r,t.c1r3/=r,t.c2r1/=r,t.c2r2/=r,t.c2r3/=r,t.c3r1/=r,t.c3r2/=r,t.c3r3/=r}function f(t,r){return t.c1r1===r.c1r1&&t.c1r2===r.c1r2&&t.c1r3===r.c1r3&&t.c2r1===r.c2r1&&t.c2r2===r.c2r2&&t.c2r3===r.c2r3&&t.c3r1===r.c3r1&&t.c3r2===r.c3r2&&t.c3r3===r.c3r3}function h(t,r){return t.c1r1===r&&t.c1r2===r&&t.c1r3===r&&t.c2r1===r&&t.c2r2===r&&t.c2r3===r&&t.c3r1===r&&t.c3r2===r&&t.c3r3===r}function l(t,r,n){return Math.abs(t.c1r1-r.c1r1)<=n&&Math.abs(t.c1r2-r.c1r2)<=n&&Math.abs(t.c1r3-r.c1r3)<=n&&Math.abs(t.c2r1-r.c2r1)<=n&&Math.abs(t.c2r2-r.c2r2)<=n&&Math.abs(t.c2r3-r.c2r3)<=n&&Math.abs(t.c3r1-r.c3r1)<=n&&Math.abs(t.c3r2-r.c3r2)<=n&&Math.abs(t.c3r3-r.c3r3)<=n}function d(t,r,n){return Math.abs(t.c1r1-r)<=n&&Math.abs(t.c1r2-r)<=n&&Math.abs(t.c1r3-r)<=n&&Math.abs(t.c2r1-r)<=n&&Math.abs(t.c2r2-r)<=n&&Math.abs(t.c2r3-r)<=n&&Math.abs(t.c3r1-r)<=n&&Math.abs(t.c3r2-r)<=n&&Math.abs(t.c3r3-r)<=n}function y(t){return"{ c1r1: "+t.c1r1+", c1r2: "+t.c1r2+", c1r3: "+t.c1r3+", c2r1: "+t.c2r1+", c2r2: "+t.c2r2+", c2r3: "+t.c2r3+", c3r1: "+t.c3r1+", c3r2: "+t.c3r2+", c3r3: "+t.c3r3+" }"}function b(t){return t.c1r1*t.c2r2-t.c2r1*t.c1r2}function g(t,r,n){var e=r.c1r1*n.c1r1+r.c2r1*n.c1r2,o=r.c1r1*n.c2r1+r.c2r1*n.c2r2,i=r.c1r1*n.c3r1+r.c2r1*n.c3r2+r.c3r1,a=r.c1r2*n.c1r1+r.c2r2*n.c1r2,s=r.c1r2*n.c2r1+r.c2r2*n.c2r2,u=r.c1r2*n.c3r1+r.c2r2*n.c3r2+r.c3r2;t.c1r1=e,t.c2r1=o,t.c3r1=i,t.c1r2=a,t.c2r2=s,t.c3r2=u}function v(t){t.c1r1=1,t.c2r1=0,t.c3r1=0,t.c1r2=0,t.c2r2=1,t.c3r2=0}function m(t,r,n,e){var o=new K.Obj,i=new K.Obj;switch(e){case 0:Q.center(r,o),Q.center(n,i);break;case 1:Q.bottomRight(r,o),Q.bottomRight(n,i);break;default:Q.topLeft(r,o),Q.topLeft(n,i)}var a=Q.width(n)/Q.width(r),s=Q.height(n)/Q.height(r);R(t,-o.x,-o.y),2===e?I(t,a,s):U(t,Math.min(a,s)),k(t,i)}function P(t,r,n){var e=Math.sin(r),o=Math.cos(r);x(t,e,o,n)}function $(t,r,n,e){var o=new J.Obj,i=new J.Obj;o.set(r),i.set(n),e&&(o.subtract(e),i.subtract(e)),o.normalize(),i.normalize();var a=o.cross(i),s=o.dot(i);x(t,a,s,e)}function x(t,r,n,e){t.c1r1=n,t.c2r1=-r,t.c3r1=0,t.c1r2=r,t.c2r2=n,t.c3r2=0,e&&A(t,e.x,e.y)}function S(t,r,n,e){t.c1r1=r,t.c2r1=0,t.c3r1=0,t.c1r2=0,t.c2r2=n,t.c3r2=0,e&&A(t,e.x,e.y)}function _(t,r,n,e){var o=e?(n.x-e.x)/(r.x-e.x):n.x/r.x,i=e?(n.y-e.y)/(r.y-e.y):n.y/r.y;S(t,o,i,e)}function w(t,r,n){return S(t,r,r,n)}function T(t,r,n,e){var o=K.distance(r,e),i=K.distance(n,e),a=i/o;return w(t,a,e)}function O(t,r,n,e){var o=new J.Obj,i=new J.Obj;o.set(r),i.set(n),e&&(o.subtract(e),i.subtract(e));var a=o.length(),s=i.length(),u=s/a;o.divScalar(a),i.divScalar(s);var c=o.cross(i),p=o.dot(i);x(t,c,p),U(t,u),e&&A(t,e.x,e.y)}function E(t,r){R(t,r.x,r.y)}function R(t,r,n){t.c1r1=1,t.c2r1=0,t.c3r1=r,t.c1r2=0,t.c2r2=1,t.c3r2=n}function j(t,r,n){R(t,n.x-r.x,n.y-r.y)}function M(t,r){A(t,r.x,r.y)}function A(t,r,n){V(t,-r,-n),G(t,r,n)}function q(t){var r=1/b(t),n=t.c1r1,e=t.c2r1,o=t.c3r1,i=t.c1r2,a=t.c2r2,s=t.c3r2;t.c1r1=a*r,t.c2r1=-e*r,t.c3r1=(e*s-o*a)*r,t.c1r2=-i*r,t.c2r2=n*r,t.c3r2=(i*o-n*s)*r}function C(t,r){g(t,r,t)}function L(t,r){g(t,t,r)}function F(t,r){var n=Math.cos(r),e=Math.sin(r),o=t.c1r1,i=t.c2r1,a=t.c3r1;t.c1r1=e*o-n*t.c1r2,t.c2r1=e*i-n*t.c2r2,t.c3r1=e*a-n*t.c3r2,t.c1r2=n*o+e*t.c1r2,t.c2r2=n*i+e*t.c2r2,t.c3r2=n*a+n*t.c3r2}function B(t,r){var n=Math.cos(r),e=Math.sin(r),o=t.c1r1,i=t.c1r2;t.c1r1=o*e+t.c2r1*n,t.c1r2=i*e+t.c2r2*n,t.c2r1=o*-n+t.c2r1*e,t.c2r2=i*-n+t.c2r2*e}function I(t,r,n){t.c1r1*=r,t.c2r1*=r,t.c3r1*=r,t.c1r2*=n,t.c2r2*=n,t.c3r2*=n}function H(t,r,n){t.c1r1*=r,t.c1r2*=r,t.c2r1*=n,t.c2r2*=n}function U(t,r){I(t,r,r)}function D(t,r){H(t,r,r)}function k(t,r){G(t,r.x,r.y)}function G(t,r,n){t.c3r1+=r,t.c3r2+=n}function N(t,r){V(t,r.x,r.y)}function V(t,r,n){t.c3r1+=t.c1r1*r+t.c2r1*n,t.c3r2+=t.c1r2*r+t.c2r2*n}function Y(t,r,n){return W(t,r.x,r.y,n)}function W(t,r,n,e){return e.x=t.c1r1*r+t.c2r1*n+t.c3r1,e.y=t.c1r2*r+t.c2r2*n+t.c3r2,e}function X(t,r,n,e,o,i){void 0===o&&(o=r),void 0===i&&(i=n);for(var a=t.c1r1,s=t.c2r1,u=t.c3r1,c=t.c1r2,p=t.c2r2,f=t.c3r2;e--;){var h=r[n++],l=r[n++];o[i++]=a*h+s*l+u,o[i++]=c*h+p*l+f}}function z(t,r,n){var e=W(t,r.left,r.top,new K.Obj),o=W(t,r.left,r.bottom,new K.Obj),i=W(t,r.right,r.bottom,new K.Obj),a=W(t,r.right,r.top,new K.Obj);return n.left=n.right=e.x,n.top=n.bottom=e.y,Q.unionPoint(n,o),Q.unionPoint(n,i),Q.unionPoint(n,a),n}var Z=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(r,n){function e(){this.constructor=r}t(r,n),r.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();Object.defineProperty(n,"__esModule",{value:!0});var K=t("./point"),J=t("./vec2"),Q=t("./rect"),tt=t("../structify/struct"),rt=t("../structify/buf");n.set=e,n.set$=o,n.add=i,n.add$=a,n.subtract=s,n.subtract$=u,n.mulScalar=c,n.divScalar=p,n.equals=f,n.equalsScalar=h,n.epsilonEquals=l,n.epsilonEqualsScalar=d,n.toString=y,n.determinant=b,n.setConcat=g,n.setIdentity=v,n.rectToRect=m,n.setRotate=P,n.setRotateToPoint=$,n.setSinCos=x,n.setScale=S,n.setScaleToPoint=_,n.setStretch=w,n.setStretchToPoint=T,n.setStretchRotateToPoint=O,n.setTranslate=E,n.setTranslate$=R,n.setTranslateToPoint=j,n.conjugateByTranslation=M,n.conjugateByTranslation$=A,n.invert=q,n.postConcat=C,n.preConcat=L,n.postRotate=F,n.preRotate=B,n.postScale=I,n.preScale=H,n.postStretch=U,n.preStretch=D,n.postTranslate=k,n.postTranslate$=G,n.preTranslate=N,n.preTranslate$=V,n.map=Y,n.map$=W,n.mapPoints=X,n.mapRect=z;var nt=function(){function t(){}return t.create=function(r){var n=new t;return n.set(r),n},t.create$=function(r,n,e,o,i,a,s,u,c){var p=new t;return p.set$(r,n,e,o,i,a,s,u,c),p},t.concat=function(r,n){var e=new t;return e.setConcat(r,n),e},t.identity=function(){var r=new t;return r.setIdentity(),r},t.rotate=function(r,n){var e=new t;return e.setRotate(r,n),e},t.rotateToPoint=function(r,n,e){var o=new t;return o.setRotateToPoint(r,n,e),o},t.sinCos=function(r,n,e){var o=new t;return o.setSinCos(r,n,e),o},t.scale=function(r,n,e){var o=new t;return o.setScale(r,n,e),o},t.scaleToPoint=function(r,n,e){var o=new t;return o.setScaleToPoint(r,n,e),o},t.stretch=function(r,n){var e=new t;return e.setStretch(r,n),e},t.stretchToPoint=function(r,n,e){var o=new t;return o.setStretchToPoint(r,n,e),o},t.stretchRotateToPoint=function(r,n,e){var o=new t;return o.setStretchRotateToPoint(r,n,e),o},t.translate=function(r){var n=new t;return n.setTranslate(r),n},t.translate$=function(r,n){var e=new t;return e.setTranslate$(r,n),e},t.translateToPoint=function(r,n){var e=new t;return e.setTranslateToPoint(r,n),e},t.prototype.set=function(t){return e(this,t)},t.prototype.set$=function(t,r,n,e,i,a,s,u,c){return o(this,t,r,n,e,i,a,s,u,c)},t.prototype.add=function(t){return i(this,t)},t.prototype.add$=function(t,r,n,e,o,i,s,u,c){return a(this,t,r,n,e,o,i,s,u,c)},t.prototype.subtract=function(t){return s(this,t)},t.prototype.subtract$=function(t,r,n,e,o,i,a,s,c){return u(this,t,r,n,e,o,i,a,s,c)},t.prototype.mulScalar=function(t){return c(this,t)},t.prototype.divScalar=function(t){return p(this,t)},t.prototype.equals=function(t){return f(this,t)},t.prototype.equalsScalar=function(t){return h(this,t)},t.prototype.epsilonEquals=function(t,r){return l(this,t,r)},t.prototype.epsilonEqualsScalar=function(t,r){return d(this,t,r)},t.prototype.toString=function(){return y(this)},t.prototype.determinant=function(){return b(this)},t.prototype.setConcat=function(t,r){return g(this,t,r)},t.prototype.setIdentity=function(){return v(this)},t.prototype.rectToRect=function(t,r,n){return m(this,t,r,n)},t.prototype.setRotate=function(t,r){return P(this,t,r)},t.prototype.setRotateToPoint=function(t,r,n){return $(this,t,r,n)},t.prototype.setSinCos=function(t,r,n){return x(this,t,r,n)},t.prototype.setScale=function(t,r,n){return S(this,t,r,n)},t.prototype.setScaleToPoint=function(t,r,n){return _(this,t,r,n)},t.prototype.setStretch=function(t,r){return w(this,t,r)},t.prototype.setStretchToPoint=function(t,r,n){return T(this,t,r,n)},t.prototype.setStretchRotateToPoint=function(t,r,n){return O(this,t,r,n)},t.prototype.setTranslate=function(t){return E(this,t)},t.prototype.setTranslate$=function(t,r){return R(this,t,r)},t.prototype.setTranslateToPoint=function(t,r){return j(this,t,r)},t.prototype.conjugateByTranslation=function(t){return M(this,t)},t.prototype.conjugateByTranslation$=function(t,r){return A(this,t,r)},t.prototype.invert=function(){return q(this)},t.prototype.postConcat=function(t){return C(this,t)},t.prototype.preConcat=function(t){return L(this,t)},t.prototype.postRotate=function(t){return F(this,t)},t.prototype.preRotate=function(t){return B(this,t)},t.prototype.postScale=function(t,r){return I(this,t,r)},t.prototype.preScale=function(t,r){return H(this,t,r)},t.prototype.postStretch=function(t){return U(this,t)},t.prototype.preStretch=function(t){return D(this,t)},t.prototype.postTranslate=function(t){return k(this,t)},t.prototype.postTranslate$=function(t,r){return G(this,t,r)},t.prototype.preTranslate=function(t){return N(this,t)},t.prototype.preTranslate$=function(t,r){return V(this,t,r)},t.prototype.map=function(t,r){return Y(this,t,r)},t.prototype.map$=function(t,r,n){return W(this,t,r,n)},t.prototype.mapPoints=function(t,r,n,e,o){return void 0===e&&(e=t),void 0===o&&(o=r),X(this,t,r,n,e,o)},t.prototype.mapRect=function(t,r){return z(this,t,r)},t}();n.Obj=nt;var et=function(t){function r(){return t.call(this,new Float32Array(9))||this}return Z(r,t),r.create=function(t){var n=new r;return n.set(t),n},r.create$=function(t,n,e,o,i,a,s,u,c){var p=new r;return p.set$(t,n,e,o,i,a,s,u,c),p},r.concat=function(t,n){var e=new r;return e.setConcat(t,n),e},r.identity=function(){var t=new r;return t.setIdentity(),t},r.rotate=function(t,n){var e=new r;return e.setRotate(t,n),e},r.rotateToPoint=function(t,n,e){var o=new r;return o.setRotateToPoint(t,n,e),o},r.sinCos=function(t,n,e){var o=new r;return o.setSinCos(t,n,e),o},r.scale=function(t,n,e){var o=new r;return o.setScale(t,n,e),o},r.scaleToPoint=function(t,n,e){var o=new r;return o.setScaleToPoint(t,n,e),o},r.stretch=function(t,n){var e=new r;return e.setStretch(t,n),e},r.stretchToPoint=function(t,n,e){var o=new r;return o.setStretchToPoint(t,n,e),o},r.stretchRotateToPoint=function(t,n,e){var o=new r;return o.setStretchRotateToPoint(t,n,e),o},r.translate=function(t){var n=new r;return n.setTranslate(t),n},r.translate$=function(t,n){var e=new r;return e.setTranslate$(t,n),e},r.translateToPoint=function(t,n){var e=new r;return e.setTranslateToPoint(t,n),e},Object.defineProperty(r.prototype,"c1r1",{get:function(){return this.data[0]},set:function(t){this.data[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c1r2",{get:function(){return this.data[1]},set:function(t){this.data[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c1r3",{get:function(){return this.data[2]},set:function(t){this.data[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c2r1",{get:function(){return this.data[3]},set:function(t){this.data[3]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c2r2",{get:function(){return this.data[4]},set:function(t){this.data[4]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c2r3",{get:function(){return this.data[5]},set:function(t){this.data[5]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c3r1",{get:function(){return this.data[6]},set:function(t){this.data[6]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c3r2",{get:function(){return this.data[7]},set:function(t){this.data[7]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c3r3",{get:function(){return this.data[8]},set:function(t){this.data[8]=t},enumerable:!0,configurable:!0}),r.prototype.set=function(t){return e(this,t)},r.prototype.set$=function(t,r,n,e,i,a,s,u,c){return o(this,t,r,n,e,i,a,s,u,c)},r.prototype.add=function(t){return i(this,t)},r.prototype.add$=function(t,r,n,e,o,i,s,u,c){return a(this,t,r,n,e,o,i,s,u,c)},r.prototype.subtract=function(t){return s(this,t)},r.prototype.subtract$=function(t,r,n,e,o,i,a,s,c){return u(this,t,r,n,e,o,i,a,s,c)},r.prototype.mulScalar=function(t){return c(this,t)},r.prototype.divScalar=function(t){return p(this,t)},r.prototype.equals=function(t){return f(this,t)},r.prototype.equalsScalar=function(t){return h(this,t)},r.prototype.epsilonEquals=function(t,r){return l(this,t,r)},r.prototype.epsilonEqualsScalar=function(t,r){return d(this,t,r)},r.prototype.toString=function(){return y(this)},r.prototype.determinant=function(){return b(this)},r.prototype.setConcat=function(t,r){return g(this,t,r)},r.prototype.setIdentity=function(){return v(this)},r.prototype.rectToRect=function(t,r,n){return m(this,t,r,n)},r.prototype.setRotate=function(t,r){return P(this,t,r)},r.prototype.setRotateToPoint=function(t,r,n){return $(this,t,r,n)},r.prototype.setSinCos=function(t,r,n){return x(this,t,r,n)},r.prototype.setScale=function(t,r,n){return S(this,t,r,n)},r.prototype.setScaleToPoint=function(t,r,n){return _(this,t,r,n)},r.prototype.setStretch=function(t,r){return w(this,t,r)},r.prototype.setStretchToPoint=function(t,r,n){return T(this,t,r,n)},r.prototype.setStretchRotateToPoint=function(t,r,n){return O(this,t,r,n)},r.prototype.setTranslate=function(t){return E(this,t)},r.prototype.setTranslate$=function(t,r){return R(this,t,r)},r.prototype.setTranslateToPoint=function(t,r){return j(this,t,r)},r.prototype.conjugateByTranslation=function(t){return M(this,t)},r.prototype.conjugateByTranslation$=function(t,r){return A(this,t,r)},r.prototype.invert=function(){return q(this)},r.prototype.postConcat=function(t){return C(this,t)},r.prototype.preConcat=function(t){return L(this,t)},r.prototype.postRotate=function(t){return F(this,t)},r.prototype.preRotate=function(t){return B(this,t)},r.prototype.postScale=function(t,r){return I(this,t,r)},r.prototype.preScale=function(t,r){return H(this,t,r)},r.prototype.postStretch=function(t){return U(this,t)},r.prototype.preStretch=function(t){return D(this,t)},r.prototype.postTranslate=function(t){return k(this,t)},r.prototype.postTranslate$=function(t,r){return G(this,t,r)},r.prototype.preTranslate=function(t){return N(this,t)},r.prototype.preTranslate$=function(t,r){return V(this,t,r)},r.prototype.map=function(t,r){return Y(this,t,r)},r.prototype.map$=function(t,r,n){return W(this,t,r,n)},r.prototype.mapPoints=function(t,r,n,e,o){return void 0===e&&(e=t),void 0===o&&(o=r),X(this,t,r,n,e,o)},r.prototype.mapRect=function(t,r){return z(this,t,r)},r}(tt["default"]);n.Struct=et;var ot=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return Z(r,t),r.create=function(t){return new r(new Float32Array(9*t))},Object.defineProperty(r.prototype,"c1r1",{get:function(){return this.data[this.dataPosition+0]},set:function(t){this.data[this.dataPosition+0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c1r2",{get:function(){return this.data[this.dataPosition+1]},set:function(t){this.data[this.dataPosition+1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c1r3",{get:function(){return this.data[this.dataPosition+2]},set:function(t){this.data[this.dataPosition+2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c2r1",{get:function(){return this.data[this.dataPosition+3]},set:function(t){this.data[this.dataPosition+3]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c2r2",{get:function(){return this.data[this.dataPosition+4]},set:function(t){this.data[this.dataPosition+4]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c2r3",{get:function(){return this.data[this.dataPosition+5]},set:function(t){this.data[this.dataPosition+5]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c3r1",{get:function(){return this.data[this.dataPosition+6]},set:function(t){this.data[this.dataPosition+6]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c3r2",{get:function(){return this.data[this.dataPosition+7]},set:function(t){this.data[this.dataPosition+7]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c3r3",{get:function(){return this.data[this.dataPosition+8]},set:function(t){this.data[this.dataPosition+8]=t},enumerable:!0,configurable:!0}),r.prototype.structLength=function(){return 9},r.prototype.set$=function(t,r,n,e,o,i,a,s,u,c){var p=t*this.structLength();this.data[p++]=r,this.data[p++]=n,this.data[p++]=e,this.data[p++]=o,this.data[p++]=i,this.data[p++]=a,this.data[p++]=s,this.data[p++]=u,this.data[p++]=c},r.prototype.put$=function(t,r,n,e,o,i,a,s,u){this.data[this.dataPosition++]=t,this.data[this.dataPosition++]=r,this.data[this.dataPosition++]=n,this.data[this.dataPosition++]=e,this.data[this.dataPosition++]=o,this.data[this.dataPosition++]=i,this.data[this.dataPosition++]=a,this.data[this.dataPosition++]=s,this.data[this.dataPosition++]=u},r.prototype.$set=function(t){return e(this,t)},r.prototype.$set$=function(t,r,n,e,i,a,s,u,c){return o(this,t,r,n,e,i,a,s,u,c)},r.prototype.$add=function(t){return i(this,t)},r.prototype.$add$=function(t,r,n,e,o,i,s,u,c){return a(this,t,r,n,e,o,i,s,u,c)},r.prototype.$subtract=function(t){return s(this,t)},r.prototype.$subtract$=function(t,r,n,e,o,i,a,s,c){return u(this,t,r,n,e,o,i,a,s,c)},r.prototype.$mulScalar=function(t){return c(this,t)},r.prototype.$divScalar=function(t){return p(this,t)},r.prototype.$equals=function(t){return f(this,t)},r.prototype.$equalsScalar=function(t){return h(this,t)},r.prototype.$epsilonEquals=function(t,r){return l(this,t,r)},r.prototype.$epsilonEqualsScalar=function(t,r){return d(this,t,r)},r.prototype.$toString=function(){return y(this)},r.prototype.$determinant=function(){return b(this)},r.prototype.$setConcat=function(t,r){return g(this,t,r)},r.prototype.$setIdentity=function(){return v(this)},r.prototype.$rectToRect=function(t,r,n){return m(this,t,r,n)},r.prototype.$setRotate=function(t,r){return P(this,t,r)},r.prototype.$setRotateToPoint=function(t,r,n){return $(this,t,r,n)},r.prototype.$setSinCos=function(t,r,n){return x(this,t,r,n)},r.prototype.$setScale=function(t,r,n){return S(this,t,r,n)},r.prototype.$setScaleToPoint=function(t,r,n){return _(this,t,r,n)},r.prototype.$setStretch=function(t,r){return w(this,t,r)},r.prototype.$setStretchToPoint=function(t,r,n){return T(this,t,r,n)},r.prototype.$setStretchRotateToPoint=function(t,r,n){return O(this,t,r,n)},r.prototype.$setTranslate=function(t){return E(this,t)},r.prototype.$setTranslate$=function(t,r){return R(this,t,r)},r.prototype.$setTranslateToPoint=function(t,r){return j(this,t,r)},r.prototype.$conjugateByTranslation=function(t){return M(this,t)},r.prototype.$conjugateByTranslation$=function(t,r){return A(this,t,r)},r.prototype.$invert=function(){return q(this)},r.prototype.$postConcat=function(t){return C(this,t)},r.prototype.$preConcat=function(t){return L(this,t)},r.prototype.$postRotate=function(t){return F(this,t)},r.prototype.$preRotate=function(t){return B(this,t)},r.prototype.$postScale=function(t,r){return I(this,t,r)},r.prototype.$preScale=function(t,r){return H(this,t,r)},r.prototype.$postStretch=function(t){return U(this,t)},r.prototype.$preStretch=function(t){return D(this,t)},r.prototype.$postTranslate=function(t){return k(this,t)},r.prototype.$postTranslate$=function(t,r){return G(this,t,r)},r.prototype.$preTranslate=function(t){return N(this,t)},r.prototype.$preTranslate$=function(t,r){return V(this,t,r)},r.prototype.$map=function(t,r){return Y(this,t,r)},r.prototype.$map$=function(t,r,n){return W(this,t,r,n)},r.prototype.$mapPoints=function(t,r,n,e,o){return X(this,t,r,n,e,o)},r.prototype.$mapRect=function(t,r){return z(this,t,r)},r}(rt["default"]);n.Buf=ot},{"../structify/buf":20,"../structify/struct":21,"./point":16,"./rect":17,"./vec2":19}],15:[function(t,r,n){"use strict";function e(t,r){t.c1r1=r.c1r1,t.c1r2=r.c1r2,t.c1r3=r.c1r3,t.c1r4=r.c1r4,t.c2r1=r.c2r1,t.c2r2=r.c2r2,t.c2r3=r.c2r3,t.c2r4=r.c2r4,t.c3r1=r.c3r1,t.c3r2=r.c3r2,t.c3r3=r.c3r3,t.c3r4=r.c3r4,t.c4r1=r.c4r1,t.c4r2=r.c4r2,t.c4r3=r.c4r3,t.c4r4=r.c4r4}function o(t,r,n,e,o,i,a,s,u,c,p,f,h,l,d,y,b){t.c1r1=r,t.c1r2=n,t.c1r3=e,t.c1r4=o,t.c2r1=i,t.c2r2=a,t.c2r3=s,t.c2r4=u,t.c3r1=c,t.c3r2=p,t.c3r3=f,t.c3r4=h,t.c4r1=l,t.c4r2=d,t.c4r3=y,t.c4r4=b}function i(t,r){t.c1r1+=r.c1r1,t.c1r2+=r.c1r2,t.c1r3+=r.c1r3,t.c1r4+=r.c1r4,t.c2r1+=r.c2r1,t.c2r2+=r.c2r2,t.c2r3+=r.c2r3,t.c2r4+=r.c2r4,t.c3r1+=r.c3r1,t.c3r2+=r.c3r2,t.c3r3+=r.c3r3,t.c3r4+=r.c3r4,t.c4r1+=r.c4r1,t.c4r2+=r.c4r2,t.c4r3+=r.c4r3,t.c4r4+=r.c4r4}function a(t,r,n,e,o,i,a,s,u,c,p,f,h,l,d,y,b){t.c1r1+=r,t.c1r2+=n,t.c1r3+=e,t.c1r4+=o,t.c2r1+=i,t.c2r2+=a,t.c2r3+=s,t.c2r4+=u,t.c3r1+=c,t.c3r2+=p,t.c3r3+=f,t.c3r4+=h,t.c4r1+=l,t.c4r2+=d,t.c4r3+=y,t.c4r4+=b}function s(t,r){t.c1r1-=r.c1r1,t.c1r2-=r.c1r2,t.c1r3-=r.c1r3,t.c1r4-=r.c1r4,t.c2r1-=r.c2r1,t.c2r2-=r.c2r2,t.c2r3-=r.c2r3,t.c2r4-=r.c2r4,t.c3r1-=r.c3r1,t.c3r2-=r.c3r2,t.c3r3-=r.c3r3,t.c3r4-=r.c3r4,t.c4r1-=r.c4r1,t.c4r2-=r.c4r2,t.c4r3-=r.c4r3,t.c4r4-=r.c4r4}function u(t,r,n,e,o,i,a,s,u,c,p,f,h,l,d,y,b){t.c1r1-=r,t.c1r2-=n,t.c1r3-=e,t.c1r4-=o,
t.c2r1-=i,t.c2r2-=a,t.c2r3-=s,t.c2r4-=u,t.c3r1-=c,t.c3r2-=p,t.c3r3-=f,t.c3r4-=h,t.c4r1-=l,t.c4r2-=d,t.c4r3-=y,t.c4r4-=b}function c(t,r){t.c1r1*=r,t.c1r2*=r,t.c1r3*=r,t.c1r4*=r,t.c2r1*=r,t.c2r2*=r,t.c2r3*=r,t.c2r4*=r,t.c3r1*=r,t.c3r2*=r,t.c3r3*=r,t.c3r4*=r,t.c4r1*=r,t.c4r2*=r,t.c4r3*=r,t.c4r4*=r}function p(t,r){t.c1r1/=r,t.c1r2/=r,t.c1r3/=r,t.c1r4/=r,t.c2r1/=r,t.c2r2/=r,t.c2r3/=r,t.c2r4/=r,t.c3r1/=r,t.c3r2/=r,t.c3r3/=r,t.c3r4/=r,t.c4r1/=r,t.c4r2/=r,t.c4r3/=r,t.c4r4/=r}function f(t,r){return t.c1r1===r.c1r1&&t.c1r2===r.c1r2&&t.c1r3===r.c1r3&&t.c1r4===r.c1r4&&t.c2r1===r.c2r1&&t.c2r2===r.c2r2&&t.c2r3===r.c2r3&&t.c2r4===r.c2r4&&t.c3r1===r.c3r1&&t.c3r2===r.c3r2&&t.c3r3===r.c3r3&&t.c3r4===r.c3r4&&t.c4r1===r.c4r1&&t.c4r2===r.c4r2&&t.c4r3===r.c4r3&&t.c4r4===r.c4r4}function h(t,r){return t.c1r1===r&&t.c1r2===r&&t.c1r3===r&&t.c1r4===r&&t.c2r1===r&&t.c2r2===r&&t.c2r3===r&&t.c2r4===r&&t.c3r1===r&&t.c3r2===r&&t.c3r3===r&&t.c3r4===r&&t.c4r1===r&&t.c4r2===r&&t.c4r3===r&&t.c4r4===r}function l(t,r,n){return Math.abs(t.c1r1-r.c1r1)<=n&&Math.abs(t.c1r2-r.c1r2)<=n&&Math.abs(t.c1r3-r.c1r3)<=n&&Math.abs(t.c1r4-r.c1r4)<=n&&Math.abs(t.c2r1-r.c2r1)<=n&&Math.abs(t.c2r2-r.c2r2)<=n&&Math.abs(t.c2r3-r.c2r3)<=n&&Math.abs(t.c2r4-r.c2r4)<=n&&Math.abs(t.c3r1-r.c3r1)<=n&&Math.abs(t.c3r2-r.c3r2)<=n&&Math.abs(t.c3r3-r.c3r3)<=n&&Math.abs(t.c3r4-r.c3r4)<=n&&Math.abs(t.c4r1-r.c4r1)<=n&&Math.abs(t.c4r2-r.c4r2)<=n&&Math.abs(t.c4r3-r.c4r3)<=n&&Math.abs(t.c4r4-r.c4r4)<=n}function d(t,r,n){return Math.abs(t.c1r1-r)<=n&&Math.abs(t.c1r2-r)<=n&&Math.abs(t.c1r3-r)<=n&&Math.abs(t.c1r4-r)<=n&&Math.abs(t.c2r1-r)<=n&&Math.abs(t.c2r2-r)<=n&&Math.abs(t.c2r3-r)<=n&&Math.abs(t.c2r4-r)<=n&&Math.abs(t.c3r1-r)<=n&&Math.abs(t.c3r2-r)<=n&&Math.abs(t.c3r3-r)<=n&&Math.abs(t.c3r4-r)<=n&&Math.abs(t.c4r1-r)<=n&&Math.abs(t.c4r2-r)<=n&&Math.abs(t.c4r3-r)<=n&&Math.abs(t.c4r4-r)<=n}function y(t){return"{ c1r1: "+t.c1r1+", c1r2: "+t.c1r2+", c1r3: "+t.c1r3+", c1r4: "+t.c1r4+", c2r1: "+t.c2r1+", c2r2: "+t.c2r2+", c2r3: "+t.c2r3+", c2r4: "+t.c2r4+", c3r1: "+t.c3r1+", c3r2: "+t.c3r2+", c3r3: "+t.c3r3+", c3r4: "+t.c3r4+", c4r1: "+t.c4r1+", c4r2: "+t.c4r2+", c4r3: "+t.c4r3+", c4r4: "+t.c4r4+" }"}function b(t,r,n,e){g(t,r.left,r.right,r.bottom,r.top,n,e)}function g(t,r,n,e,o,i,a){var s=n-r,u=o-e,c=i-a;t.c1r1=2/s,t.c1r2=0,t.c1r3=0,t.c1r4=0,t.c2r1=0,t.c2r2=2/u,t.c2r3=0,t.c2r4=0,t.c3r1=0,t.c3r2=0,t.c3r3=1/c,t.c3r4=0,t.c4r1=-(n+r)/s,t.c4r2=-(o+e)/u,t.c4r3=-i/c,t.c4r4=1}var v=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(r,n){function e(){this.constructor=r}t(r,n),r.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();Object.defineProperty(n,"__esModule",{value:!0});var m=t("../structify/struct"),P=t("../structify/buf");n.set=e,n.set$=o,n.add=i,n.add$=a,n.subtract=s,n.subtract$=u,n.mulScalar=c,n.divScalar=p,n.equals=f,n.equalsScalar=h,n.epsilonEquals=l,n.epsilonEqualsScalar=d,n.toString=y,n.ortho=b,n.ortho$=g;var $=function(){function t(){}return t.create=function(r){var n=new t;return n.set(r),n},t.create$=function(r,n,e,o,i,a,s,u,c,p,f,h,l,d,y,b){var g=new t;return g.set$(r,n,e,o,i,a,s,u,c,p,f,h,l,d,y,b),g},t.prototype.set=function(t){return e(this,t)},t.prototype.set$=function(t,r,n,e,i,a,s,u,c,p,f,h,l,d,y,b){return o(this,t,r,n,e,i,a,s,u,c,p,f,h,l,d,y,b)},t.prototype.add=function(t){return i(this,t)},t.prototype.add$=function(t,r,n,e,o,i,s,u,c,p,f,h,l,d,y,b){return a(this,t,r,n,e,o,i,s,u,c,p,f,h,l,d,y,b)},t.prototype.subtract=function(t){return s(this,t)},t.prototype.subtract$=function(t,r,n,e,o,i,a,s,c,p,f,h,l,d,y,b){return u(this,t,r,n,e,o,i,a,s,c,p,f,h,l,d,y,b)},t.prototype.mulScalar=function(t){return c(this,t)},t.prototype.divScalar=function(t){return p(this,t)},t.prototype.equals=function(t){return f(this,t)},t.prototype.equalsScalar=function(t){return h(this,t)},t.prototype.epsilonEquals=function(t,r){return l(this,t,r)},t.prototype.epsilonEqualsScalar=function(t,r){return d(this,t,r)},t.prototype.toString=function(){return y(this)},t.prototype.ortho=function(t,r,n){return b(this,t,r,n)},t.prototype.ortho$=function(t,r,n,e,o,i){return g(this,t,r,n,e,o,i)},t}();n.Obj=$;var x=function(t){function r(){return t.call(this,new Float32Array(16))||this}return v(r,t),r.create=function(t){var n=new r;return n.set(t),n},r.create$=function(t,n,e,o,i,a,s,u,c,p,f,h,l,d,y,b){var g=new r;return g.set$(t,n,e,o,i,a,s,u,c,p,f,h,l,d,y,b),g},Object.defineProperty(r.prototype,"c1r1",{get:function(){return this.data[0]},set:function(t){this.data[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c1r2",{get:function(){return this.data[1]},set:function(t){this.data[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c1r3",{get:function(){return this.data[2]},set:function(t){this.data[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c1r4",{get:function(){return this.data[3]},set:function(t){this.data[3]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c2r1",{get:function(){return this.data[4]},set:function(t){this.data[4]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c2r2",{get:function(){return this.data[5]},set:function(t){this.data[5]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c2r3",{get:function(){return this.data[6]},set:function(t){this.data[6]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c2r4",{get:function(){return this.data[7]},set:function(t){this.data[7]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c3r1",{get:function(){return this.data[8]},set:function(t){this.data[8]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c3r2",{get:function(){return this.data[9]},set:function(t){this.data[9]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c3r3",{get:function(){return this.data[10]},set:function(t){this.data[10]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c3r4",{get:function(){return this.data[11]},set:function(t){this.data[11]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c4r1",{get:function(){return this.data[12]},set:function(t){this.data[12]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c4r2",{get:function(){return this.data[13]},set:function(t){this.data[13]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c4r3",{get:function(){return this.data[14]},set:function(t){this.data[14]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c4r4",{get:function(){return this.data[15]},set:function(t){this.data[15]=t},enumerable:!0,configurable:!0}),r.prototype.set=function(t){return e(this,t)},r.prototype.set$=function(t,r,n,e,i,a,s,u,c,p,f,h,l,d,y,b){return o(this,t,r,n,e,i,a,s,u,c,p,f,h,l,d,y,b)},r.prototype.add=function(t){return i(this,t)},r.prototype.add$=function(t,r,n,e,o,i,s,u,c,p,f,h,l,d,y,b){return a(this,t,r,n,e,o,i,s,u,c,p,f,h,l,d,y,b)},r.prototype.subtract=function(t){return s(this,t)},r.prototype.subtract$=function(t,r,n,e,o,i,a,s,c,p,f,h,l,d,y,b){return u(this,t,r,n,e,o,i,a,s,c,p,f,h,l,d,y,b)},r.prototype.mulScalar=function(t){return c(this,t)},r.prototype.divScalar=function(t){return p(this,t)},r.prototype.equals=function(t){return f(this,t)},r.prototype.equalsScalar=function(t){return h(this,t)},r.prototype.epsilonEquals=function(t,r){return l(this,t,r)},r.prototype.epsilonEqualsScalar=function(t,r){return d(this,t,r)},r.prototype.toString=function(){return y(this)},r.prototype.ortho=function(t,r,n){return b(this,t,r,n)},r.prototype.ortho$=function(t,r,n,e,o,i){return g(this,t,r,n,e,o,i)},r}(m["default"]);n.Struct=x;var S=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return v(r,t),r.create=function(t){return new r(new Float32Array(16*t))},Object.defineProperty(r.prototype,"c1r1",{get:function(){return this.data[this.dataPosition+0]},set:function(t){this.data[this.dataPosition+0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c1r2",{get:function(){return this.data[this.dataPosition+1]},set:function(t){this.data[this.dataPosition+1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c1r3",{get:function(){return this.data[this.dataPosition+2]},set:function(t){this.data[this.dataPosition+2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c1r4",{get:function(){return this.data[this.dataPosition+3]},set:function(t){this.data[this.dataPosition+3]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c2r1",{get:function(){return this.data[this.dataPosition+4]},set:function(t){this.data[this.dataPosition+4]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c2r2",{get:function(){return this.data[this.dataPosition+5]},set:function(t){this.data[this.dataPosition+5]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c2r3",{get:function(){return this.data[this.dataPosition+6]},set:function(t){this.data[this.dataPosition+6]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c2r4",{get:function(){return this.data[this.dataPosition+7]},set:function(t){this.data[this.dataPosition+7]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c3r1",{get:function(){return this.data[this.dataPosition+8]},set:function(t){this.data[this.dataPosition+8]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c3r2",{get:function(){return this.data[this.dataPosition+9]},set:function(t){this.data[this.dataPosition+9]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c3r3",{get:function(){return this.data[this.dataPosition+10]},set:function(t){this.data[this.dataPosition+10]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c3r4",{get:function(){return this.data[this.dataPosition+11]},set:function(t){this.data[this.dataPosition+11]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c4r1",{get:function(){return this.data[this.dataPosition+12]},set:function(t){this.data[this.dataPosition+12]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c4r2",{get:function(){return this.data[this.dataPosition+13]},set:function(t){this.data[this.dataPosition+13]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c4r3",{get:function(){return this.data[this.dataPosition+14]},set:function(t){this.data[this.dataPosition+14]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"c4r4",{get:function(){return this.data[this.dataPosition+15]},set:function(t){this.data[this.dataPosition+15]=t},enumerable:!0,configurable:!0}),r.prototype.structLength=function(){return 16},r.prototype.set$=function(t,r,n,e,o,i,a,s,u,c,p,f,h,l,d,y,b){var g=t*this.structLength();this.data[g++]=r,this.data[g++]=n,this.data[g++]=e,this.data[g++]=o,this.data[g++]=i,this.data[g++]=a,this.data[g++]=s,this.data[g++]=u,this.data[g++]=c,this.data[g++]=p,this.data[g++]=f,this.data[g++]=h,this.data[g++]=l,this.data[g++]=d,this.data[g++]=y,this.data[g++]=b},r.prototype.put$=function(t,r,n,e,o,i,a,s,u,c,p,f,h,l,d,y){this.data[this.dataPosition++]=t,this.data[this.dataPosition++]=r,this.data[this.dataPosition++]=n,this.data[this.dataPosition++]=e,this.data[this.dataPosition++]=o,this.data[this.dataPosition++]=i,this.data[this.dataPosition++]=a,this.data[this.dataPosition++]=s,this.data[this.dataPosition++]=u,this.data[this.dataPosition++]=c,this.data[this.dataPosition++]=p,this.data[this.dataPosition++]=f,this.data[this.dataPosition++]=h,this.data[this.dataPosition++]=l,this.data[this.dataPosition++]=d,this.data[this.dataPosition++]=y},r.prototype.$set=function(t){return e(this,t)},r.prototype.$set$=function(t,r,n,e,i,a,s,u,c,p,f,h,l,d,y,b){return o(this,t,r,n,e,i,a,s,u,c,p,f,h,l,d,y,b)},r.prototype.$add=function(t){return i(this,t)},r.prototype.$add$=function(t,r,n,e,o,i,s,u,c,p,f,h,l,d,y,b){return a(this,t,r,n,e,o,i,s,u,c,p,f,h,l,d,y,b)},r.prototype.$subtract=function(t){return s(this,t)},r.prototype.$subtract$=function(t,r,n,e,o,i,a,s,c,p,f,h,l,d,y,b){return u(this,t,r,n,e,o,i,a,s,c,p,f,h,l,d,y,b)},r.prototype.$mulScalar=function(t){return c(this,t)},r.prototype.$divScalar=function(t){return p(this,t)},r.prototype.$equals=function(t){return f(this,t)},r.prototype.$equalsScalar=function(t){return h(this,t)},r.prototype.$epsilonEquals=function(t,r){return l(this,t,r)},r.prototype.$epsilonEqualsScalar=function(t,r){return d(this,t,r)},r.prototype.$toString=function(){return y(this)},r.prototype.$ortho=function(t,r,n){return b(this,t,r,n)},r.prototype.$ortho$=function(t,r,n,e,o,i){return g(this,t,r,n,e,o,i)},r}(P["default"]);n.Buf=S},{"../structify/buf":20,"../structify/struct":21}],16:[function(t,r,n){"use strict";function e(t,r){t.x=r.x,t.y=r.y}function o(t,r,n){t.x=r,t.y=n}function i(t,r){t.x+=r.x,t.y+=r.y}function a(t,r,n){t.x+=r,t.y+=n}function s(t,r){t.x-=r.x,t.y-=r.y}function u(t,r,n){t.x-=r,t.y-=n}function c(t,r){t.x*=r,t.y*=r}function p(t,r){t.x/=r,t.y/=r}function f(t,r){return t.x===r.x&&t.y===r.y}function h(t,r){return t.x===r&&t.y===r}function l(t,r,n){return Math.abs(t.x-r.x)<=n&&Math.abs(t.y-r.y)<=n}function d(t,r,n){return Math.abs(t.x-r)<=n&&Math.abs(t.y-r)<=n}function y(t){return"{ x: "+t.x+", y: "+t.y+" }"}function b(t,r,n){t.x=.5*(r.x+n.x),t.y=.5*(r.y+n.y)}function g(t,r){return Math.sqrt(v(t,r))}function v(t,r){var n=r?r.x-t.x:t.x,e=r?r.y-t.y:t.y;return n*n+e*e}var m=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(r,n){function e(){this.constructor=r}t(r,n),r.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();Object.defineProperty(n,"__esModule",{value:!0});var P=t("../structify/struct"),$=t("../structify/buf");n.set=e,n.set$=o,n.add=i,n.add$=a,n.subtract=s,n.subtract$=u,n.mulScalar=c,n.divScalar=p,n.equals=f,n.equalsScalar=h,n.epsilonEquals=l,n.epsilonEqualsScalar=d,n.toString=y,n.setMidpoint=b,n.distance=g,n.distance2=v;var x=function(){function t(){}return t.create=function(r){var n=new t;return n.set(r),n},t.create$=function(r,n){var e=new t;return e.set$(r,n),e},t.midpoint=function(r,n){var e=new t;return e.setMidpoint(r,n),e},t.prototype.set=function(t){return e(this,t)},t.prototype.set$=function(t,r){return o(this,t,r)},t.prototype.add=function(t){return i(this,t)},t.prototype.add$=function(t,r){return a(this,t,r)},t.prototype.subtract=function(t){return s(this,t)},t.prototype.subtract$=function(t,r){return u(this,t,r)},t.prototype.mulScalar=function(t){return c(this,t)},t.prototype.divScalar=function(t){return p(this,t)},t.prototype.equals=function(t){return f(this,t)},t.prototype.equalsScalar=function(t){return h(this,t)},t.prototype.epsilonEquals=function(t,r){return l(this,t,r)},t.prototype.epsilonEqualsScalar=function(t,r){return d(this,t,r)},t.prototype.toString=function(){return y(this)},t.prototype.setMidpoint=function(t,r){return b(this,t,r)},t.prototype.distance=function(t){return g(this,t)},t.prototype.distance2=function(t){return v(this,t)},t}();n.Obj=x;var S=function(t){function r(){return t.call(this,new Float32Array(2))||this}return m(r,t),r.create=function(t){var n=new r;return n.set(t),n},r.create$=function(t,n){var e=new r;return e.set$(t,n),e},r.midpoint=function(t,n){var e=new r;return e.setMidpoint(t,n),e},Object.defineProperty(r.prototype,"x",{get:function(){return this.data[0]},set:function(t){this.data[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.data[1]},set:function(t){this.data[1]=t},enumerable:!0,configurable:!0}),r.prototype.set=function(t){return e(this,t)},r.prototype.set$=function(t,r){return o(this,t,r)},r.prototype.add=function(t){return i(this,t)},r.prototype.add$=function(t,r){return a(this,t,r)},r.prototype.subtract=function(t){return s(this,t)},r.prototype.subtract$=function(t,r){return u(this,t,r)},r.prototype.mulScalar=function(t){return c(this,t)},r.prototype.divScalar=function(t){return p(this,t)},r.prototype.equals=function(t){return f(this,t)},r.prototype.equalsScalar=function(t){return h(this,t)},r.prototype.epsilonEquals=function(t,r){return l(this,t,r)},r.prototype.epsilonEqualsScalar=function(t,r){return d(this,t,r)},r.prototype.toString=function(){return y(this)},r.prototype.setMidpoint=function(t,r){return b(this,t,r)},r.prototype.distance=function(t){return g(this,t)},r.prototype.distance2=function(t){return v(this,t)},r}(P["default"]);n.Struct=S;var _=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return m(r,t),r.create=function(t){return new r(new Float32Array(2*t))},Object.defineProperty(r.prototype,"x",{get:function(){return this.data[this.dataPosition+0]},set:function(t){this.data[this.dataPosition+0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.data[this.dataPosition+1]},set:function(t){this.data[this.dataPosition+1]=t},enumerable:!0,configurable:!0}),r.prototype.structLength=function(){return 2},r.prototype.set$=function(t,r,n){var e=t*this.structLength();this.data[e++]=r,this.data[e++]=n},r.prototype.put$=function(t,r){this.data[this.dataPosition++]=t,this.data[this.dataPosition++]=r},r.prototype.$set=function(t){return e(this,t)},r.prototype.$set$=function(t,r){return o(this,t,r)},r.prototype.$add=function(t){return i(this,t)},r.prototype.$add$=function(t,r){return a(this,t,r)},r.prototype.$subtract=function(t){return s(this,t)},r.prototype.$subtract$=function(t,r){return u(this,t,r)},r.prototype.$mulScalar=function(t){return c(this,t)},r.prototype.$divScalar=function(t){return p(this,t)},r.prototype.$equals=function(t){return f(this,t)},r.prototype.$equalsScalar=function(t){return h(this,t)},r.prototype.$epsilonEquals=function(t,r){return l(this,t,r)},r.prototype.$epsilonEqualsScalar=function(t,r){return d(this,t,r)},r.prototype.$toString=function(){return y(this)},r.prototype.$setMidpoint=function(t,r){return b(this,t,r)},r.prototype.$distance=function(t){return g(this,t)},r.prototype.$distance2=function(t){return v(this,t)},r}($["default"]);n.Buf=_},{"../structify/buf":20,"../structify/struct":21}],17:[function(t,r,n){"use strict";function e(t,r){t.left=r.left,t.top=r.top,t.right=r.right,t.bottom=r.bottom}function o(t,r,n,e,o){t.left=r,t.top=n,t.right=e,t.bottom=o}function i(t,r){t.left+=r.left,t.top+=r.top,t.right+=r.right,t.bottom+=r.bottom}function a(t,r,n,e,o){t.left+=r,t.top+=n,t.right+=e,t.bottom+=o}function s(t,r){t.left-=r.left,t.top-=r.top,t.right-=r.right,t.bottom-=r.bottom}function u(t,r,n,e,o){t.left-=r,t.top-=n,t.right-=e,t.bottom-=o}function c(t,r){t.left*=r,t.top*=r,t.right*=r,t.bottom*=r}function p(t,r){t.left/=r,t.top/=r,t.right/=r,t.bottom/=r}function f(t,r){return t.left===r.left&&t.top===r.top&&t.right===r.right&&t.bottom===r.bottom}function h(t,r){return t.left===r&&t.top===r&&t.right===r&&t.bottom===r}function l(t,r,n){return Math.abs(t.left-r.left)<=n&&Math.abs(t.top-r.top)<=n&&Math.abs(t.right-r.right)<=n&&Math.abs(t.bottom-r.bottom)<=n}function d(t,r,n){return Math.abs(t.left-r)<=n&&Math.abs(t.top-r)<=n&&Math.abs(t.right-r)<=n&&Math.abs(t.bottom-r)<=n}function y(t){return"{ left: "+t.left+", top: "+t.top+", right: "+t.right+", bottom: "+t.bottom+" }"}function b(t,r,n,e,o){t.left=r,t.top=n,t.right=e,t.bottom=o}function g(t,r,n,e,o){t.left=r,t.top=o,t.right=e,t.bottom=n}function v(t,r,n,e,o){t.left=r,t.top=o,t.right=n,t.bottom=e}function m(t,r,n,e,o){t.left=r,t.top=n,t.right=r+e,t.bottom=n-o}function P(t,r,n,e,o){t.left=r,t.top=n+o,t.right=r+e,t.bottom=n}function $(t){return t.left>=t.right||t.bottom>=t.top}function x(t){return t.right>=t.left&&t.top>=t.bottom}function S(t){return t.right-t.left}function _(t){return t.top-t.bottom}function w(t){return S(t)*_(t)}function T(t){return.5*(t.left+t.right)}function O(t){return.5*(t.bottom+t.top)}function E(t,r){return r.x=T(t),r.y=O(t),r}function R(t,r){return r.x=T(t),r.y=t.top,r}function j(t,r){return r.x=T(t),r.y=t.bottom,r}function M(t,r){return r.x=t.left,r.y=O(t),r}function A(t,r){return r.x=t.left,r.y=O(t),r}function q(t,r){return r.x=t.left,r.y=t.bottom,r}function C(t,r){return r.x=t.right,r.y=t.bottom,r}function L(t,r){return r.x=t.left,r.y=t.top,r}function F(t,r){return r.x=t.right,r.y=t.top,r}function B(t){t.left=0,t.top=0,t.right=0,t.bottom=0}function I(t,r,n,e){void 0===n&&(n=0),void 0===e&&(e=r.length),t.left=t.right=r[n].x,t.top=t.bottom=r[n].y,X(t,r,n+1,e-1)}function H(t,r,n,e){void 0===n&&(n=0),void 0===e&&(e=r.length>>1),t.left=t.right=r[n++],t.top=t.bottom=r[n++],z(t,r,n,e-1)}function U(t,r){return t.left<=r.left&&r.right<=t.right&&t.bottom<=r.bottom&&r.top<=t.top}function D(t,r){return k(t,r.x,r.y)}function k(t,r,n){return t.left<=r&&r<=t.right&&t.bottom<=n&&n<=t.top}function G(t,r){return t.right>=r.left&&r.right>=t.left&&t.top>=r.bottom&&r.top>=t.bottom}function N(t,r){t.left=Math.max(t.left,r.left),t.right=Math.min(t.right,r.right),t.bottom=Math.max(t.bottom,r.bottom),t.top=Math.min(t.top,r.top)}function V(t,r){t.left=Math.max(t.left,r.left),t.right=Math.min(t.right,r.right),t.bottom=Math.max(t.bottom,r.bottom),t.top=Math.min(t.top,r.top)}function Y(t,r){W(t,r.x,r.y)}function W(t,r,n){t.left=Math.min(r,t.left),t.top=Math.max(n,t.top),t.right=Math.max(r,t.right),t.bottom=Math.min(n,t.bottom)}function X(t,r,n,e){for(void 0===n&&(n=0),void 0===e&&(e=r.length);e-->0;)Y(t,r[n++])}function z(t,r,n,e){for(void 0===n&&(n=0),void 0===e&&(e=r.length>>1);e-->0;)W(t,r[n++],r[n++])}function Z(t,r,n){t.left+=r,t.top-=n,t.right-=r,t.bottom+=n}function K(t,r,n){t.left+=r,t.top+=n,t.right+=r,t.bottom+=n}function J(t,r,n){var e=T(t),o=O(t);K(t,-e,-o),t.left*=r,t.right*=r,t.bottom*=n,t.top*=n,K(t,e,o)}function Q(t,r){J(t,r,r)}function tt(t){var r=S(t),n=_(t);n>r?J(t,1,r/n):r>n&&J(t,n/r,1)}function rt(t){var r=S(t),n=_(t);n>r?J(t,n/r,1):r>n&&J(t,1,r/n)}function nt(t){if(t.bottom>t.top){var r=t.top;t.top=t.bottom,t.bottom=r}if(t.left>t.right){var n=t.right;t.right=t.left,t.left=n}}var et=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(r,n){function e(){this.constructor=r}t(r,n),r.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();Object.defineProperty(n,"__esModule",{value:!0});var ot=t("../structify/struct"),it=t("../structify/buf");n.set=e,n.set$=o,n.add=i,n.add$=a,n.subtract=s,n.subtract$=u,n.mulScalar=c,n.divScalar=p,n.equals=f,n.equalsScalar=h,n.epsilonEquals=l,n.epsilonEqualsScalar=d,n.toString=y,n.setLtrb=b,n.setLbrt=g,n.setLrbt=v,n.setLtwh=m,n.setLbwh=P,n.isEmpty=$,n.isValid=x,n.width=S,n.height=_,n.area=w,n.centerX=T,n.centerY=O,n.center=E,n.centerTop=R,n.centerBottom=j,n.centerLeft=M,n.centerRight=A,n.bottomLeft=q,n.bottomRight=C,n.topLeft=L,n.topRight=F,n.empty=B,n.setUnionOfPoints=I,n.setUnionOfPoints$=H,n.contains=U,n.containsPoint=D,n.containsPoint$=k,n.intersects=G,n.intersect=N,n.union=V,n.unionPoint=Y,n.unionPoint$=W,n.unionPoints=X,n.unionPoints$=z,n.inset=Z,n.offset=K,n.scale=J,n.stretch=Q,n.shrinkToSquare=tt,n.expandToSquare=rt,n.sort=nt;var at=function(){function t(){}return t.create=function(r){var n=new t;return n.set(r),n},t.create$=function(r,n,e,o){var i=new t;return i.set$(r,n,e,o),i},t.ltrb=function(r,n,e,o){var i=new t;return i.setLtrb(r,n,e,o),i},t.lbrt=function(r,n,e,o){var i=new t;return i.setLbrt(r,n,e,o),i},t.lrbt=function(r,n,e,o){var i=new t;return i.setLrbt(r,n,e,o),i},t.ltwh=function(r,n,e,o){var i=new t;return i.setLtwh(r,n,e,o),i},t.lbwh=function(r,n,e,o){var i=new t;return i.setLbwh(r,n,e,o),i},t.unionOfPoints=function(r,n,e){void 0===n&&(n=0),void 0===e&&(e=r.length);var o=new t;return o.setUnionOfPoints(r,n,e),o},t.unionOfPoints$=function(r,n,e){void 0===n&&(n=0),void 0===e&&(e=r.length>>1);var o=new t;return o.setUnionOfPoints$(r,n,e),o},t.prototype.set=function(t){return e(this,t)},t.prototype.set$=function(t,r,n,e){return o(this,t,r,n,e)},t.prototype.add=function(t){return i(this,t)},t.prototype.add$=function(t,r,n,e){return a(this,t,r,n,e)},t.prototype.subtract=function(t){return s(this,t)},t.prototype.subtract$=function(t,r,n,e){return u(this,t,r,n,e)},t.prototype.mulScalar=function(t){return c(this,t)},t.prototype.divScalar=function(t){return p(this,t)},t.prototype.equals=function(t){return f(this,t)},t.prototype.equalsScalar=function(t){return h(this,t)},t.prototype.epsilonEquals=function(t,r){return l(this,t,r)},t.prototype.epsilonEqualsScalar=function(t,r){return d(this,t,r)},t.prototype.toString=function(){return y(this)},t.prototype.setLtrb=function(t,r,n,e){return b(this,t,r,n,e)},t.prototype.setLbrt=function(t,r,n,e){return g(this,t,r,n,e)},t.prototype.setLrbt=function(t,r,n,e){return v(this,t,r,n,e)},t.prototype.setLtwh=function(t,r,n,e){return m(this,t,r,n,e)},t.prototype.setLbwh=function(t,r,n,e){return P(this,t,r,n,e)},t.prototype.isEmpty=function(){return $(this)},t.prototype.isValid=function(){return x(this)},t.prototype.width=function(){return S(this)},t.prototype.height=function(){return _(this)},t.prototype.area=function(){return w(this)},t.prototype.centerX=function(){return T(this)},t.prototype.centerY=function(){return O(this)},t.prototype.center=function(t){return E(this,t)},t.prototype.centerTop=function(t){return R(this,t)},t.prototype.centerBottom=function(t){return j(this,t)},t.prototype.centerLeft=function(t){return M(this,t)},t.prototype.centerRight=function(t){return A(this,t)},t.prototype.bottomLeft=function(t){return q(this,t)},t.prototype.bottomRight=function(t){return C(this,t)},t.prototype.topLeft=function(t){return L(this,t)},t.prototype.topRight=function(t){return F(this,t)},t.prototype.empty=function(){return B(this)},t.prototype.setUnionOfPoints=function(t,r,n){return void 0===r&&(r=0),void 0===n&&(n=t.length),I(this,t,r,n)},t.prototype.setUnionOfPoints$=function(t,r,n){return void 0===r&&(r=0),void 0===n&&(n=t.length>>1),H(this,t,r,n)},t.prototype.contains=function(t){return U(this,t)},t.prototype.containsPoint=function(t){return D(this,t)},t.prototype.containsPoint$=function(t,r){return k(this,t,r)},t.prototype.intersects=function(t){return G(this,t)},t.prototype.intersect=function(t){return N(this,t)},t.prototype.union=function(t){return V(this,t)},t.prototype.unionPoint=function(t){return Y(this,t)},t.prototype.unionPoint$=function(t,r){return W(this,t,r)},t.prototype.unionPoints=function(t,r,n){return void 0===r&&(r=0),void 0===n&&(n=t.length),X(this,t,r,n)},t.prototype.unionPoints$=function(t,r,n){return void 0===r&&(r=0),void 0===n&&(n=t.length>>1),z(this,t,r,n)},t.prototype.inset=function(t,r){return Z(this,t,r)},t.prototype.offset=function(t,r){return K(this,t,r)},t.prototype.scale=function(t,r){return J(this,t,r)},t.prototype.stretch=function(t){return Q(this,t)},t.prototype.shrinkToSquare=function(){return tt(this)},t.prototype.expandToSquare=function(){return rt(this)},t.prototype.sort=function(){return nt(this)},t}();n.Obj=at;var st=function(t){function r(){return t.call(this,new Float32Array(4))||this}return et(r,t),r.create=function(t){var n=new r;return n.set(t),n},r.create$=function(t,n,e,o){var i=new r;return i.set$(t,n,e,o),i},r.ltrb=function(t,n,e,o){var i=new r;return i.setLtrb(t,n,e,o),i},r.lbrt=function(t,n,e,o){var i=new r;return i.setLbrt(t,n,e,o),i},r.lrbt=function(t,n,e,o){var i=new r;return i.setLrbt(t,n,e,o),i},r.ltwh=function(t,n,e,o){var i=new r;return i.setLtwh(t,n,e,o),i},r.lbwh=function(t,n,e,o){var i=new r;return i.setLbwh(t,n,e,o),i},r.unionOfPoints=function(t,n,e){void 0===n&&(n=0),void 0===e&&(e=t.length);var o=new r;return o.setUnionOfPoints(t,n,e),o},r.unionOfPoints$=function(t,n,e){void 0===n&&(n=0),void 0===e&&(e=t.length>>1);var o=new r;return o.setUnionOfPoints$(t,n,e),o},Object.defineProperty(r.prototype,"left",{get:function(){return this.data[0]},set:function(t){this.data[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.data[1]},set:function(t){this.data[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.data[2]},set:function(t){this.data[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.data[3]},set:function(t){this.data[3]=t},enumerable:!0,configurable:!0}),r.prototype.set=function(t){return e(this,t)},r.prototype.set$=function(t,r,n,e){return o(this,t,r,n,e)},r.prototype.add=function(t){return i(this,t)},r.prototype.add$=function(t,r,n,e){return a(this,t,r,n,e)},r.prototype.subtract=function(t){return s(this,t)},r.prototype.subtract$=function(t,r,n,e){return u(this,t,r,n,e)},r.prototype.mulScalar=function(t){return c(this,t)},r.prototype.divScalar=function(t){return p(this,t)},r.prototype.equals=function(t){return f(this,t)},r.prototype.equalsScalar=function(t){return h(this,t)},r.prototype.epsilonEquals=function(t,r){return l(this,t,r)},r.prototype.epsilonEqualsScalar=function(t,r){return d(this,t,r)},r.prototype.toString=function(){return y(this)},r.prototype.setLtrb=function(t,r,n,e){return b(this,t,r,n,e)},r.prototype.setLbrt=function(t,r,n,e){return g(this,t,r,n,e)},r.prototype.setLrbt=function(t,r,n,e){return v(this,t,r,n,e)},r.prototype.setLtwh=function(t,r,n,e){return m(this,t,r,n,e)},r.prototype.setLbwh=function(t,r,n,e){return P(this,t,r,n,e)},r.prototype.isEmpty=function(){return $(this)},r.prototype.isValid=function(){return x(this)},r.prototype.width=function(){return S(this)},r.prototype.height=function(){return _(this)},r.prototype.area=function(){return w(this)},r.prototype.centerX=function(){return T(this)},r.prototype.centerY=function(){return O(this)},r.prototype.center=function(t){return E(this,t)},r.prototype.centerTop=function(t){return R(this,t)},r.prototype.centerBottom=function(t){return j(this,t)},r.prototype.centerLeft=function(t){return M(this,t)},r.prototype.centerRight=function(t){return A(this,t)},r.prototype.bottomLeft=function(t){return q(this,t)},r.prototype.bottomRight=function(t){return C(this,t)},r.prototype.topLeft=function(t){return L(this,t)},r.prototype.topRight=function(t){return F(this,t)},r.prototype.empty=function(){return B(this)},r.prototype.setUnionOfPoints=function(t,r,n){return void 0===r&&(r=0),void 0===n&&(n=t.length),I(this,t,r,n)},r.prototype.setUnionOfPoints$=function(t,r,n){return void 0===r&&(r=0),void 0===n&&(n=t.length>>1),H(this,t,r,n)},r.prototype.contains=function(t){return U(this,t)},r.prototype.containsPoint=function(t){return D(this,t)},r.prototype.containsPoint$=function(t,r){return k(this,t,r)},r.prototype.intersects=function(t){return G(this,t)},r.prototype.intersect=function(t){return N(this,t)},r.prototype.union=function(t){return V(this,t)},r.prototype.unionPoint=function(t){return Y(this,t)},r.prototype.unionPoint$=function(t,r){return W(this,t,r)},r.prototype.unionPoints=function(t,r,n){return void 0===r&&(r=0),void 0===n&&(n=t.length),X(this,t,r,n)},r.prototype.unionPoints$=function(t,r,n){return void 0===r&&(r=0),void 0===n&&(n=t.length>>1),z(this,t,r,n)},r.prototype.inset=function(t,r){return Z(this,t,r)},r.prototype.offset=function(t,r){return K(this,t,r)},r.prototype.scale=function(t,r){return J(this,t,r)},r.prototype.stretch=function(t){return Q(this,t)},r.prototype.shrinkToSquare=function(){return tt(this)},r.prototype.expandToSquare=function(){return rt(this)},r.prototype.sort=function(){return nt(this)},r}(ot["default"]);n.Struct=st;var ut=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return et(r,t),r.create=function(t){return new r(new Float32Array(4*t))},Object.defineProperty(r.prototype,"left",{get:function(){return this.data[this.dataPosition+0]},set:function(t){this.data[this.dataPosition+0]=t;

},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.data[this.dataPosition+1]},set:function(t){this.data[this.dataPosition+1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.data[this.dataPosition+2]},set:function(t){this.data[this.dataPosition+2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.data[this.dataPosition+3]},set:function(t){this.data[this.dataPosition+3]=t},enumerable:!0,configurable:!0}),r.prototype.structLength=function(){return 4},r.prototype.set$=function(t,r,n,e,o){var i=t*this.structLength();this.data[i++]=r,this.data[i++]=n,this.data[i++]=e,this.data[i++]=o},r.prototype.put$=function(t,r,n,e){this.data[this.dataPosition++]=t,this.data[this.dataPosition++]=r,this.data[this.dataPosition++]=n,this.data[this.dataPosition++]=e},r.prototype.$set=function(t){return e(this,t)},r.prototype.$set$=function(t,r,n,e){return o(this,t,r,n,e)},r.prototype.$add=function(t){return i(this,t)},r.prototype.$add$=function(t,r,n,e){return a(this,t,r,n,e)},r.prototype.$subtract=function(t){return s(this,t)},r.prototype.$subtract$=function(t,r,n,e){return u(this,t,r,n,e)},r.prototype.$mulScalar=function(t){return c(this,t)},r.prototype.$divScalar=function(t){return p(this,t)},r.prototype.$equals=function(t){return f(this,t)},r.prototype.$equalsScalar=function(t){return h(this,t)},r.prototype.$epsilonEquals=function(t,r){return l(this,t,r)},r.prototype.$epsilonEqualsScalar=function(t,r){return d(this,t,r)},r.prototype.$toString=function(){return y(this)},r.prototype.$setLtrb=function(t,r,n,e){return b(this,t,r,n,e)},r.prototype.$setLbrt=function(t,r,n,e){return g(this,t,r,n,e)},r.prototype.$setLrbt=function(t,r,n,e){return v(this,t,r,n,e)},r.prototype.$setLtwh=function(t,r,n,e){return m(this,t,r,n,e)},r.prototype.$setLbwh=function(t,r,n,e){return P(this,t,r,n,e)},r.prototype.$isEmpty=function(){return $(this)},r.prototype.$isValid=function(){return x(this)},r.prototype.$width=function(){return S(this)},r.prototype.$height=function(){return _(this)},r.prototype.$area=function(){return w(this)},r.prototype.$centerX=function(){return T(this)},r.prototype.$centerY=function(){return O(this)},r.prototype.$center=function(t){return E(this,t)},r.prototype.$centerTop=function(t){return R(this,t)},r.prototype.$centerBottom=function(t){return j(this,t)},r.prototype.$centerLeft=function(t){return M(this,t)},r.prototype.$centerRight=function(t){return A(this,t)},r.prototype.$bottomLeft=function(t){return q(this,t)},r.prototype.$bottomRight=function(t){return C(this,t)},r.prototype.$topLeft=function(t){return L(this,t)},r.prototype.$topRight=function(t){return F(this,t)},r.prototype.$empty=function(){return B(this)},r.prototype.$setUnionOfPoints=function(t,r,n){return I(this,t,r,n)},r.prototype.$setUnionOfPoints$=function(t,r,n){return H(this,t,r,n)},r.prototype.$contains=function(t){return U(this,t)},r.prototype.$containsPoint=function(t){return D(this,t)},r.prototype.$containsPoint$=function(t,r){return k(this,t,r)},r.prototype.$intersects=function(t){return G(this,t)},r.prototype.$intersect=function(t){return N(this,t)},r.prototype.$union=function(t){return V(this,t)},r.prototype.$unionPoint=function(t){return Y(this,t)},r.prototype.$unionPoint$=function(t,r){return W(this,t,r)},r.prototype.$unionPoints=function(t,r,n){return X(this,t,r,n)},r.prototype.$unionPoints$=function(t,r,n){return z(this,t,r,n)},r.prototype.$inset=function(t,r){return Z(this,t,r)},r.prototype.$offset=function(t,r){return K(this,t,r)},r.prototype.$scale=function(t,r){return J(this,t,r)},r.prototype.$stretch=function(t){return Q(this,t)},r.prototype.$shrinkToSquare=function(){return tt(this)},r.prototype.$expandToSquare=function(){return rt(this)},r.prototype.$sort=function(){return nt(this)},r}(it["default"]);n.Buf=ut},{"../structify/buf":20,"../structify/struct":21}],18:[function(t,r,n){"use strict";function e(t){return 1==t.length?"0"+t:t}function o(t,r){return Math.floor(Math.random()*(r-t+1))+t}Object.defineProperty(n,"__esModule",{value:!0}),n.ArgbRegex=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,n.pad=e,n.randomInt=o},{}],19:[function(t,r,n){"use strict";function e(t,r){t.x=r.x,t.y=r.y}function o(t,r,n){t.x=r,t.y=n}function i(t,r){t.x+=r.x,t.y+=r.y}function a(t,r,n){t.x+=r,t.y+=n}function s(t,r){t.x-=r.x,t.y-=r.y}function u(t,r,n){t.x-=r,t.y-=n}function c(t,r){t.x*=r,t.y*=r}function p(t,r){t.x/=r,t.y/=r}function f(t,r){return t.x===r.x&&t.y===r.y}function h(t,r){return t.x===r&&t.y===r}function l(t,r,n){return Math.abs(t.x-r.x)<=n&&Math.abs(t.y-r.y)<=n}function d(t,r,n){return Math.abs(t.x-r)<=n&&Math.abs(t.y-r)<=n}function y(t){return"{ x: "+t.x+", y: "+t.y+" }"}function b(t){return Math.sqrt(g(t))}function g(t){return t.x*t.x+t.y*t.y}function v(t,r,n){t.x=n.x-r.x,t.y=n.y-r.y}function m(t,r){return t.x*r.x+t.y*r.y}function P(t,r){return t.x*r.y-r.x*t.y}function $(t){p(t,b(t))}function x(t){var r=t.x;t.x=-t.y,t.y=r}function S(t){var r=t.x;t.x=t.y,t.y=-r}var _=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(r,n){function e(){this.constructor=r}t(r,n),r.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();Object.defineProperty(n,"__esModule",{value:!0});var w=t("../structify/struct"),T=t("../structify/buf");n.set=e,n.set$=o,n.add=i,n.add$=a,n.subtract=s,n.subtract$=u,n.mulScalar=c,n.divScalar=p,n.equals=f,n.equalsScalar=h,n.epsilonEquals=l,n.epsilonEqualsScalar=d,n.toString=y,n.length=b,n.length2=g,n.setFromPointToPoint=v,n.dot=m,n.cross=P,n.normalize=$,n.rotateLeft=x,n.rotateRight=S;var O=function(){function t(){}return t.create=function(r){var n=new t;return n.set(r),n},t.create$=function(r,n){var e=new t;return e.set$(r,n),e},t.fromPointToPoint=function(r,n){var e=new t;return e.setFromPointToPoint(r,n),e},t.prototype.set=function(t){return e(this,t)},t.prototype.set$=function(t,r){return o(this,t,r)},t.prototype.add=function(t){return i(this,t)},t.prototype.add$=function(t,r){return a(this,t,r)},t.prototype.subtract=function(t){return s(this,t)},t.prototype.subtract$=function(t,r){return u(this,t,r)},t.prototype.mulScalar=function(t){return c(this,t)},t.prototype.divScalar=function(t){return p(this,t)},t.prototype.equals=function(t){return f(this,t)},t.prototype.equalsScalar=function(t){return h(this,t)},t.prototype.epsilonEquals=function(t,r){return l(this,t,r)},t.prototype.epsilonEqualsScalar=function(t,r){return d(this,t,r)},t.prototype.toString=function(){return y(this)},t.prototype.length=function(){return b(this)},t.prototype.length2=function(){return g(this)},t.prototype.setFromPointToPoint=function(t,r){return v(this,t,r)},t.prototype.dot=function(t){return m(this,t)},t.prototype.cross=function(t){return P(this,t)},t.prototype.normalize=function(){return $(this)},t.prototype.rotateLeft=function(){return x(this)},t.prototype.rotateRight=function(){return S(this)},t}();n.Obj=O;var E=function(t){function r(){return t.call(this,new Float32Array(2))||this}return _(r,t),r.create=function(t){var n=new r;return n.set(t),n},r.create$=function(t,n){var e=new r;return e.set$(t,n),e},r.fromPointToPoint=function(t,n){var e=new r;return e.setFromPointToPoint(t,n),e},Object.defineProperty(r.prototype,"x",{get:function(){return this.data[0]},set:function(t){this.data[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.data[1]},set:function(t){this.data[1]=t},enumerable:!0,configurable:!0}),r.prototype.set=function(t){return e(this,t)},r.prototype.set$=function(t,r){return o(this,t,r)},r.prototype.add=function(t){return i(this,t)},r.prototype.add$=function(t,r){return a(this,t,r)},r.prototype.subtract=function(t){return s(this,t)},r.prototype.subtract$=function(t,r){return u(this,t,r)},r.prototype.mulScalar=function(t){return c(this,t)},r.prototype.divScalar=function(t){return p(this,t)},r.prototype.equals=function(t){return f(this,t)},r.prototype.equalsScalar=function(t){return h(this,t)},r.prototype.epsilonEquals=function(t,r){return l(this,t,r)},r.prototype.epsilonEqualsScalar=function(t,r){return d(this,t,r)},r.prototype.toString=function(){return y(this)},r.prototype.length=function(){return b(this)},r.prototype.length2=function(){return g(this)},r.prototype.setFromPointToPoint=function(t,r){return v(this,t,r)},r.prototype.dot=function(t){return m(this,t)},r.prototype.cross=function(t){return P(this,t)},r.prototype.normalize=function(){return $(this)},r.prototype.rotateLeft=function(){return x(this)},r.prototype.rotateRight=function(){return S(this)},r}(w["default"]);n.Struct=E;var R=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return _(r,t),r.create=function(t){return new r(new Float32Array(2*t))},Object.defineProperty(r.prototype,"x",{get:function(){return this.data[this.dataPosition+0]},set:function(t){this.data[this.dataPosition+0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.data[this.dataPosition+1]},set:function(t){this.data[this.dataPosition+1]=t},enumerable:!0,configurable:!0}),r.prototype.structLength=function(){return 2},r.prototype.set$=function(t,r,n){var e=t*this.structLength();this.data[e++]=r,this.data[e++]=n},r.prototype.put$=function(t,r){this.data[this.dataPosition++]=t,this.data[this.dataPosition++]=r},r.prototype.$set=function(t){return e(this,t)},r.prototype.$set$=function(t,r){return o(this,t,r)},r.prototype.$add=function(t){return i(this,t)},r.prototype.$add$=function(t,r){return a(this,t,r)},r.prototype.$subtract=function(t){return s(this,t)},r.prototype.$subtract$=function(t,r){return u(this,t,r)},r.prototype.$mulScalar=function(t){return c(this,t)},r.prototype.$divScalar=function(t){return p(this,t)},r.prototype.$equals=function(t){return f(this,t)},r.prototype.$equalsScalar=function(t){return h(this,t)},r.prototype.$epsilonEquals=function(t,r){return l(this,t,r)},r.prototype.$epsilonEqualsScalar=function(t,r){return d(this,t,r)},r.prototype.$toString=function(){return y(this)},r.prototype.$length=function(){return b(this)},r.prototype.$length2=function(){return g(this)},r.prototype.$setFromPointToPoint=function(t,r){return v(this,t,r)},r.prototype.$dot=function(t){return m(this,t)},r.prototype.$cross=function(t){return P(this,t)},r.prototype.$normalize=function(){return $(this)},r.prototype.$rotateLeft=function(){return x(this)},r.prototype.$rotateRight=function(){return S(this)},r}(T["default"]);n.Buf=R},{"../structify/buf":20,"../structify/struct":21}],20:[function(t,r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t,r){void 0===r&&(r=0),this.data=t,this.dataPosition=r*this.structLength()}return t.prototype.position=function(){return this.dataPosition/this.structLength()>>0},t.prototype.capacity=function(){return this.data.length/this.structLength()>>0},t.prototype.hasValidPosition=function(){return 0<=this.dataPosition&&this.dataPosition<this.data.length},t.prototype.moveToPosition=function(t){return this.dataPosition=t*this.structLength(),this.hasValidPosition()},t.prototype.moveToFirst=function(){return this.dataPosition=0,this.dataPosition<this.data.length},t.prototype.moveToNext=function(){return this.dataPosition+=this.structLength(),this.hasValidPosition()},t.prototype.moveToPrevous=function(){return this.dataPosition-=this.structLength(),this.hasValidPosition()},t.prototype.moveToLast=function(){return this.data.length?(this.dataPosition=this.data.length-this.structLength(),!0):(this.dataPosition=0,!1)},t.prototype.setBuffer=function(t,r,n){for(var e=r.dataPosition,o=t*this.structLength();n--;)for(var i=this.structLength();i--;)this.data[o++]=r.data[e++]},t.prototype.set=function(t,r){for(var n=this.structLength(),e=0,o=t*n;n--;)this.data[o++]=r.data[e++]},t.prototype.setEach=function(t){for(var r=0,n=this.data.length;n--;)for(var e=0,o=this.structLength();o--;)this.data[r++]=t.data[e++]},t.prototype.put=function(t){for(var r=this.structLength(),n=0;r--;)this.data[this.dataPosition++]=t.data[n++]},t.prototype.putBuffer=function(t,r){for(void 0===r&&(r=t.capacity()-t.position());r--;)for(var n=this.structLength();n--;)this.data[this.dataPosition++]=t.data[t.dataPosition++]},t.prototype.equals=function(t){if(this.data.length!==t.data.length)return!1;for(var r=0;r<this.data.length;r++)if(this.data[r]!==t.data[r])return!1;return!0},t.prototype.equalsScalar=function(t){for(var r=0;r<this.data.length;r++)if(this.data[r]!==t)return!1;return!0},t.prototype.epsilonEquals=function(t,r){if(this.data.length!==t.data.length)return!1;for(var n=0;n<this.data.length;n++)if(Math.abs(this.data[n]-t.data[n])>r)return!1;return!0},t.prototype.epsilonEqualsScalar=function(t,r,n){for(var e=0;e<this.data.length;e++)if(Math.abs(this.data[e]-r)>n)return!1;return!0},t}();n["default"]=e},{}],21:[function(t,r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t){this.data=t}return t}();n["default"]=e},{}],22:[function(t,r,n){"use strict";var e=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(r,n){function e(){this.constructor=r}t(r,n),r.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t("./struct/vec2"),i=t("./struct/rect"),a=t("./struct/mat2d"),s=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return e(r,t),r.create=function(t){return new r(new Float32Array(2*t))},r.prototype.calculateBounds=function(t,r){return void 0===t&&(t=0),void 0===r&&(r=this.capacity()),i.Obj.unionOfPoints$(this.data,t*this.structLength(),r)},r.prototype.contains=function(t,r,n){return void 0===r&&(r=0),void 0===n&&(n=this.capacity()),this.contains$(t.x,t.y,r,n)},r.prototype.contains$=function(t,r,n,e){void 0===n&&(n=0),void 0===e&&(e=this.capacity());var o=!1;return this.forEachEdge(function(n,e,i,a){e>r!=a>r&&(i-n)*(r-e)/(a-e)+n>t&&(o=!o)},n,e),o},r.prototype.offset=function(t,r,n){void 0===r&&(r=0),void 0===n&&(n=this.capacity()),this.offset$(t.x,t.y,r,n)},r.prototype.offset$=function(t,r,n,e){void 0===n&&(n=0),void 0===e&&(e=this.capacity());for(var o=n*this.structLength(),i=0;e>=i;i++)this.data[o++]+=t,this.data[o++]+=r},r.prototype.transform=function(t,r,n){void 0===r&&(r=0),void 0===n&&(n=this.capacity());var e=r*this.structLength();a.mapPoints(t,this.data,e,n,this.data,e)},r.prototype.forEachEdge=function(t,r,n){void 0===r&&(r=0),void 0===n&&(n=this.capacity());for(var e=this.data,o=this.structLength(),i=o*r,a=o*(r+n),s=e[a-2],u=e[a-1],c=0,p=0;a>i;)c=e[i++],p=e[i++],t(s,u,c,p),s=c,u=p},r}(o.Buf);n["default"]=s},{"./struct/mat2d":14,"./struct/rect":17,"./struct/vec2":19}],23:[function(t,r,n){"use strict";function e(t,r,n){var e=r.getImageData(0,0,n.cols,n.rows).data,o=new u.Buf(e),i=n.hexels;i.moveToFirst();do o.$isTransparent()||i.$blend(o);while(o.moveToNext()&&i.moveToNext())}function o(t,r,n,e){var o=t.hexels;o.moveToFirst();var i=u.Buf.create(o.capacity());do o.$equals(r)||i.$set(o);while(o.moveToNext()&&i.moveToNext());var a=new Uint8ClampedArray(i.data.buffer),s=new ImageData(a,t.cols,t.rows);e.clearRect(0,0,n.width,n.height),e.putImageData(s,0,0)}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./hex"),a=t("../graphics/bit"),s=t("../graphics/struct/color"),u=t("../graphics/struct/color"),c=t("../graphics/struct/line"),p=t("../graphics/struct/point"),f=t("../graphics/struct/rect");n.H_WIDTH=Math.sqrt(3),n.H_HEIGHT=2,n.H_RIGHT=n.H_WIDTH/2,n.H_UP=n.H_HEIGHT/4;var h=function(){function t(t,r,e){void 0===e&&(e=u.Buf.create(t*r)),this.bounds=new f.Obj,this.hasGradient=!0,this.cols=t,this.rows=r,this.hexels=e;var o=n.H_WIDTH*(this.cols+.5),i=n.H_HEIGHT*(.75*this.rows+.25),a=-n.H_WIDTH/2,s=i+n.H_HEIGHT/2;this.bounds.setLtwh(a,s,o,i)}return t.prototype.cubeAt=function(t){var r=t/this.cols>>0,n=t%this.cols-(r>>1);return new i.Hex(n,r)},t.prototype.offsetAt=function(t){var r=new p.Obj;return r.y=t/this.cols>>0,r.x=t%this.cols,r},t.prototype.indexOfHexel=function(t){var r=this.pointToHex(t).round();return this.indexOfCube(r)},t.prototype.indexOfCube=function(t){if(0<=t.r&&t.r<this.rows){var r=t.r>>1;if(-r<=t.q&&t.q<this.cols-r)return this.cols*t.r+t.q+r}return-1},t.prototype.indexOfOffset=function(t){return 0<=t.x&&t.x<this.cols&&0<=t.y&&t.y<this.rows?this.cols*t.y+t.x:-1},t.prototype.hexToPoint=function(t){var r=new p.Obj;return r.x=n.H_WIDTH*(t.q+t.r/2),r.y=.75*n.H_HEIGHT*t.r,r.y=this.bounds.height()-r.y,r},t.prototype.pointToHex=function(t){var r=t.x,e=this.bounds.height()-t.y,o=(n.H_WIDTH*r-e)/3,a=n.H_HEIGHT*e/3;return new i.Hex(o,a)},t.prototype.forEachCenterVertex=function(t,r){void 0===r&&(r=this.rows);for(var e=0,o=f.height(this.bounds),i=0;r>i;i++)for(var a=o-n.H_HEIGHT*i*.75,s=i/2-(i>>1),u=s+this.cols,c=s;u>c;c++){var p=n.H_WIDTH*c;t(p,a,e++)}},t.prototype.forEachCubicCoordinate=function(t){for(var r=0;r<this.rows;r++)for(var n=r>>1,e=-n;e<this.cols-n;e++)t(new i.Hex(e,r))},t.prototype.forEachOffsetCoordinate=function(t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.cols;n++)t(p.Obj.create$(n,r))},t.prototype.clear=function(t){this.hexels.setEach(t)},t.prototype.addBinaryImage=function(t){var r=this;t.color.isOpaque()?t.forEachSetBit(this.cols,function(n){r.hexels.moveToPosition(n)&&r.hexels.$set(t.color)}):t.forEachSetBit(this.cols,function(n){r.hexels.moveToPosition(n)&&r.hexels.$blend(t.color)})},t.prototype.addLine=function(t,r,n,e){var o=this;void 0===e&&(e=this.bitArray());var i=.5*r;return this.forEachCenterVertex(function(r,a,s){c.contains$(t,r,a,i)&&o.hexels.moveToPosition(s)&&(o.hexels.$blend(n),e.set(s))}),e},t.prototype.addEllipse=function(t,r,n){var e=this;return void 0===n&&(n=this.bitArray()),this.forEachCenterVertex(function(o,i,a){t.contains$(o,i)&&e.hexels.moveToPosition(a)&&(e.hexels.$blend(r),n.set(a))}),n},t.prototype.addShape=function(t,r,n){var e=this;return void 0===n&&(n=this.bitArray()),this.forEachCenterVertex(function(o,i,a){t.contains$(o,i)&&e.hexels.moveToPosition(a)&&(e.hexels.$blend(r),n.set(a))}),n},t.prototype.beginStroke=function(t,r,n,e){var o=this;return void 0===e&&(e=this.bitArray()),this.forEachHexelInRange(t,r,function(t){o.hexels.moveToPosition(t)&&(o.hexels.$blend(n),e.set(t))}),e},t.prototype.continueStroke=function(t,r,n,e,o){var i=this;void 0===o&&(o=this.bitArray());var a=t;return this.forEachCubeInLine(t,r,function(t){i.appendHexagon(a,t,n,e,o),a=t}),o},t.prototype.appendHexagon=function(t,r,n,e,o){if(void 0===o&&(o=this.bitArray()),0===n){var a=this.indexOfCube(r);-1!==a&&!o.get(a)&&this.hexels.moveToPosition(a)&&(this.hexels.$blend(e),o.set(a))}else{var s=t.directionToNeighbor(r);if(-1===s)return;var u=new i.Hex;u.add(i.Directions[s>0?s-1:5]),u.mulScalar(n),u.add(r);var a=this.indexOfCube(u);-1!==a&&!o.get(a)&&this.hexels.moveToPosition(a)&&(this.hexels.$blend(e),o.set(a));for(var c=s+1;s+3>c;c++)for(var p=0;n>p;p++){u.neighbor(c%6,u);var f=this.indexOfCube(u);-1!==f&&!o.get(f)&&this.hexels.moveToPosition(f)&&(this.hexels.$blend(e),o.set(f))}}},t.prototype.forEachHexelInRange=function(t,r,n){for(var e=new i.Hex,o=-r;r>=o;o++){var a=Math.max(-r,-o-r),s=Math.min(r,-o+r);e.q=t.q+o;for(var u=a;s>=u;u++){e.r=t.r+u;var c=this.indexOfCube(e);-1!==c&&n(c)}}},t.prototype.forEachHexelInRing=function(t,r,n){if(0===r){var e=this.indexOfCube(t);-1!==e&&n(e)}else{var o=new i.Hex;o.add(i.Directions[4]),o.mulScalar(r),o.add(t);for(var a=0;6>a;a++)for(var s=0;r>s;s++){var e=this.indexOfCube(o);-1!==e&&n(e),o.neighbor(a,o)}}},t.prototype.forEachCubeInLine=function(t,r,n){for(var e=new i.Hex(r.q-t.q,r.r-t.r),o=e.distanceToOrigin(),a=1/Math.max(o,1),s=0;o>=s;s++){var u=a*s,c=new i.Hex;c.q=t.q+e.q*u,c.r=t.r+e.r*u,c.s=t.s+e.s*u,n(c.round())}},t.prototype.floodFill=function(t,r,n){if(void 0===n&&(n=this.bitArray()),this.hexels.moveToPosition(t)){var e=this.hexels,o=new u.Obj;if(o.set(e),o.blend(r),!o.equals(e))return this.floodFillScanLine(t,o.toRgbaInt(),e.$toRgbaInt(),n)}return n},t.prototype.floodFillScanLine=function(t,r,n,e){void 0===e&&(e=this.bitArray());var o,i,a,u,c,f,h,l=this.cols,d=this.rows,y=this.hexels.data,b=[],g=this.offsetAt(t);for(b.push(g);b.length>0;){for(g=b.pop(),f=g.x,h=g.y,o=h*l,i=o-l,a=o+l,u=!1,c=!1;f>=0&&s.getRgba(y,f+o)===n;)f--;for(0==(1&h)&&f>=0&&(h>0&&s.getRgba(y,f+i)===n&&(b.push(p.Obj.create$(f,h-1)),u=!0),d-1>h&&s.getRgba(y,f+a)===n&&(b.push(p.Obj.create$(f,h+1)),c=!0)),f++;l>f&&s.getRgba(y,f+o)===n;f++){var v=f+o;s.setRgba(y,v,r),e.set(v),h>0&&(u||s.getRgba(y,f+i)!==n?u&&s.getRgba(y,f+i)!==n&&(u=!1):(b.push(p.Obj.create$(f,h-1)),u=!0)),d-1>h&&(c||s.getRgba(y,f+a)!==n?c&&s.getRgba(y,f+a)!==n&&(c=!1):(b.push(p.Obj.create$(f,h+1)),c=!0))}1&h&&l>f&&(!u&&h>0&&s.getRgba(y,f+i)===n&&b.push(p.Obj.create$(f,h-1)),!c&&d-1>h&&s.getRgba(y,f+a)===n&&b.push(p.Obj.create$(f,h+1)))}return e},t.prototype.bitArray=function(){return a.createBitArray(this.hexels.capacity())},t}();n.Grid=h,n.copyPixelsToGrid=e,n.copyHexelsToCanvas=o},{"../graphics/bit":1,"../graphics/struct/color":10,"../graphics/struct/line":13,"../graphics/struct/point":16,"../graphics/struct/rect":17,"./hex":24}],24:[function(t,r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function t(t,r,n){void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=-t-r),this.q=t,this.r=r,this.s=n}return t.fromCube=function(r){return new t(r.q,r.r,r.s)},t.prototype.set=function(t,r,n){void 0===n&&(n=-t-r),this.q=t,this.r=r,this.s=n},t.prototype.distanceToCube=function(t){return Math.max(Math.abs(this.q-t.q),Math.abs(this.r-t.r),Math.abs(this.s-t.s))},t.prototype.distanceToOrigin=function(){return Math.max(Math.abs(this.q),Math.abs(this.r),Math.abs(this.s))},t.prototype.neighbor=function(r,e){return void 0===e&&(e=new t),this.add(n.Directions[r],e)},t.prototype.directionToNeighbor=function(r){for(var e=r.subtract(this,new t),o=0;o<n.Directions.length;o++)if(n.Directions[o].equals(e))return o;return-1},t.prototype.forEachNeighbor=function(t){for(var r=0;r<n.Directions.length;r++)t(this.neighbor(r))},t.prototype.add=function(t,r){return void 0===r&&(r=this),r.q=this.q+t.q,r.r=this.r+t.r,r.s=this.s+t.s,r},t.prototype.subtract=function(t,r){return void 0===r&&(r=this),r.q=this.q-t.q,r.r=this.r-t.r,r.s=this.s-t.s,r},t.prototype.mulScalar=function(t,r){return void 0===r&&(r=this),r.q=this.q*t,r.r=this.r*t,r.s=this.s*t,r},t.prototype.divScalar=function(t,r){return void 0===r&&(r=this),r.q=this.q/t,r.r=this.r/t,r.s=this.s/t,r},t.prototype.round=function(t){void 0===t&&(t=this);var r=this.q,n=this.r,e=this.s;t.q=Math.round(r),t.r=Math.round(n),t.s=Math.round(e);var o=Math.abs(t.q-r),i=Math.abs(t.r-n),a=Math.abs(t.s-e);return o>i&&o>a?t.q=-t.r-t.s:i>a?t.r=-t.q-t.s:t.s=-t.q-t.r,t},t.prototype.equals=function(t){return this.q===t.q&&this.r===t.r&&this.s===t.s},t}();n.Hex=e,n.Directions=[new e(1,-1,0),new e(1,0,-1),new e(0,1,-1),new e(-1,1,0),new e(-1,0,1),new e(0,-1,1)]},{}],25:[function(t,r,n){"use strict";function e(){Y.length=0,V.length=0,X=0}function o(t){function r(t){0===t.button&&t.altKey&&(it.val.setRandom(),T(it.val))}if(2!==t.src.button){var n=1===t.src.button?Z:yt;switch(t.status){case 0:u(),r(t.src),n.onStart&&n.onStart(t);break;case 1:n.onMove&&n.onMove(t);break;case 3:n.onLeave&&n.onLeave(t);break;case 2:n.onEnd&&n.onEnd(t)}}}function i(t){var r=yt;switch(t.pointers.length>1?r=z:z.onEnd(t),t.status){case 0:u(),r.onStart&&r.onStart(t);break;case 1:r.onMove&&r.onMove(t);break;case 3:r.onLeave&&r.onLeave(t);break;case 2:r.onEnd&&r.onEnd(t)}}function a(t){var r=H.Struct.create(it.val),n=C.BinaryImage.make(t,Pt.cols,Pt.rows,r);if(n){V.push(n),Y.length=0,X+=n.data.data.length;for(var e=function(){var t=V.shift();H.isOpaque(t.color)?t.forEachSetBit(Pt.cols,function(r){$t.set(r,t.color)}):t.forEachSetBit(Pt.cols,function(r){$t.moveToPosition(r)&&$t.$blend(t.color)}),X-=t.data.data.length};X>W;)e()}}function s(t,r){t.addEventListener("DOMMouseScroll",r,!1),t.addEventListener("mousewheel",r,!1)}function u(){G&&($t.moveToFirst(),Pt.hexels.moveToFirst(),$t.putBuffer(Pt.hexels),e(),G=!1)}function c(){function t(){var e=r.outerWidth(),o=r.innerHeight()-n.innerHeight();o>0&&(St.resize(e,o)||xt.needToRender)&&(xt.needToRender=!1,xt.onDrawFrame()),requestAnimationFrame(t)}var r=$("body"),n=$("#toolbar");t()}function p(t,r){t!=yt&&($(bt).children("i").addClass("md-inactive").removeClass("md-active"),$(r).children("i").addClass("md-active").removeClass("md-inactive"),yt=t,bt=r)}function f(){h(),l(),d(),y(),b(),S(),_(),g(),v(),m(),O()}function h(){$("#color-picker").spectrum({color:it.unparsed.val,flat:!1,showInput:!1,showInitial:!1,allowEmpty:!1,showAlpha:!0,disabled:!1,showPalette:!0,showPaletteOnly:!0,togglePaletteOnly:!0,showSelectionPalette:!1,clickoutFiresChange:!0,hideAfterPaletteSelect:!0,preferredFormat:"rgb",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]],change:function(t){if(t){t.setAlpha(dt);var r=t.toHex8String();$(this).spectrum("set",r),it.val.setFromArgbString(r),it.unparsed.val=r,xt.color=it.val}},hide:function(t){dt=it.val.a/255}}),$("#color-picker").on("dragstop.spectrum",function(t,r){dt=r.getAlpha()})}function l(){$("#brush").click(function(){p(K,"#brush")});var t=new Slider("input[name=brushRadius]",{min:1,max:50,step:1,value:at.unlerped.val,tooltip:"show"});t.on("slideStop",function(r){p(K,"#brush"),at.val=t.getValue()})}function d(){$("#line").click(function(){p(tt,"#line")});var t=new Slider("input[name=lineThickness]",{min:1,max:100,step:1,value:st.unlerped.val,tooltip:"show"});t.on("slideStop",function(r){p(tt,"#line"),st.val=t.getValue(),xt.lineThickness=st.val})}function y(){function t(t){r!=t&&($("#shape").children("i").removeClass(r).addClass(t),r=t)}var r="icon-circle";$("#shape").click(function(){"icon-circle"==r?p(rt,"#shape"):p(nt,"#shape")}),$("input[name=maintainAspect]").prop("checked",ut.val).change(function(){ut.val=this.checked?!0:!1}),$("#circle").click(function(){p(rt,"#shape"),t("icon-circle")});for(var n=["triangle","square","diamond","pentagon","hexagon","star","heart","flower","bat"],e=function(r){$("#"+n[r]).click(function(){gt=N[r],p(nt,"#shape"),t("icon-"+n[r])})},o=0;o<n.length;o++)e(o)}function b(){function t(t,e){n!=e&&($("#other").children("i").removeClass(n).addClass(e),n=e,r=t)}var r=J,n="icon-bucket";$("#other").click(function(){p(r,"#other")}),$("#color-sampler").click(function(){p(Q,"#other"),t(Q,"icon-eyedropper")}),$("#paint-bucket").click(function(){p(J,"#other"),t(J,"icon-bucket")}),$("#pan-tool").click(function(){p(Z,"#other"),t(Z,"icon-pan")})}function g(){function t(){var t='<div class="vex-custom-field-wrapper">\n    <div class="vex-custom-input-wrapper">\n        <label for="enableShadows">Enable shadows:</label>\n        <input name="enableShadows" type="checkbox" '+(ct.val?"checked":"")+'/>\n    </div>\n</div>\n<div class="vex-custom-field-wrapper">\n    <div class="vex-custom-input-wrapper">\n        <label for="zoomSpeed">Zoom speed:</label>\n        <input name="zoomSpeed" type="number" min="1" max="1000" />\n    </div>\n</div>\n<div class="vex-custom-field-wrapper">\n    <div class="vex-custom-input-wrapper">\n          <label for="gridWidth">Grid width:</label>\n          <input name="gridWidth" type="number" min="5" max="10" />\n    </div>\n</div>\n<div class="vex-custom-field-wrapper">\n    <div class="vex-custom-input-wrapper">\n          <label for="gridHeight">Grid height:</label>\n          <input name="gridHeight" type="number" min="5" max="10" />\n    </div>\n</div>';vex.dialog.open({message:"Options",input:t,callback:r}),n()}function r(t){if(t&&(t.enableShadows?ct.val||(Pt.hasGradient=ct.val=!0,xt.applyGradientChanges()):ct.val&&(Pt.hasGradient=ct.val=!1,xt.applyGradientChanges()),t.zoomSpeed&&(pt.val=parseInt(t.zoomSpeed)),t.gridWidth!=ft.uninterpolated.val||t.gridHeight!=ht.uninterpolated.val)){ft.val=parseInt(t.gridWidth),ht.val=parseInt(t.gridHeight);var r=_t.width=ft.val,n=_t.height=ht.val,o=Pt;Pt=new k.Grid(r,n),Pt.clear(et),Pt.hasGradient=o.hasGradient;for(var i=new Uint32Array(o.hexels.data.buffer),a=new Uint32Array(Pt.hexels.data.buffer),s=Math.min(n,o.rows),u=Math.min(r,o.cols),c=0;s>c;c++)for(var p=0;u>p;p++)a[c*r+p]=i[c*o.cols+p];xt.programs.hexel.setLayout(mt,Pt),xt.projection=new U.Projection(Pt.bounds,1,Math.max(Pt.rows,Pt.cols)),xt.projection.fillViewport(vt.clientWidth,vt.clientHeight),xt.needToRender=!0,e(),$t=H.Buf.create(Pt.hexels.capacity()),Pt.hexels.moveToFirst(),$t.putBuffer(Pt.hexels)}}function n(){$("input[name=zoomSpeed]").slider({min:1,max:1e3,step:1,value:pt.unlerped.val,tooltip:"hide"}),$("input[name=gridWidth]").slider({ticks:[5,6,7,8,9],ticks_labels:["32","64","128","256","512"],min:5,max:9,step:1,value:ft.uninterpolated.val,tooltip:"hide"}),$("input[name=gridHeight]").slider({ticks:[5,6,7,8,9],ticks_labels:["32","64","128","256","512"],min:5,max:9,step:1,value:ht.uninterpolated.val,tooltip:"hide"})}$("#options").click(t)}function v(){function t(){var t="Upload image onto this "+Pt.cols+"x"+Pt.rows+" grid.",n='<div class="vex-custom-field-wrapper">\n    <div class="vex-custom-input-wrapper">\n        <label for="imagefile">Image:</label>\n        <input name="imagefile" type="file" accept="image/*" required>\n    </div>\n    <div class="vex-custom-input-wrapper">\n        <label for="x">X (hexels from left):</label>\n        <input name="x" type="number" min="0" max="'+Pt.cols+'">\n    </div>\n    <div class="vex-custom-input-wrapper">\n        <label for="y">Y (hexels from top):</label>\n        <input name="y" type="number" min="0" max="'+Pt.rows+'">\n    </div>\n    <div class="vex-custom-input-wrapper">\n        <label for="width">Width (in hexels):</label>\n        <input name="width" type="number" min="0">\n    </div>\n    <div class="vex-custom-input-wrapper">\n        <label for="height">Height (in hexels):</label>\n        <input name="height" type="number" min="0">\n    </div>\n</div>';vex.dialog.open({message:t,input:n,callback:r}),$("input[name=imagefile]").change(function(t){if(t.target.files[0]){var r=t.target.files[0];e(r,function(t){var r=_t.width/t.width,n=_t.height/t.height,e=Math.min(r,n),i=Math.round(t.width*e),a=Math.round(t.height*e),s=Math.round((_t.width-i)/2),u=Math.round((_t.height-a)/2);$("input[name=x]").val(s),$("input[name=y]").val(u),$("input[name=width]").val(i),$("input[name=height]").val(a),o=t})}})}function r(t){if(o&&t){var r=t.x,e=t.y,i=t.width,a=t.height;n(_t,wt,o,r,e,i,a),k.copyPixelsToGrid(_t,wt,Pt),xt.applyColorChanges(),G=!0}}function n(t,r,n,e,o,i,a){void 0===e&&(e=0),void 0===o&&(o=0),void 0===i&&(i=Pt.cols),void 0===a&&(a=Pt.rows),r.clearRect(0,0,t.width,t.height),r.drawImage(n,0,0,n.width,n.height,e,o,i,a)}function e(t,r){var n=new FileReader;n.onload=function(t){var n=new Image;n.onload=function(){r(n)},n.src=t.target.result},n.readAsDataURL(t)}var o;$("#upload").click(t)}function m(){function t(){var t="Download hexel art as a "+Pt.cols+"x"+Pt.rows+" image file.",n='<div class="vex-custom-field-wrapper">\n    <div class="vex-custom-input-wrapper">\n        <label for="transparentColor">Transparent color:</label>\n        <input name="transparentColor" type="text" style="display: none" />\n    </div>\n    <br/>\n    <div class="vex-custom-input-wrapper">\n        <label for="filename">Filename:</label>\n        <input name="filename" type="text" value="'+lt.val+'"/>\n    </div>\n</div>\n<p> Note: an image viewer will interpret the file as pixel art, but if you reupload the file to this app, you will be able to view and modify the original hexel art.</p>';

vex.dialog.open({message:t,input:n,callback:r}),$("input[name=transparentColor]").spectrum({color:H.equalsScalar(ot,0)?null:H.toArgbString(ot),flat:!1,showInput:!0,showInitial:!1,allowEmpty:!0,disabled:!1,showPalette:!0,showPaletteOnly:!0,togglePaletteOnly:!0,showSelectionPalette:!1,clickoutFiresChange:!0,hideAfterPaletteSelect:!0,preferredFormat:"rgb",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]],change:function(t){t?ot.setFromArgbString(t.toHex8String()):ot.set$(0,0,0,0)}})}function r(t){t&&t.filename&&(lt.val=t.filename,k.copyHexelsToCanvas(Pt,ot,_t,wt),_t.toBlob(function(t){saveAs(t,lt.val,!0)},"image/png"))}$("#download").click(t)}function P(){if(V.length>0){if(G)G=!1;else{var t=V.pop();Y.push(t),X-=t.data.data.length}Pt.hexels.moveToFirst(),$t.moveToFirst(),Pt.hexels.putBuffer($t);for(var r=0,n=V;r<n.length;r++){var e=n[r];Pt.addBinaryImage(e)}xt.applyColorChanges()}}function x(){if(Y.length>0){var t=Y.pop();V.push(t),X+=t.data.data.length,Pt.addBinaryImage(t),xt.applyColorChanges()}}function S(){$("#undo").click(P)}function _(){$("#redo").click(x)}function w(t){return 1<<t}function T(t){it.val.set(t),it.unparsed.val=H.toArgbString(t),$("#color-picker").spectrum("set",it.unparsed.val),xt.color=it.val}function O(){var t=-1,r=!1;$(document).on("keydown",function(r){t=r.which}).on("keyup",function(n){t=-1,r=!1}).on("keypress",function(n){if(!r){var e=String.fromCharCode(t).toLowerCase();(n.metaKey||n.ctrlKey)&&("z"===e?(n.shiftKey?x():P(),r=!0):"y"===e&&(x(),r=!0))}})}Object.defineProperty(n,"__esModule",{value:!0});var E=t("./renderer"),R=t("./polygons"),j=t("./options"),M=t("./graphics/model"),A=t("./graphics/shape"),q=t("./graphics/ellipse"),C=t("./graphics/bit"),L=t("./graphics/struct/point"),F=t("./graphics/struct/rect"),B=t("./graphics/struct/line"),I=t("./graphics/struct/vec2"),H=t("./graphics/struct/color"),U=t("./graphics/rendering/projection"),D=t("./graphics/rendering/surface"),k=t("./hexel/grid");vex.defaultOptions.className="vex-theme-wireframe";var G,N=[M.Model.polygon(3),M.Model.square(),M.Model.diamond(),M.Model.polygon(5),M.Model.polygon(6),M.Model.star5(),M.Model.fromSource(R.heart),M.Model.fromSource(R.flower),M.Model.fromSource(R.bat)],V=[],Y=[],W=15e4,X=0,z={onStart:function(t){var r=t.pointers[0],n=t.pointers[1];this.previousSpan=L.distance(r,n),this.previousFocus=L.Obj.midpoint(r,n)},onMove:function(t){if(!this.previousFocus)return void this.onStart(t);var r=xt.projection,n=t.pointers[0],e=t.pointers[1],o=L.distance(n,e),i=r.applyChangeInZoom(o/this.previousSpan);this.previousSpan=o/i;var a=L.Obj.midpoint(n,e),s=I.Obj.fromPointToPoint(a,this.previousFocus);s.divScalar(i),r.applyChangeInPan(s),this.previousFocus.x=a.x+s.x,this.previousFocus.y=a.y+s.y,r.applyChangesToMatrix(),xt.needToRender=!0},onEnd:function(t){this.previousFocus=null}},Z={onStart:function(t){this.previous=t.pointers[0]},onMove:function(t){if(!this.previous)return void this.onStart(t);var r=t.pointers[0],n=I.Obj.fromPointToPoint(r,this.previous);xt.projection.panByVector(n),xt.needToRender=!0,this.previous.x=r.x+n.x,this.previous.y=r.y+n.y},onEnd:function(t){this.previous=null}},K={onStart:function(t){var r=Pt.pointToHex(t.pointers[0]).round(),n=Pt.indexOfCube(r);-1!==n&&(this.record=Pt.beginStroke(r,at.val,it.val),xt.applyColorChanges(),this.previous=r)},onMove:function(t){if(this.previous){var r=Pt.pointToHex(t.pointers[0]).round();r.equals(this.previous)||(Pt.continueStroke(this.previous,r,at.val,it.val,this.record),xt.applyColorChanges(),this.previous=r)}else this.onStart(t)},onEnd:function(t){this.record&&a(this.record),this.previous=null,this.record=null}},J={onStart:function(t){if(!xt.needToRender){var r=t.pointers[0],n=Pt.indexOfHexel(r);if(-1!==n){var e=Pt.floodFill(n,it.val);a(e),xt.applyColorChanges()}}}},Q={onStart:function(t){this.onMove(t)},onMove:function(t){var r=t.pointers[0],n=Pt.indexOfHexel(r);Pt.hexels.moveToPosition(n)&&(T(Pt.hexels),dt=it.val.a/255)}},tt={onStart:function(t){this.start=t.pointers[0]},onMove:function(t){if(this.start){var r=t.pointers[0],n=xt.drawables;n.line||(n.line=new B.Struct),n.line.setThrough(this.start,r),xt.needToRender=!0}},onEnd:function(t){if(this.start=null,xt.drawables.line){var r=Pt.addLine(xt.drawables.line,st.val,it.val);a(r),xt.drawables.line=null,xt.applyColorChanges()}}},rt={onStart:function(t){this.start=t.pointers[0]},onMove:function(t){if(this.start){var r=t.pointers[0],n=xt.drawables;n.ellipse||(n.ellipse=new F.Struct),n.ellipse.setUnionOfPoints([this.start,r]),ut.val&&F.expandToSquare(n.ellipse),xt.needToRender=!0}},onLeave:function(t){this.onMove(t)},onEnd:function(t){this.start=null;var r=xt.drawables;if(r.ellipse){var n=Pt.addEllipse(q.Ellipse.withBoundaries(r.ellipse),it.val);a(n),xt.drawables.ellipse=null,xt.applyColorChanges()}}},nt={onStart:function(t){this.start=t.pointers[0]},onMove:function(t){if(this.start){var r=t.pointers[0],n=xt.drawables;if(n.shape||(n.shape=new A.Shape(gt)),ut.val)n.shape.stretchAcrossLine(this.start,r);else{var e=F.Obj.unionOfPoints([this.start,r]);n.shape.fitInRect(e,2)}xt.needToRender=!0}},onEnd:function(t){this.start=null;var r=xt.drawables;if(r.shape){var n=Pt.addShape(r.shape,it.val);a(n),r.shape=null,xt.applyColorChanges()}}},et=H.Struct.create$(205,205,205,255),ot=H.Struct.create$(205,205,205,255),it=j.ColorOption.create("drawColor",H.Struct.create$(39,78,19,255)),at=j.LerpedOption.create(new j.Lerper(-1,1),j.Option.num("brushRadius",2,1,50)),st=j.LerpedOption.create(new j.Lerper(0,k.H_WIDTH),j.Option.num("lineThickness",2,1,100)),ut=j.Option.bool("maintainAspect",!0),ct=j.Option.bool("shadowsEnabled",!0),pt=j.LerpedOption.create(j.Lerper.fromRange(1,2,1e3),j.Option.num("zoomSpeed",500,1,1e3)),ft=j.InterpolatedOption.create(w,j.Option.num("log2cols",7,5,9)),ht=j.InterpolatedOption.create(w,j.Option.num("log2rows",7,5,9)),lt=j.Option.str("filename","My Hexel Art"),dt=it.val.a/255,yt=K,bt="#brush",gt=N[0],vt=document.getElementById("onscreen-canvas"),mt=vt.getContext("webgl"),Pt=new k.Grid(ft.val,ht.val);Pt.clear(et),Pt.hasGradient=ct.val;var $t=H.Buf.create(Pt.hexels.capacity());Pt.hexels.moveToFirst(),$t.putBuffer(Pt.hexels);var xt=E.HexelRenderer.create(mt,Pt,N);xt.lineThickness=st.val,xt.color=it.val;var St=new D.Surface(vt,xt),_t=document.getElementById("offscreen-canvas"),wt=_t.getContext("2d");_t.width=Pt.cols,_t.height=Pt.rows,f(),s(vt,function(t){t.preventDefault(),t.stopPropagation();var r=t.detail<0||t.wheelDelta>0,n=r?pt.val:1/pt.val,e=St.screenToWorld(t);xt.projection.zoomToPoint(n,e),xt.needToRender=!0}),D.addSurfaceListener(window,St,o,i),c()},{"./graphics/bit":1,"./graphics/ellipse":2,"./graphics/model":3,"./graphics/rendering/projection":5,"./graphics/rendering/surface":7,"./graphics/shape":9,"./graphics/struct/color":10,"./graphics/struct/line":13,"./graphics/struct/point":16,"./graphics/struct/rect":17,"./graphics/struct/vec2":19,"./hexel/grid":23,"./options":26,"./polygons":27,"./renderer":33}],26:[function(t,r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=t("./graphics/struct/util"),o=t("./graphics/struct/color"),i=function(){function t(t,r){this.key=t,this.value=r}return t.get=function(t){return localStorage?localStorage.getItem(t):null},t.bool=function(r,n){var e,o=t.get(r);return e="true"===o?!0:"false"===o?!1:n,new t(r,e)},t.num=function(r,n,e,o){var i=parseInt(t.get(r));return(isNaN(i)||e>i||i>o)&&(i=n),new t(r,i)},t.str=function(r,n){var e=t.get(r),o=e?e:n;return new t(r,o)},Object.defineProperty(t.prototype,"val",{get:function(){return this.value},set:function(t){this.value=t,localStorage&&localStorage.setItem(this.key,t.toString())},enumerable:!0,configurable:!0}),t}();n.Option=i;var a=function(){function t(t,r){this.unparsed=t,this.value=r}return t.create=function(r,n){var a,s=i.str(r,null);return s.val&&e.ArgbRegex.test(s.val)?a=o.Struct.fromArgbString(s.val):(a=n,s.val=n.toArgbString()),new t(s,a)},Object.defineProperty(t.prototype,"val",{get:function(){return this.value},set:function(t){this.value=t,this.unparsed.val=t.toArgbString()},enumerable:!0,configurable:!0}),t}();n.ColorOption=a;var s=function(){function t(t,r,n){this.interpolator=t,this.uninterpolated=r,this.value=n}return t.create=function(r,n){var e=r(n.val);return new t(r,n,e)},Object.defineProperty(t.prototype,"val",{get:function(){return this.value},set:function(t){this.uninterpolated.val=t,this.value=this.interpolator(t)},enumerable:!0,configurable:!0}),t}();n.InterpolatedOption=s;var u=function(){function t(t,r,n){this.unlerped=r,this.lerper=t,this.value=n}return t.create=function(r,n){var e=r.lerp(n.val);return new t(r,n,e)},Object.defineProperty(t.prototype,"val",{get:function(){return this.value},set:function(t){this.unlerped.val=t,this.value=this.lerper.lerp(t)},enumerable:!0,configurable:!0}),t}();n.LerpedOption=u;var c=function(){function t(t,r){this.a=t,this.b=r}return t.fromRange=function(r,n,e){return new t(r,(n-r)/e)},t.prototype.lerp=function(t){return this.a+this.b*t},t.prototype.unlerp=function(t){return(t-this.a)/this.b},t}();n.Lerper=c},{"./graphics/struct/color":10,"./graphics/struct/util":18}],27:[function(t,r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.bat={vertices:new Float32Array([0,3,-2,5,-3,2,-5,0,-8,3,-10,7,-17,10,-13,5,-12,-1,-3,-7,0,-10,3,-7,12,-1,13,5,17,10,10,7,8,3,5,0,3,2,2,5]),indices:new Uint16Array([0,1,2,0,2,3,0,3,9,0,9,10,0,10,11,0,11,17,0,17,18,0,18,19,4,5,6,4,6,7,4,7,8,4,8,9,4,9,3,16,14,15,16,13,14,16,12,13,16,11,12,16,17,11])},n.flower={vertices:new Float32Array([0,-2,-1,-1,-2,-1,-2,-2,-3,-3,-1,-3,-2,-4,-2,-5,-1,-5,0,-6,0,-4,1,-5,2,-5,2,-4,3,-3,1,-3,2,-2,2,-1,1,-1,0,0]),indices:new Uint16Array([5,0,1,5,1,2,5,2,3,5,3,4,5,6,7,5,7,8,5,8,9,5,9,10,5,10,0,15,0,10,15,10,11,15,11,12,15,12,13,15,13,14,15,16,17,15,17,18,15,18,19,15,19,0])},n.heart={vertices:new Float32Array([0,12,-3,16,-5,16,-8,12,-8,8,0,0,8,8,8,12,5,16,3,16])}},{}],28:[function(t,r,n){"use strict";var e=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(r,n){function e(){this.constructor=r}t(r,n),r.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t("../graphics/model"),i=t("../graphics/rendering/util"),a=t("../graphics/rendering/program"),s=t("./shaders"),u=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return e(r,t),r.create=function(t){var n=a.createProgramInfo(t,s.EllipseProgramSource),e=i.createArrayBuffer(t,new Float32Array([0,1,0,0,1,0,1,1])),u=i.createElementBuffer(t,o.polygonIndices(4).data);return new r(n,{texCoordBuffer:e,elementBuffer:u})},r.prototype.bind=function(t){t.useProgram(this.location),t.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,this.bindings.texCoordBuffer),t.vertexAttribPointer(this.attribs.a_texCoord,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(this.attribs.a_texCoord),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.bindings.elementBuffer)},r.prototype.setProjection=function(t,r){t.uniformMatrix4fv(this.uniforms.u_projection,!1,r.data)},r.prototype.setColor=function(t,r){t.uniform4fv(this.uniforms.u_color,r.data)},r.prototype.setEllipse=function(t,r){t.uniform4fv(this.uniforms.u_rect,r.data)},r.prototype.draw=function(t){t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)},r}(a.Program);n.EllipseProgram=u},{"../graphics/model":3,"../graphics/rendering/program":4,"../graphics/rendering/util":8,"./shaders":31}],29:[function(t,r,n){"use strict";var e=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(r,n){function e(){this.constructor=r}t(r,n),r.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t("../hexel/grid"),i=t("../graphics/struct/vec2"),a=t("../graphics/struct/point"),s=t("../graphics/struct/indextuple"),u=t("../graphics/vertexbuf"),c=t("../graphics/rendering/program"),p=t("./shaders"),f=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.basePosition=new i.Struct,r.baseTexCoord=new i.Struct,r}return e(r,t),r.create=function(t,n){var e=c.createProgramInfo(t,p.HexelProgramSource),o=new r(e,{positionBuffer:t.createBuffer(),texCoordBuffer:t.createBuffer(),gradientBuffer:t.createBuffer(),elementBuffer:t.createBuffer(),texture:t.createTexture()});return o.setLayout(t,n),o},r.prototype.bind=function(t){t.useProgram(this.location),t.disable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,this.bindings.positionBuffer),t.vertexAttribPointer(this.attribs.a_position,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(this.attribs.a_position),t.bindBuffer(t.ARRAY_BUFFER,this.bindings.texCoordBuffer),t.vertexAttribPointer(this.attribs.a_texCoord,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(this.attribs.a_texCoord),t.bindBuffer(t.ARRAY_BUFFER,this.bindings.gradientBuffer),t.vertexAttribPointer(this.attribs.a_gradient,1,t.FLOAT,!1,0,0),t.enableVertexAttribArray(this.attribs.a_gradient),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.bindings.elementBuffer),t.bindTexture(t.TEXTURE_2D,this.bindings.texture)},r.prototype.setProjection=function(t,r){t.uniformMatrix4fv(this.uniforms.u_projection,!1,r.data)},r.prototype.setColors=function(t,r){t.bindTexture(t.TEXTURE_2D,this.bindings.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.grid.cols,this.grid.rows,0,t.RGBA,t.UNSIGNED_BYTE,r)},r.prototype.updateColors=function(t,r){t.bindTexture(t.TEXTURE_2D,this.bindings.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.grid.cols,this.grid.rows,t.RGBA,t.UNSIGNED_BYTE,r)},r.prototype.setGradient=function(t,r){t.bindBuffer(t.ARRAY_BUFFER,this.bindings.gradientBuffer),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW)},r.prototype.setTexCoords=function(t,r){t.bindBuffer(t.ARRAY_BUFFER,this.bindings.texCoordBuffer),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW)},r.prototype.setPositions=function(t,r){t.bindBuffer(t.ARRAY_BUFFER,this.bindings.positionBuffer),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW)},r.prototype.setIndices=function(t,r){this.elementCount=r.length,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.bindings.elementBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,r,t.STATIC_DRAW)},r.prototype.setLayout=function(t,r){this.grid=r;var n=this.grid,e=n.hexels.capacity();this.hexelsPerSection=Math.min(e,8192),this.sectionsPerGrid=e/this.hexelsPerSection,this.rowsPerSection=this.hexelsPerSection/n.cols,this.sectionHeight=1.5*this.rowsPerSection,this.setPositions(t,this.generateVertices()),this.setTexCoords(t,this.generateTexCoords()),this.setGradient(t,this.generateGradient()),this.setIndices(t,this.generateIndices()),this.setColors(t,r.hexels.data)},r.prototype.applyColorChanges=function(t){this.updateColors(t,this.grid.hexels.data)},r.prototype.applyGradientChanges=function(t){this.setGradient(t,this.generateGradient())},r.prototype.draw=function(t,r){var n=r.region,e=this.grid,o=e.pointToHex(a.Obj.create$(0,n.top)).r-1,i=e.pointToHex(a.Obj.create$(0,n.bottom)).r+1,s=Math.max(0,Math.floor(o/this.rowsPerSection)),u=Math.min(this.sectionsPerGrid,Math.ceil(i/this.rowsPerSection)),c=-this.sectionHeight,p=1/this.sectionsPerGrid;this.basePosition.x=0,this.basePosition.y=c*s,this.baseTexCoord.x=0,this.baseTexCoord.y=p*s;for(var f=s;u>f;f++)t.uniform2fv(this.uniforms.u_basePosition,this.basePosition.data),t.uniform2fv(this.uniforms.u_baseTexCoord,this.baseTexCoord.data),t.drawElements(t.TRIANGLES,this.elementCount,t.UNSIGNED_SHORT,0),this.basePosition.y+=c,this.baseTexCoord.y+=p},r.prototype.generateVertices=function(){var t=u["default"].create(6*this.hexelsPerSection);return this.grid.forEachCenterVertex(function(r,n,e){t.put$(r,n+1),t.put$(r-o.H_RIGHT,n+o.H_UP),t.put$(r-o.H_RIGHT,n-o.H_UP),t.put$(r,n-1),t.put$(r+o.H_RIGHT,n-o.H_UP),t.put$(r+o.H_RIGHT,n+o.H_UP)},this.rowsPerSection),t.data},r.prototype.generateTexCoords=function(){for(var t=i.Buf.create(6*this.hexelsPerSection),r=this.grid.rows,n=this.grid.cols,e=0;e<this.rowsPerSection;e++)for(var o=(e+.5)/r,a=0;n>a;a++)for(var s=(a+.5)/n,u=0;6>u;u++)t.put$(s,o);return t.data},r.prototype.generateIndices=function(){for(var t=s.Buf.create(4*this.hexelsPerSection),r=0;t.hasValidPosition();r+=6)t.put$(r,r+1,r+2),t.put$(r,r+2,r+3),t.put$(r,r+3,r+4),t.put$(r,r+4,r+5);return t.data},r.prototype.generateGradient=function(){var t=this.hexelsPerSection,r=new Float32Array(6*t),n=0;if(!this.grid.hasGradient)return r;for(var e=18/256,o=.125,i=50/256,a=0;t>a;a++)r[n++]=e,r[n++]=o,r[n++]=i,r[n++]=-e,r[n++]=-o,r[n++]=-i;return r},r}(c.Program);n.HexelProgram=f},{"../graphics/rendering/program":4,"../graphics/struct/indextuple":12,"../graphics/struct/point":16,"../graphics/struct/vec2":19,"../graphics/vertexbuf":22,"../hexel/grid":23,"./shaders":31}],30:[function(t,r,n){"use strict";var e=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(r,n){function e(){this.constructor=r}t(r,n),r.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t("../graphics/model"),i=t("../graphics/rendering/util"),a=t("../graphics/rendering/program"),s=t("./shaders"),u=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return e(r,t),r.create=function(t){var n=a.createProgramInfo(t,s.LineProgramSource),e=i.createArrayBuffer(t,new Float32Array([0,.5,0,-.5,1,-.5,1,.5])),u=i.createElementBuffer(t,o.polygonIndices(4).data);return new r(n,{positionBuffer:e,elementBuffer:u})},r.prototype.bind=function(t){t.useProgram(this.location),t.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,this.bindings.positionBuffer),t.vertexAttribPointer(this.attribs.a_position,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(this.attribs.a_position),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.bindings.elementBuffer)},r.prototype.setProjection=function(t,r){t.uniformMatrix4fv(this.uniforms.u_projection,!1,r.data)},r.prototype.setColor=function(t,r){t.uniform4fv(this.uniforms.u_color,r.data)},r.prototype.setThickness=function(t,r){t.uniform1f(this.uniforms.u_thickness,r)},r.prototype.setLine=function(t,r){t.uniform4fv(this.uniforms.u_line,r.data)},r.prototype.draw=function(t){t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)},r}(a.Program);n.LineProgram=u},{"../graphics/model":3,"../graphics/rendering/program":4,"../graphics/rendering/util":8,"./shaders":31}],31:[function(t,r,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.EllipseProgramSource={vs:"#ifdef GL_ES\nprecision mediump float;\n#endif\nuniform mat4 u_projection;uniform vec4 u_rect;attribute vec2 a_texCoord;varying vec2 v_texCoord;void main(){float left = u_rect[0]; float top = u_rect[1]; float right = u_rect[2]; float bottom = u_rect[3]; float width = right - left; float height = top - bottom; float posX = width * a_texCoord.x + left; float posY = height * a_texCoord.y + bottom; gl_Position = u_projection * vec4(posX, posY, 1.0, 1.0); v_texCoord = a_texCoord;}",fs:"#ifdef GL_ES\nprecision mediump float;\n#endif\nuniform vec4 u_color;varying vec2 v_texCoord;void main(){float dx = v_texCoord.x * 2.0 - 1.0; float dy = v_texCoord.y * 2.0 - 1.0; float dist2 = dx * dx + dy * dy; gl_FragColor = u_color * float(dist2 <= 1.0);}"},n.HexelProgramSource={vs:"#ifdef GL_ES\nprecision mediump float;\n#endif\nuniform sampler2D u_tex;uniform mat4 u_projection;uniform vec2 u_basePosition;uniform vec2 u_baseTexCoord;attribute vec2 a_position;attribute vec2 a_texCoord;attribute float a_gradient;varying vec4 v_color;void main(){gl_Position.xy = u_basePosition + a_position; gl_Position.z = 1.0; gl_Position.w = 1.0; gl_Position = u_projection * gl_Position; v_color = texture2D(u_tex, u_baseTexCoord + a_texCoord); v_color.r += a_gradient; v_color.g += a_gradient; v_color.b += a_gradient; v_color.a = 1.0;}",fs:"#ifdef GL_ES\nprecision mediump float;\n#endif\nvarying vec4 v_color;void main(){gl_FragColor = v_color;}"},n.LineProgramSource={vs:"#ifdef GL_ES\nprecision mediump float;\n#endif\nuniform mat4 u_projection;uniform vec4 u_line;uniform float u_thickness;attribute vec2 a_position;void main(){vec2 p1 = vec2(u_line[0], u_line[1]); vec2 p2 = vec2(u_line[2], u_line[3]); float width = distance(p1, p2); float height = u_thickness; float sx = width * a_position.x; float sy = height * a_position.y; float hypotenuse = width; float adjacent = p2.x - p1.x; float opposite = p2.y - p1.y; float sin = opposite / hypotenuse; float cos = adjacent / hypotenuse; float rx = cos * sx - sin * sy; float ry = sin * sx + cos * sy; float tx = rx + p1.x; float ty = ry + p1.y; gl_Position = u_projection * vec4(tx, ty, 1.0, 1.0);}",fs:"#ifdef GL_ES\nprecision mediump float;\n#endif\nuniform vec4 u_color;void main(){gl_FragColor = u_color;}"},n.ShapeProgramSource={vs:"#ifdef GL_ES\nprecision mediump float;\n#endif\nuniform mat4 u_projection;uniform mat3 u_model;attribute vec2 a_position;void main(){gl_Position.xy = a_position; gl_Position.z = 1.0; gl_Position.xyz = u_model * gl_Position.xyz; gl_Position.w = 1.0; gl_Position = u_projection * gl_Position;}",fs:"#ifdef GL_ES\nprecision mediump float;\n#endif\nuniform vec4 u_color;void main(){gl_FragColor = u_color;}"}},{}],32:[function(t,r,n){"use strict";function e(t){for(var r=0,n=0,e=0;e<t.length;e++)r+=t[e].vertices.capacity(),n+=t[e].indices.capacity();for(var o=i["default"].create(r),s=a.Buf.create(n),u=o.structLength()*o.data.BYTES_PER_ELEMENT,c=s.structLength()*s.data.BYTES_PER_ELEMENT,p=0,f=t;p<f.length;p++){var h=f[p];h.vertexBufferOffset=o.position()*u,h.elementBufferOffset=s.position()*c,h.vertices.moveToFirst(),o.putBuffer(h.vertices),h.indices.moveToFirst(),s.putBuffer(h.indices)}return{vertices:o.data,indices:s.data}}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(r,n){function e(){this.constructor=r}t(r,n),r.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=t("../graphics/vertexbuf"),a=t("../graphics/struct/indextuple"),s=t("../graphics/rendering/util"),u=t("../graphics/rendering/program"),c=t("./shaders"),p=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.elementCount=0,r.elementOffset=0,r}return o(r,t),r.create=function(t,n){var o=u.createProgramInfo(t,c.ShapeProgramSource),i=e(n),a=s.createArrayBuffer(t,i.vertices),p=s.createElementBuffer(t,i.indices);return new r(o,{positionBuffer:a,elementBuffer:p})},r.prototype.bind=function(t){t.useProgram(this.location),t.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,this.bindings.positionBuffer),t.enableVertexAttribArray(this.attribs.a_position),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.bindings.elementBuffer)},r.prototype.setProjection=function(t,r){t.uniformMatrix4fv(this.uniforms.u_projection,!1,r.data)},r.prototype.setColor=function(t,r){t.uniform4fv(this.uniforms.u_color,r.data)},r.prototype.setModel=function(t,r){t.vertexAttribPointer(this.attribs.a_position,2,t.FLOAT,!1,0,r.vertexBufferOffset),this.elementCount=r.indices.data.length,this.elementOffset=r.elementBufferOffset},r.prototype.setModelMatrix=function(t,r){t.uniformMatrix3fv(this.uniforms.u_model,!1,r.data)},r.prototype.draw=function(t){t.drawElements(t.TRIANGLES,this.elementCount,t.UNSIGNED_SHORT,this.elementOffset)},r}(u.Program);n.ShapeProgram=p},{"../graphics/rendering/program":4,"../graphics/rendering/util":8,"../graphics/struct/indextuple":12,"../graphics/vertexbuf":22,"./shaders":31}],33:[function(t,r,n){"use strict";var e=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])};return function(r,n){function e(){this.constructor=r}t(r,n),r.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t("./hexel/grid"),i=t("./program/ellipse"),a=t("./program/line"),s=t("./program/shape"),u=t("./program/hexel"),c=t("./graphics/struct/colorf"),p=t("./graphics/rendering/projection"),f=t("./graphics/rendering/renderer"),h=function(t){function r(){var r=null!==t&&t.apply(this,arguments)||this;return r.rgba=new c.Struct,r.lineThickness=o.H_WIDTH,r}return e(r,t),r.create=function(t,n,e){var o=Math.max(n.rows,n.cols),c=new p.Projection(n.bounds,1,o),f={ellipse:i.EllipseProgram.create(t),line:a.LineProgram.create(t),shape:s.ShapeProgram.create(t,e),hexel:u.HexelProgram.create(t,n)},h={ellipse:null,line:null,shape:null};return new r(t,c,f,h)},Object.defineProperty(r.prototype,"color",{set:function(t){this.rgba.setFromColor(t)},enumerable:!0,configurable:!0}),r.prototype.onSurfaceCreated=function(){var t=this.gl;t.clearColor(0,0,0,0),t.enable(t.CULL_FACE),t.cullFace(t.BACK),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)},r.prototype.onDrawFrame=function(){var t=this,r=t.gl,n=t.projection,e=t.programs,o=t.drawables,i=t.lineThickness,a=t.rgba,s=e.hexel,u=e.shape,c=e.line,p=e.ellipse,f=o.shape,h=o.line,l=o.ellipse,d=n.matrix;this.useProgram(s),s.setProjection(r,d),s.draw(r,n),f?(this.useProgram(u),u.setProjection(r,d),u.setColor(r,a),u.setModel(r,f.model),u.setModelMatrix(r,f.matrix),u.draw(r)):l?(this.useProgram(p),p.setProjection(r,d),p.setColor(r,a),p.setEllipse(r,l),p.draw(r)):h&&(this.useProgram(c),c.setProjection(r,d),c.setColor(r,a),c.setThickness(r,i),c.setLine(r,h),c.draw(r))},r.prototype.applyGradientChanges=function(){this.programs.hexel.applyGradientChanges(this.gl),this.needToRender=!0},r.prototype.applyColorChanges=function(){this.programs.hexel.applyColorChanges(this.gl),this.needToRender=!0},r}(f.Renderer);n.HexelRenderer=h},{"./graphics/rendering/projection":5,"./graphics/rendering/renderer":6,"./graphics/struct/colorf":11,"./hexel/grid":23,"./program/ellipse":28,"./program/hexel":29,"./program/line":30,"./program/shape":32}]},{},[25]);